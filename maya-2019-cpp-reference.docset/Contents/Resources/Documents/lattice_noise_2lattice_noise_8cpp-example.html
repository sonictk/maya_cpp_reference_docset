<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><script src="../scripts/utils/adsk.redirect.js" type="text/javascript"></script>
<title>latticeNoise/latticeNoise.cpp</title>
<meta content="C++" name="topic-subtype"/></head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('lattice_noise_2lattice_noise_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type="text/javascript">$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script><!-- begin MT -->
<div class="Dark" id="MicrosoftTranslatorWidget" style="float:right;z-index:100;color:white;background-color:#bbbbbb;height:58px;overflow:hidden"></div>
<div>
<div class="head">
<h1>latticeNoise/latticeNoise.cpp</h1>
</div>
<div id="top"><!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>MainÂ Page</span></a></li>
<li><a href="./pages.html"><span>Topics</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./files.html"><span>Files</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<div class="header">
<div class="headertitle">
<div class="title">latticeNoise/latticeNoise.cpp</div> </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">// Copyright 1995,2006,2008 Autodesk, Inc. All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk</span></div>
<div class="line"><span class="comment">// license agreement provided at the time of installation or download,</span></div>
<div class="line"><span class="comment">// or which otherwise accompanies this software in either electronic</span></div>
<div class="line"><span class="comment">// or hard copy form.</span></div>
<div class="line"><span class="comment">// ==========================================================================</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// DESCRIPTION:</span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="comment">// Produces the dependency graph node "latticeNoise" and MEL command "latticeNoise".</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This plug-in is an example of the following:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  - how to have node attributes input and output geometry</span></div>
<div class="line"><span class="comment">//  - how to modify dependency graph connections using the API</span></div>
<div class="line"><span class="comment">//  - how to take Maya objects as arguments to a user defined MEL command</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The "latticeNoise" command creates a new lattice deformer around the currently selected geometry</span></div>
<div class="line"><span class="comment">// or around the objects specified on the command line. The command also inserts a "latticeNoise" node</span></div>
<div class="line"><span class="comment">// in between the lattice shape in the DAG and the node that performs the deformation.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// The end effect of the "latticeNoise" command is that the objects inside the lattice deform</span></div>
<div class="line"><span class="comment">// with respect to the lattice, but they also wobble about randomly as noise is applied to the lattice points.</span></div>
<div class="line"><span class="comment">// The "latticeNoise" node has attributes for amplitude and frequency that control the amount of noise applied.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// An example of using the command is:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  latticeNoise nurbsSphereShape1 nurbsConeShape1;</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="preprocessor">#include "latticeNoise.h"</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnPlugin.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MString.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"></div>
<div class="line"><a name="_a0"></a><a class="code" href="./class_m_status.html">MStatus</a> initializePlugin( <a name="_a1"></a><a class="code" href="./class_m_object.html">MObject</a> obj )</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a>   status;</div>
<div class="line"> <a name="_a2"></a><a class="code" href="./class_m_fn_plugin.html">MFnPlugin</a> plugin( obj, PLUGIN_COMPANY, <span class="stringliteral">"3.0"</span>, <span class="stringliteral">"Any"</span>);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Register latticeNoise node</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    status = plugin.<a name="a3"></a><a class="code" href="./class_m_fn_plugin.html#a2d2a3682ce86ffbed188eff09d93998d">registerNode</a>( <span class="stringliteral">"latticeNoise"</span>, latticeNoiseNode::id,</div>
<div class="line">                                         latticeNoiseNode::creator,</div>
<div class="line">                                         latticeNoiseNode::initialize);</div>
<div class="line"> <span class="keywordflow">if</span> (!status) {</div>
<div class="line">        status.<a name="a4"></a><a class="code" href="./class_m_status.html#a1f01a4748fea4d8bcced082df83f804d">perror</a>(<span class="stringliteral">"registerNode"</span>);</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Register latticeNoise command</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    status = plugin.<a name="a5"></a><a class="code" href="./class_m_fn_plugin.html#a7b78c43a8925aff119cbd24aee3725b2">registerCommand</a>( <span class="stringliteral">"latticeNoise"</span>, latticeNoiseCmd::creator );</div>
<div class="line"> <span class="keywordflow">if</span> (!status) {</div>
<div class="line">        plugin.<a name="a6"></a><a class="code" href="./class_m_fn_plugin.html#ad79b620e76ce78e1f6b218cfe4d09b46">deregisterNode</a>( latticeNoiseNode::id );</div>
<div class="line">        status.<a class="code" href="./class_m_status.html#a1f01a4748fea4d8bcced082df83f804d">perror</a>(<span class="stringliteral">"registerCommand"</span>);</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> uninitializePlugin( <a class="code" href="./class_m_object.html">MObject</a> obj)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a>   status;</div>
<div class="line"> <a class="code" href="./class_m_fn_plugin.html">MFnPlugin</a> plugin( obj );</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Deregister latticeNoise node</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    status = plugin.deregisterNode( latticeNoiseNode::id ); </div>
<div class="line"> <span class="keywordflow">if</span> (!status) {</div>
<div class="line">        status.<a class="code" href="./class_m_status.html#a1f01a4748fea4d8bcced082df83f804d">perror</a>(<span class="stringliteral">"registerNode"</span>);</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Register latticeNoise command</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    status = plugin.deregisterCommand( <span class="stringliteral">"latticeNoise"</span> ); </div>
<div class="line"> <span class="keywordflow">if</span> (!status) {</div>
<div class="line">        status.<a class="code" href="./class_m_status.html#a1f01a4748fea4d8bcced082df83f804d">perror</a>(<span class="stringliteral">"deregisterCommand"</span>);</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Class: noise</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The noise class is used for generating pseudo-random continuous noise.</span></div>
<div class="line"><span class="comment">//      The noise values generated are always between 0 and 1.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      The technique used is a simple lattice noise algorithm based upon one </span></div>
<div class="line"><span class="comment">//      by Ken Perlin.  This particular implementation is adapted from </span></div>
<div class="line"><span class="comment">//      Darwyn Peachey's (Texturing and Modeling: a Procedural Approach, S. Ebert</span></div>
<div class="line"><span class="comment">//      Editor, 1994).</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> kTableMask = TABLE_SIZE - 1;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//                       PUBLIC                             //</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="keywordtype">float</span> noise::atValue( <span class="keywordtype">float</span> x )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Get the noise value at the given point in 1-space.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Arguments:</span></div>
<div class="line"><span class="comment">//      x - the point at which to calculate the noise</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Return Value:</span></div>
<div class="line"><span class="comment">//      the noise value at the point</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> ix; </div>
<div class="line"> <span class="keywordtype">float</span> fx; </div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( !isInitialized ) {</div>
<div class="line">        initTable( 23479015 );</div>
<div class="line">        isInitialized = 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ix = (int)floorf( x );</div>
<div class="line">    fx = x - (float)ix; </div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">return</span> spline( fx, value( ix - 1 ),</div>
<div class="line">                       value( ix ),</div>
<div class="line">                       value( ix + 1 ),</div>
<div class="line">                       value( ix + 2 ) );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> noise::atPoint( <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Get the noise value at the given point in 3-space.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Arguments:</span></div>
<div class="line"><span class="comment">//      x - x component of point</span></div>
<div class="line"><span class="comment">//      y - x component of point</span></div>
<div class="line"><span class="comment">//      z - x component of point</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Return Value:</span></div>
<div class="line"><span class="comment">//      the noise value at the point</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span> ix, iy, iz;</div>
<div class="line"> <span class="keywordtype">int</span> i, j, k;</div>
<div class="line"> <span class="keywordtype">float</span> fx, fy, fz;</div>
<div class="line"> <span class="keywordtype">float</span> xknots[4], yknots[4], zknots[4];</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( !isInitialized ) {</div>
<div class="line">        initTable( 23479015 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ix = (int)floorf( x );</div>
<div class="line">    fx = x - (float)ix; </div>
<div class="line"></div>
<div class="line">    iy = (int)floorf( y );</div>
<div class="line">    fy = y - (float)iy;</div>
<div class="line"></div>
<div class="line">    iz = (int)floorf( z );</div>
<div class="line">    fz = z - (float)iz;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> ( k = -1; k &lt;= 2; k++ ) {</div>
<div class="line"> <span class="keywordflow">for</span> ( j = -1; j &lt;= 2; j++ ) {</div>
<div class="line"> <span class="keywordflow">for</span> ( i = -1; i &lt;= 2 ; i++ ) {</div>
<div class="line">                xknots[i+1] = value( ix + i, iy + j, iz + k );</div>
<div class="line">            }</div>
<div class="line">            yknots[j+1] = spline( fx, xknots[0], xknots[1], xknots[2], xknots[3] );</div>
<div class="line">        }</div>
<div class="line">        zknots[k+1] = spline( fy, yknots[0], yknots[1], yknots[2], yknots[3] );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">float</span> val = spline( fz, zknots[0], zknots[1], zknots[2], zknots[3] ); </div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> val;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">pnt noise::atPointAndTime( <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z, <span class="keywordtype">float</span> t )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Get three noise values at the given point in 4-space.  This is actually</span></div>
<div class="line"><span class="comment">//      a reasonably expensive operation.  It requires 255 simple spline </span></div>
<div class="line"><span class="comment">//      interpolations.  However, the noise function is continuous. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Arguments:</span></div>
<div class="line"><span class="comment">//      x - x component of point</span></div>
<div class="line"><span class="comment">//      y - x component of point</span></div>
<div class="line"><span class="comment">//      z - x component of point</span></div>
<div class="line"><span class="comment">//      t - t component of point (time component)</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Return Value:</span></div>
<div class="line"><span class="comment">//      the noise value at the point</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    pnt ret;</div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> ix, iy, iz, it;</div>
<div class="line"> <span class="keywordtype">int</span> i, j, k, l;</div>
<div class="line"> <span class="keywordtype">float</span> fx, fy, fz, ft;</div>
<div class="line"> <span class="keywordtype">float</span> xknots[3][4], yknots[3][4], zknots[3][4], tknots[3][4];</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( !isInitialized ) {</div>
<div class="line">        initTable( 23479015 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ix = (int)floorf( x );</div>
<div class="line">    fx = x - (float)ix; </div>
<div class="line"></div>
<div class="line">    iy = (int)floorf( y );</div>
<div class="line">    fy = y - (float)iy;</div>
<div class="line"></div>
<div class="line">    iz = (int)floorf( z );</div>
<div class="line">    fz = z - (float)iz;</div>
<div class="line"></div>
<div class="line">    it = (int)floorf( t);</div>
<div class="line">    ft = t - (float)it;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> ( l = -1; l &lt;= 2; l++ ) {</div>
<div class="line"> <span class="keywordflow">for</span> ( k = -1; k &lt;= 2; k++ ) {</div>
<div class="line"> <span class="keywordflow">for</span> ( j = -1; j &lt;= 2; j++ ) {</div>
<div class="line"> <span class="keywordflow">for</span> ( i = -1; i &lt;= 2 ; i++ ) {</div>
<div class="line">                    xknots[0][i+1] = value( ix + i, iy + j, iz + k, it + l,</div>
<div class="line">                                            valueTable1 ); </div>
<div class="line">                    xknots[1][i+1] = value( ix + i, iy + j, iz + k, it + l,</div>
<div class="line">                                            valueTable2 ); </div>
<div class="line">                    xknots[2][i+1] = value( ix + i, iy + j, iz + k, it + l,</div>
<div class="line">                                            valueTable3 ); </div>
<div class="line">                }</div>
<div class="line">                yknots[0][j+1] = spline( fx, xknots[0][0], xknots[0][1], </div>
<div class="line">                                         xknots[0][2], xknots[0][3] );</div>
<div class="line">                yknots[1][j+1] = spline( fx, xknots[1][0], xknots[1][1], </div>
<div class="line">                                         xknots[1][2], xknots[1][3] );</div>
<div class="line">                yknots[2][j+1] = spline( fx, xknots[2][0], xknots[2][1], </div>
<div class="line">                                         xknots[2][2], xknots[2][3] );</div>
<div class="line">            }</div>
<div class="line">            zknots[0][k+1] = spline( fy, yknots[0][0], yknots[0][1], </div>
<div class="line">                                     yknots[0][2], yknots[0][3] );</div>
<div class="line">            zknots[1][k+1] = spline( fy, yknots[1][0], yknots[1][1], </div>
<div class="line">                                     yknots[1][2], yknots[1][3] );</div>
<div class="line">            zknots[2][k+1] = spline( fy, yknots[2][0], yknots[2][1], </div>
<div class="line">                                     yknots[2][2], yknots[2][3] );</div>
<div class="line">        }</div>
<div class="line">        tknots[0][l+1] = spline( fz, zknots[0][0], zknots[0][1], </div>
<div class="line">                                 zknots[0][2], zknots[0][3] );</div>
<div class="line">        tknots[1][l+1] = spline( fz, zknots[1][0], zknots[1][1], </div>
<div class="line">                                 zknots[1][2], zknots[1][3] );</div>
<div class="line">        tknots[2][l+1] = spline( fz, zknots[2][0], zknots[2][1], </div>
<div class="line">                                 zknots[2][2], zknots[2][3] );</div>
<div class="line">    } </div>
<div class="line">    ret.x = spline( ft, tknots[0][0], tknots[0][1], tknots[0][2], tknots[0][3] ); </div>
<div class="line">    ret.y = spline( ft, tknots[1][0], tknots[1][1], tknots[1][2], tknots[1][3] ); </div>
<div class="line">    ret.z = spline( ft, tknots[2][0], tknots[2][1], tknots[2][2], tknots[2][3] ); </div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>  noise::initTable( <span class="keywordtype">long</span> seed )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Initialize the table of random values with the given seed. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Arguments:</span></div>
<div class="line"><span class="comment">//      seed - the new seed value </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    srand48( seed );</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; TABLE_SIZE; i++ ) {</div>
<div class="line">        valueTable1[i] = (float)drand48();</div>
<div class="line">        valueTable2[i] = (float)drand48();</div>
<div class="line">        valueTable3[i] = (float)drand48();</div>
<div class="line">    } </div>
<div class="line">    isInitialized = 1; </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//                       PRIVATE                            //</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> noise::spline( <span class="keywordtype">float</span> x, <span class="keywordtype">float</span> knot0, <span class="keywordtype">float</span> knot1, <span class="keywordtype">float</span> knot2, <span class="keywordtype">float</span> knot3 )</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      This is a simple version of a Catmull-Rom spline interpolation.  </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Assumptions:</span></div>
<div class="line"><span class="comment">//      </span></div>
<div class="line"><span class="comment">//      0 &lt; x &lt; 1</span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">float</span> c0, c1, c2, c3;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Evaluate span of cubic at x using Horner's rule</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">    c3 = (-0.5F * knot0 ) + ( 1.5F * knot1 ) + (-1.5F * knot2 ) + ( 0.5F * knot3 );</div>
<div class="line">    c2 = ( 1.0F * knot0 ) + (-2.5F * knot1 ) + ( 2.0F * knot2 ) + (-0.5F * knot3 );</div>
<div class="line">    c1 = (-0.5F * knot0 ) + ( 0.0F * knot1 ) + ( 0.5F * knot2 ) + ( 0.0F * knot3 );</div>
<div class="line">    c0 = ( 0.0F * knot0 ) + ( 1.0F * knot1 ) + ( 0.0F * knot2 ) + ( 0.0F * knot3 );</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">return</span> ( ( c3 * x + c2 ) * x + c1 ) * x + c0;;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> noise::isInitialized = 0;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> noise::permtable[256] = {</div>
<div class="line">    254,    91,     242,    186,    90,     204,    85,     133,    233,</div>
<div class="line">    50,     187,    49,     182,    224,    144,    166,    7,      51,</div>
<div class="line">    20,     179,    36,     203,    114,    156,    195,    40,     24,</div>
<div class="line">    60,     162,    84,     126,    102,    63,     194,    220,    161,</div>
<div class="line">    72,     94,     193,    229,    140,    57,     3,      189,    106,</div>
<div class="line">    54,     164,    198,    199,    44,     245,    235,    100,    87,</div>
<div class="line">    25,     41,     62,     111,    13,     70,     27,     82,     69,</div>
<div class="line">    53,     66,     247,    124,    67,     163,    125,    155,    228,</div>
<div class="line">    122,    19,     113,    143,    121,    9,      1,      241,    171,</div>
<div class="line">    200,    83,     244,    185,    170,    141,    115,    190,    154,</div>
<div class="line">    48,     32,     178,    127,    167,    56,     134,    15,     160,</div>
<div class="line">    238,    64,     6,      11,     196,    232,    26,     89,     0,</div>
<div class="line">    219,    112,    68,     30,     215,    227,    75,     132,    71,</div>
<div class="line">    239,    251,    92,     14,     104,    231,    29,     180,    150,</div>
<div class="line">    226,    191,    47,     73,     37,     183,    88,     105,    42,</div>
<div class="line">    22,     2,      38,     5,      119,    74,     249,    184,    52,</div>
<div class="line">    8,      55,     118,    255,    206,    173,    165,    78,     31,</div>
<div class="line">    123,    98,     212,    80,     139,    61,     138,    77,     177,</div>
<div class="line">    45,     137,    145,    28,     168,    128,    95,     223,    35,</div>
<div class="line">    205,    76,     211,    175,    81,     33,     207,    21,     131,</div>
<div class="line">    58,     152,    16,     240,    18,     96,     210,    109,    214,</div>
<div class="line">    216,    202,    148,    34,     146,    117,    176,    93,     246,</div>
<div class="line">    172,    97,     159,    197,    218,    65,     147,    253,    221,</div>
<div class="line">    217,    79,     101,    142,    23,     149,    99,     39,     12,</div>
<div class="line">    135,    110,    234,    108,    153,    129,    4,      169,    174,</div>
<div class="line">    116,    243,    130,    107,    222,    10,     43,     188,    46,</div>
<div class="line">    213,    252,    86,     157,    192,    236,    158,    120,    17,</div>
<div class="line">    103,    248,    225,    230,    250,    208,    181,    151,    237,</div>
<div class="line">    201,    59,     136,    209 </div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">float</span> noise::valueTable1[256];</div>
<div class="line"><span class="keywordtype">float</span> noise::valueTable2[256];</div>
<div class="line"><span class="keywordtype">float</span> noise::valueTable3[256];</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
