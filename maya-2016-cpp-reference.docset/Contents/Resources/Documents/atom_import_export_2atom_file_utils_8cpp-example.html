<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="product" content="MAYAUL"><meta name="release" content="2016"><meta name="book" content="Developer"><meta name="created" content="2015-10-14"><meta name="topicid" content="GUID-02DEF634-1E7B-48C6-8ACD-2C934CA97887"><meta name="topic-type" content="concept">
      <title>atomImportExport/atomFileUtils.cpp</title>
   

<meta name="topic-subtype" content="C++"></head>
   <body height="100%"><div class="body_content" id="body-content"><link rel="stylesheet" type="text/css" href="cpp_ref/navtree.css"><link rel="stylesheet" type="text/css" href="cpp_ref/doxygen.css"><link rel="stylesheet" type="text/css" href="cpp_ref/tabs.css"><link rel="stylesheet" type="text/css" href="style/adsk.cpm.css"><script language="javascript">var index = 'index.html';</script><script>$(document).ready(function() { yepnope.injectJs("./scripts/ac_common.js"); });</script><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('atom_import_export_2atom_file_utils_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>$("div#WidgetFloaterPanels,link[href*='microsofttranslator.com'],script[src*='microsofttranslator.com'],script[src*='bing.com']").remove();</script><script type='text/javascript'>$("div#navigation,div#breadcrumbs,div#banner").attr("translate","no"); var mtLocation = ((location && location.href && location.href.indexOf('https') == 0)?'https://ssl.microsofttranslator.com':'http://www.microsofttranslator.com')+'/ajax/v3/WidgetV3.ashx?siteData=y5CYlxTRD0znCzRLDwX0Wy7-g1EdC1XA4dSC-Y1LtaeScyli8_Ps5jPKqTr4xKxMI0OOUfkDplvX3uxN0JnPclebSYW8_J1HBzf4VLQEzQ8M4PsYXF_cMyp1Oumaetky&category=5297189e-446b-459e-ae1d-9d0360400781_tech&ctf=True&ui=true&settings=Manual&from=en&hidelanguages='; yepnope.injectJs(mtLocation, function() {}, { charset:'utf-8', type:'text/javascript' } );</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script><!-- begin MT -->
            
            <div id='MicrosoftTranslatorWidget' class='Dark' style='position:absolute;right:20px;top:5px;z-index:100;color:white;background-color:#555555;height:58px;overflow:hidden'></div>
      <div>
         <div class="head">
            <h1>atomImportExport/atomFileUtils.cpp</h1>
         </div>

    <div id="top"><!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="#!/url=./cpp_ref/index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="#!/url=./cpp_ref/pages.html"><span>Topics</span></a></li>
      <li><a href="#!/url=./cpp_ref/modules.html"><span>Modules</span></a></li>
      <li><a href="#!/url=./cpp_ref/namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="#!/url=./cpp_ref/annotated.html"><span>Classes</span></a></li>
      <li><a href="#!/url=./cpp_ref/examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>

<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">atomImportExport/atomFileUtils.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  File Name:  atomFileUtils.cpp</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      Utility classes to read and write .atom files.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MIOStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFStream.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;atomFileUtils.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;atomImportExportStrings.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;atomNodeNameReplacer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;atomCachedPlugs.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;atomAnimLayers.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MGlobal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MString.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MStringArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnAnimCurve.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboard.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboardItem.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimCurveClipboardItemArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDagPath.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnDagNode.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPlug.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPlugArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MObjectArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MItSelectionList.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFn.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MItDag.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MItDependencyNodes.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MAnimControl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnNumericAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDGModifier.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if defined (OSMac_)</span></div>
<div class="line"><span class="preprocessor">#   include &lt;sys/param.h&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class atomUnitNames</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line"><span class="comment">//  String names for units.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMmString =         <span class="stringliteral">&quot;mm&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kCmString =         <span class="stringliteral">&quot;cm&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMString =          <span class="stringliteral">&quot;m&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKmString =         <span class="stringliteral">&quot;km&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInString =         <span class="stringliteral">&quot;in&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFtString =         <span class="stringliteral">&quot;ft&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kYdString =         <span class="stringliteral">&quot;yd&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMiString =         <span class="stringliteral">&quot;mi&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMmLString =        <span class="stringliteral">&quot;millimeter&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kCmLString =        <span class="stringliteral">&quot;centimeter&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMLString =         <span class="stringliteral">&quot;meter&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKmLString =        <span class="stringliteral">&quot;kilometer&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInLString =        <span class="stringliteral">&quot;inch&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFtLString =        <span class="stringliteral">&quot;foot&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kYdLString =        <span class="stringliteral">&quot;yard&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMiLString =        <span class="stringliteral">&quot;mile&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kRadString =        <span class="stringliteral">&quot;rad&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDegString =        <span class="stringliteral">&quot;deg&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinString =        <span class="stringliteral">&quot;min&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecString =        <span class="stringliteral">&quot;sec&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kRadLString =       <span class="stringliteral">&quot;radian&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDegLString =       <span class="stringliteral">&quot;degree&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinLString =       <span class="stringliteral">&quot;minute&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecLString =       <span class="stringliteral">&quot;second&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kHourTString =      <span class="stringliteral">&quot;hour&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMinTString =       <span class="stringliteral">&quot;min&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kSecTString =       <span class="stringliteral">&quot;sec&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMillisecTString =  <span class="stringliteral">&quot;millisec&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kGameTString =      <span class="stringliteral">&quot;game&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFileTString =      <span class="stringliteral">&quot;film&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPalTString =       <span class="stringliteral">&quot;pal&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kNtscTString =      <span class="stringliteral">&quot;ntsc&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kShowTString =      <span class="stringliteral">&quot;show&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPalFTString =      <span class="stringliteral">&quot;palf&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kNtscFTString =     <span class="stringliteral">&quot;ntscf&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnitlessString = <span class="stringliteral">&quot;unitless&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownTimeString =    <span class="stringliteral">&quot;Unknown Time Unit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownAngularString = <span class="stringliteral">&quot;Unknown Angular Unit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kUnknownLinearString =  <span class="stringliteral">&quot;Unknown Linear Unit&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kExportEditsString = <span class="stringliteral">&quot;offlineFile&quot;</span>; <span class="comment">//in atom 0.1 this will be followed by the .editMA file name. </span></div>
<div class="line">                                                <span class="comment">//In atom 1.0 this will be followed by a  &quot; ;&quot; which will tell us that      </span></div>
<div class="line">                                                <span class="comment">//the end of the file will contain an embedded .editMA file.</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kExportEditsDataString = <span class="stringliteral">&quot;offlineFileData&quot;</span>; <span class="comment">//in atom 1.0, the data following this is the .editMA file. This must come last since</span></div>
<div class="line">                                                        <span class="comment">//we will read this data to the end of the file and copy all of this data over to a </span></div>
<div class="line">                                                        <span class="comment">//temporary .editMA file that we will then use to import.</span></div>
<div class="line"></div>
<div class="line">atomUnitNames::atomUnitNames()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">atomUnitNames::~atomUnitNames()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToLongName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49ed">MAngle::Unit</a>&amp; unit, <a name="_a0"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the angle unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(unit) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a1"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edae77f5ca99dc21b7dfd533074906e0a67">MAngle::kDegrees</a>:</div>
<div class="line">            name.<a name="a2"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kDegLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a3"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kRadLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a4"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda8cb6112ac030d68e2fabddce0f095da7">MAngle::kAngMinutes</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a5"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda555d442ed85c4175176cc6c1f1a9dad6">MAngle::kAngSeconds</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownAngularString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToShortName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49ed">MAngle::Unit</a>&amp; unit, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the angle unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(unit) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edae77f5ca99dc21b7dfd533074906e0a67">MAngle::kDegrees</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kDegString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kRadString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda8cb6112ac030d68e2fabddce0f095da7">MAngle::kAngMinutes</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda555d442ed85c4175176cc6c1f1a9dad6">MAngle::kAngSeconds</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownAngularString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToLongName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49ed">MDistance::Unit</a>&amp; unit, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the distance unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(unit) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a6"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda30a33c2e169c9e6115692eda1c173f30">MDistance::kInches</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kInLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a7"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaedebe6dc6efd5df379da89064414ac43">MDistance::kFeet</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFtLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a8"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaf2f6037d43bc87078b310f919b832330">MDistance::kYards</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kYdLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a9"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edab1c96b8257a6332e1506915a34d8a47f">MDistance::kMiles</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMiLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a10"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda86e73f520eca40e3e3d4a08a43ddbffb">MDistance::kMillimeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMmLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a11"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda0603f671fbadde0729a2e79a80fb9a0e">MDistance::kCentimeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kCmLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a12"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edadc4fd556c40d608a34d8c2246ad6e4a5">MDistance::kKilometers</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kKmLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a13"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda803a162c123bbe61a9d63d7f406e2b7c">MDistance::kMeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMLString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownLinearString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToShortName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49ed">MDistance::Unit</a>&amp; unit, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the distance unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(unit) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda30a33c2e169c9e6115692eda1c173f30">MDistance::kInches</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kInString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaedebe6dc6efd5df379da89064414ac43">MDistance::kFeet</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFtString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaf2f6037d43bc87078b310f919b832330">MDistance::kYards</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kYdString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edab1c96b8257a6332e1506915a34d8a47f">MDistance::kMiles</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMiString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda86e73f520eca40e3e3d4a08a43ddbffb">MDistance::kMillimeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMmString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda0603f671fbadde0729a2e79a80fb9a0e">MDistance::kCentimeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kCmString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edadc4fd556c40d608a34d8c2246ad6e4a5">MDistance::kKilometers</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kKmString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda803a162c123bbe61a9d63d7f406e2b7c">MDistance::kMeters</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownLinearString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToLongName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49ed">MTime::Unit</a> &amp;unit, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the long text name of the time unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(unit) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a14"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda192ff56706b76686ae965da88e53ed4d">MTime::kHours</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kHourTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a15"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda1468d73292d8131a0b832b826f7b33a9">MTime::kMinutes</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMinTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a16"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda3091d1a096c28d4993507f167253ebc7">MTime::kSeconds</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kSecTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a17"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda02e69a6c6c9c097ead05674b06acae9c">MTime::kMilliseconds</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kMillisecTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a18"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edaa627bc0742d58cfc3af228c7fd9850fb">MTime::kGames</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kGameTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a19"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda28ce0398d2e7274904c6359ef92ed94a">MTime::kFilm</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kFileTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a20"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edad2d3f87255e35c2d0f27ac7a82df484f">MTime::kPALFrame</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kPalTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a21"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edaf29bf945a4446d53d8b2e4a9354cdc28">MTime::kNTSCFrame</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kNtscTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a22"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda71ab57a47bcb5be4395cac52e875e622">MTime::kShowScan</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kShowTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a23"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda8645b6eb0e97c43419ab404a9a58bfa1">MTime::kPALField</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kPalFTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a24"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edafe7d3de18f1f918448371211cc5f3d33">MTime::kNTSCField</a>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kNtscFTString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            name.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(kUnknownTimeString);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">void</span> atomUnitNames::setToShortName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49ed">MTime::Unit</a> &amp;unit, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Sets the string with the short text name of the time unit.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    setToLongName(unit, name);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> atomUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;str, <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49ed">MAngle::Unit</a> &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The angle unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the angle unit is set to MAngle::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a name="a25"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(name, kDegString) == 0) || </div>
<div class="line">        (strcmp(name, kDegLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edae77f5ca99dc21b7dfd533074906e0a67">MAngle::kDegrees</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kRadString) == 0) ||</div>
<div class="line">                (strcmp(name, kRadLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMinString) == 0) ||</div>
<div class="line">                (strcmp(name, kMinLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda8cb6112ac030d68e2fabddce0f095da7">MAngle::kAngMinutes</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kSecString) == 0) ||</div>
<div class="line">                (strcmp(name, kSecLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda555d442ed85c4175176cc6c1f1a9dad6">MAngle::kAngSeconds</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//  This is not a recognized angular unit.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        unit = <a name="a26"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49eda94dd08feda7b2cf0ff8262312c4fcc09">MAngle::kInvalid</a>;</div>
<div class="line">        <a name="_a27"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">        <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a name="a28"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidAngleUnits, stat);</div>
<div class="line">        msg.<a name="a29"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line">        <a name="a30"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> atomUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;str, <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49ed">MDistance::Unit</a> &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The distance unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the distance unit is set to MDistance::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(name, kInString) == 0) ||</div>
<div class="line">        (strcmp(name, kInLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda30a33c2e169c9e6115692eda1c173f30">MDistance::kInches</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kFtString) == 0) ||</div>
<div class="line">                (strcmp(name, kFtLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaedebe6dc6efd5df379da89064414ac43">MDistance::kFeet</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kYdString) == 0) ||</div>
<div class="line">                (strcmp(name, kYdLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edaf2f6037d43bc87078b310f919b832330">MDistance::kYards</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMiString) == 0) ||</div>
<div class="line">                (strcmp(name, kMiLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edab1c96b8257a6332e1506915a34d8a47f">MDistance::kMiles</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMmString) == 0) ||</div>
<div class="line">                (strcmp(name, kMmLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda86e73f520eca40e3e3d4a08a43ddbffb">MDistance::kMillimeters</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kCmString) == 0) ||</div>
<div class="line">                (strcmp(name, kCmLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda0603f671fbadde0729a2e79a80fb9a0e">MDistance::kCentimeters</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kKmString) == 0) ||</div>
<div class="line">                (strcmp(name, kKmLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49edadc4fd556c40d608a34d8c2246ad6e4a5">MDistance::kKilometers</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strcmp(name, kMString) == 0) ||</div>
<div class="line">                (strcmp(name, kMLString) == 0)) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda803a162c123bbe61a9d63d7f406e2b7c">MDistance::kMeters</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//  This is not a recognized distance unit.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">        <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidLinearUnits, stat);</div>
<div class="line">        msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        unit = MDistance::kInvalid;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/* static */</span></div>
<div class="line"><span class="keywordtype">bool</span> atomUnitNames::setFromName(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;str, <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49ed">MTime::Unit</a> &amp;unit)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The time unit is set based on the passed string. If the string</span></div>
<div class="line"><span class="comment">//      is not recognized, the time unit is set to MTime::kInvalid.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> state = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *name = str.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(name, kHourTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda192ff56706b76686ae965da88e53ed4d">MTime::kHours</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kMinTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda1468d73292d8131a0b832b826f7b33a9">MTime::kMinutes</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kSecTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda3091d1a096c28d4993507f167253ebc7">MTime::kSeconds</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kMillisecTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda02e69a6c6c9c097ead05674b06acae9c">MTime::kMilliseconds</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kGameTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edaa627bc0742d58cfc3af228c7fd9850fb">MTime::kGames</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kFileTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda28ce0398d2e7274904c6359ef92ed94a">MTime::kFilm</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kPalTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edad2d3f87255e35c2d0f27ac7a82df484f">MTime::kPALFrame</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kNtscTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edaf29bf945a4446d53d8b2e4a9354cdc28">MTime::kNTSCFrame</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kShowTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda71ab57a47bcb5be4395cac52e875e622">MTime::kShowScan</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kPalFTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda8645b6eb0e97c43419ab404a9a58bfa1">MTime::kPALField</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(name, kNtscFTString) == 0) {</div>
<div class="line">        unit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49edafe7d3de18f1f918448371211cc5f3d33">MTime::kNTSCField</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//  This is not a recognized time unit.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        unit = <a name="a31"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda94dd08feda7b2cf0ff8262312c4fcc09">MTime::kInvalid</a>;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">        <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidTimeUnits, stat);</div>
<div class="line">        msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, str);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        state = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> state;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class atomBase</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Tangent type words</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentGlobal = <span class="stringliteral">&quot;global&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFixed = <span class="stringliteral">&quot;fixed&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentLinear = <span class="stringliteral">&quot;linear&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFlat = <span class="stringliteral">&quot;flat&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentSmooth = <span class="stringliteral">&quot;spline&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentStep = <span class="stringliteral">&quot;step&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentSlow = <span class="stringliteral">&quot;slow&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentFast = <span class="stringliteral">&quot;fast&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentClamped = <span class="stringliteral">&quot;clamped&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentPlateau = <span class="stringliteral">&quot;plateau&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentStepNext = <span class="stringliteral">&quot;stepnext&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTangentAuto = <span class="stringliteral">&quot;auto&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Infinity type words</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordConstant = <span class="stringliteral">&quot;constant&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordLinear = <span class="stringliteral">&quot;linear&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordCycle = <span class="stringliteral">&quot;cycle&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordCycleRelative = <span class="stringliteral">&quot;cycleRelative&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordOscillate = <span class="stringliteral">&quot;oscillate&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  Param Curve types</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeUnknown = <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeLinear = <span class="stringliteral">&quot;linear&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeAngular = <span class="stringliteral">&quot;angular&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeTime = <span class="stringliteral">&quot;time&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWordTypeUnitless = <span class="stringliteral">&quot;unitless&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  Keywords</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDagNode = <span class="stringliteral">&quot;dagNode&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kDependNode = <span class="stringliteral">&quot;node&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kShapeNode = <span class="stringliteral">&quot;shape&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnimLayer = <span class="stringliteral">&quot;animLayer&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnim = <span class="stringliteral">&quot;anim&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAnimData = <span class="stringliteral">&quot;animData&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMovData = <span class="stringliteral">&quot;movData&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMayaVersion = <span class="stringliteral">&quot;mayaVersion&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAtomVersion = <span class="stringliteral">&quot;atomVersion&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kMayaSceneFile = <span class="stringliteral">&quot;mayaSceneFile&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kStatic = <span class="stringliteral">&quot;static&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kCached = <span class="stringliteral">&quot;cached&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTimeUnit = <span class="stringliteral">&quot;timeUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kLinearUnit = <span class="stringliteral">&quot;linearUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAngularUnit = <span class="stringliteral">&quot;angularUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kStartTime = <span class="stringliteral">&quot;startTime&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kEndTime = <span class="stringliteral">&quot;endTime&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kStartUnitless = <span class="stringliteral">&quot;startUnitless&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kEndUnitless = <span class="stringliteral">&quot;endUnitless&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// atomVersions:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//const char *kAtomVersionString = &quot;0.1&quot;;               //intitial implementation, mainly external edit files, most alpha and beta&#39;s for 2013</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kAtomVersionString = <span class="stringliteral">&quot;1.0&quot;</span>;             <span class="comment">//2013</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTwoSpace = <span class="stringliteral">&quot;  &quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kFourSpace = <span class="stringliteral">&quot;    &quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  animData keywords</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInputString = <span class="stringliteral">&quot;input&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kOutputString = <span class="stringliteral">&quot;output&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kWeightedString = <span class="stringliteral">&quot;weighted&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPreInfinityString = <span class="stringliteral">&quot;preInfinity&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kPostInfinityString = <span class="stringliteral">&quot;postInfinity&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kInputUnitString = <span class="stringliteral">&quot;inputUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kOutputUnitString = <span class="stringliteral">&quot;outputUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kTanAngleUnitString = <span class="stringliteral">&quot;tangentAngleUnit&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *kKeysString = <span class="stringliteral">&quot;keys&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">//  special characters</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kSemiColonChar   = <span class="charliteral">&#39;;&#39;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kSpaceChar       = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><span class="comment">//const char kTabChar           = &#39;\t&#39;;</span></div>
<div class="line"><span class="comment">//const char kHashChar      = &#39;#&#39;;</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kNewLineChar     = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="comment">//const char kSlashChar     = &#39;/&#39;;</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kBraceLeftChar   = <span class="charliteral">&#39;{&#39;</span>;</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> kBraceRightChar  = <span class="charliteral">&#39;}&#39;</span>;</div>
<div class="line"><span class="comment">//const char kDoubleQuoteChar   = &#39;&quot;&#39;;</span></div>
<div class="line"></div>
<div class="line">atomBase::atomBase ()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    resetUnits();</div>
<div class="line">}</div>
<div class="line">    </div>
<div class="line">atomBase::~atomBase()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      The destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomBase::resetUnits()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Reset the units used by this class to the ui units.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    timeUnit = <a name="a32"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line">    linearUnit = <a name="a33"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">    angularUnit = <a name="a34"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abc881d829b53f0f3871fcf9a8ab173b1">MAngle::uiUnit</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">atomBase::tangentTypeAsWord(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51">MFnAnimCurve::TangentType</a> type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string with a test based desription of the passed</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::TangentType. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a35"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentGlobal);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a36"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentFixed);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a37"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a98dcf18df98d9c7b24030f3a7c7ce031">MFnAnimCurve::kTangentLinear</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentLinear);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a38"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a38feb2e999f3c995fe0f20d4bc39c856">MFnAnimCurve::kTangentFlat</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentFlat);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a39"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a914bea85807fe02265b98502dfd2ccd1">MFnAnimCurve::kTangentSmooth</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentSmooth);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a40"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a0864d7d4282e85df2de1637298a0c9df">MFnAnimCurve::kTangentStep</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentStep);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a41"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a93e0d2f773741649f41708eaba24f39b">MFnAnimCurve::kTangentStepNext</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentStepNext);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a42"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aae0f0a943c3148a41921f154e251de4a">MFnAnimCurve::kTangentSlow</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentSlow);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a43"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aac05380220ff1612c7520971464c1cb4">MFnAnimCurve::kTangentFast</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentFast);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a44"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2e37de9db871b6325f3d464a3d10d8b7">MFnAnimCurve::kTangentClamped</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentClamped);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a45"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aa19b2b2b1ba22cadb593d7472d0dc44b">MFnAnimCurve::kTangentPlateau</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentPlateau);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a46"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a28c7d0a58ef27b533c554050062a59df">MFnAnimCurve::kTangentAuto</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTangentAuto);</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> (kWordTangentGlobal);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51">MFnAnimCurve::TangentType</a></div>
<div class="line">atomBase::wordAsTangentType (<span class="keywordtype">char</span> *type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::TangentType based on the passed string.</span></div>
<div class="line"><span class="comment">//      If the string is not a recognized tangent type, tnen</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kTangentGlobal is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentGlobal) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentFixed) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentLinear) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a98dcf18df98d9c7b24030f3a7c7ce031">MFnAnimCurve::kTangentLinear</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentFlat) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a38feb2e999f3c995fe0f20d4bc39c856">MFnAnimCurve::kTangentFlat</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentSmooth) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a914bea85807fe02265b98502dfd2ccd1">MFnAnimCurve::kTangentSmooth</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentStep) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a0864d7d4282e85df2de1637298a0c9df">MFnAnimCurve::kTangentStep</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentStepNext) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a93e0d2f773741649f41708eaba24f39b">MFnAnimCurve::kTangentStepNext</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentSlow) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aae0f0a943c3148a41921f154e251de4a">MFnAnimCurve::kTangentSlow</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentFast) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aac05380220ff1612c7520971464c1cb4">MFnAnimCurve::kTangentFast</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentClamped) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2e37de9db871b6325f3d464a3d10d8b7">MFnAnimCurve::kTangentClamped</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentPlateau) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51aa19b2b2b1ba22cadb593d7472d0dc44b">MFnAnimCurve::kTangentPlateau</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordTangentAuto) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a28c7d0a58ef27b533c554050062a59df">MFnAnimCurve::kTangentAuto</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">atomBase::infinityTypeAsWord(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4">MFnAnimCurve::InfinityType</a> type)</div>
<div class="line"><span class="comment">//  </span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string containing the name of the passed </span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::InfinityType type.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a47"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordConstant);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a48"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4ac188c019178783e5be55110601309d7d">MFnAnimCurve::kLinear</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordLinear);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a49"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a76754d966b75c53b513890fd9daceced">MFnAnimCurve::kCycle</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordCycle);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a50"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a72962132060841776e5723b9fbb318ae">MFnAnimCurve::kCycleRelative</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordCycleRelative);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a51"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a47da0483b10ba75371052e6f1d5cd278">MFnAnimCurve::kOscillate</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordOscillate);</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> (kWordConstant);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4">MFnAnimCurve::InfinityType</a></div>
<div class="line">atomBase::wordAsInfinityType(<span class="keyword">const</span> <span class="keywordtype">char</span> *type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::InfinityType from the passed string.</span></div>
<div class="line"><span class="comment">//      If the string does not match a recognized infinity type,</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kConstant is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(type, kWordConstant) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span>(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordLinear) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4ac188c019178783e5be55110601309d7d">MFnAnimCurve::kLinear</a>);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordCycle) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a76754d966b75c53b513890fd9daceced">MFnAnimCurve::kCycle</a>);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordCycleRelative) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a72962132060841776e5723b9fbb318ae">MFnAnimCurve::kCycleRelative</a>);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(type, kWordOscillate) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a47da0483b10ba75371052e6f1d5cd278">MFnAnimCurve::kOscillate</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">atomBase::outputTypeAsWord (<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string identifying the output type of the</span></div>
<div class="line"><span class="comment">//      passed MFnAnimCurve::AnimCurveType.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a52"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a53"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTypeLinear);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a54"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a55"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTypeAngular);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a56"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a57"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTypeTime);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a58"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a59"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a60"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27abce3a22a99b65c7359d6ea9d883ad830">MFnAnimCurve::kAnimCurveUnknown</a>:</div>
<div class="line">            <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> (kWordTypeUnknown);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">atomBase::AnimBaseType</div>
<div class="line">atomBase::wordAsInputType(<span class="keyword">const</span> <span class="keywordtype">char</span> *input)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns an input type based on the passed string.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(input, kWordTypeTime) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseTime;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseUnitless;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">atomBase::AnimBaseType</div>
<div class="line">atomBase::wordAsOutputType(<span class="keyword">const</span> <span class="keywordtype">char</span> *output) </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a output type based on the passed string.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(output, kWordTypeLinear) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseLinear;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(output, kWordTypeAngular) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseAngular;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(output, kWordTypeTime) == 0) {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseTime;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> atomBase::kAnimBaseUnitless;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *</div>
<div class="line">atomBase::boolInputTypeAsWord(<span class="keywordtype">bool</span> isUnitless) </div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a string based on a bool. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (isUnitless) {</div>
<div class="line">        <span class="keywordflow">return</span> (kWordTypeUnitless);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">return</span> (kWordTypeTime);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a></div>
<div class="line">atomBase::typeAsAnimCurveType(  atomBase::AnimBaseType input, </div>
<div class="line">                                atomBase::AnimBaseType output)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns a MFnAnimCurve::AnimCurveType based on the passed</span></div>
<div class="line"><span class="comment">//      input and output types. If the input and output types do</span></div>
<div class="line"><span class="comment">//      not create a valid MFnAnimCurve::AnimCurveType, then a</span></div>
<div class="line"><span class="comment">//      MFnAnimCurve::kAnimCurveUnknown is returned.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27abce3a22a99b65c7359d6ea9d883ad830">MFnAnimCurve::kAnimCurveUnknown</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (output) {</div>
<div class="line">        <span class="keywordflow">case</span> kAnimBaseLinear:</div>
<div class="line">            <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> kAnimBaseAngular:</div>
<div class="line">            <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> kAnimBaseTime:</div>
<div class="line">            <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> kAnimBaseUnitless:</div>
<div class="line">            <span class="keywordflow">if</span> (kAnimBaseUnitless == input) {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                type = <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="comment">//  An unknown anim curve type.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> type;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomBase::isEquivalent(<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Returns true if the doubles are within the tolerance.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> tolerance = 1.0e-10;</div>
<div class="line">    <span class="keywordflow">return</span> ((a &gt; b) ? (a - b &lt;= tolerance) : (b - a &lt;= tolerance));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomBase::getAttrName(<a name="_a61"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> &amp;plug, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;attributeName)</div>
<div class="line">{</div>
<div class="line">    attributeName = plug.<a name="a62"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#aa24281b57daa49bb949d5caa118a83af">partialName</a>(<span class="comment">/*includeNodeName*/</span><span class="keyword">false</span>,</div>
<div class="line">        <span class="comment">/*includeNonMandatoryIndices*/</span><span class="keyword">false</span>,</div>
<div class="line">        <span class="comment">/*includeInstancedIndices=false*/</span><span class="keyword">false</span>,</div>
<div class="line">        <span class="comment">/* useAlias=false*/</span> <span class="keyword">true</span>,</div>
<div class="line">        <span class="comment">/* useFullAttributePath=false*/</span><span class="keyword">false</span>,</div>
<div class="line">        <span class="comment">/* useLongNames*/</span><span class="keyword">true</span> );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomBase::getPlug(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;attributeName, <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> &amp;plug)</div>
<div class="line">{</div>
<div class="line">    <a name="_a63"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> mList;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> nodeAndAttr = nodeName + <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;.&quot;</span>) + attributeName;</div>
<div class="line">    mList.<a name="a64"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a23929aeafb29672f2652128eac9c4dec">add</a>(nodeAndAttr);</div>
<div class="line">    <span class="keywordflow">if</span>(mList.<a name="a65"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>() != 1)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mList.<a name="a66"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a4cdb668fdd6feafe9b296a80cfca26f0">getPlug</a>( 0, plug);</div>
<div class="line">    <span class="keywordflow">if</span>(status != <a name="a67"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>)</div>
<div class="line">    {   </div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    <span class="comment">//mz to do delete if no good.</span></div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class atomReader</span></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">atomReader::atomReader ()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">:   animVersion (1.0)</div>
<div class="line">,   convertAnglesFromV2To3(false)</div>
<div class="line">,   convertAnglesFromV3To2(false)</div>
<div class="line">,   mImportStartFrame(0.0f)</div>
<div class="line">,   mImportEndFrame(0.0f)</div>
<div class="line">,   mImportCustomFrameRange(false)</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line">    </div>
<div class="line">atomReader::~atomReader()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomReader::convertAnglesAndWeights3To2(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type, </div>
<div class="line">                                <span class="keywordtype">bool</span> isWeighted, <a name="_a68"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> &amp;angle, <span class="keywordtype">double</span> &amp;weight)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Converts the tangent angles from Maya 3.0 to Maya2.* formats.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> oldAngle = angle.<a name="a69"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>);</div>
<div class="line">    <span class="keywordtype">double</span> newAngle = oldAngle;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Calculate the scale values for the conversion.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">double</span> xScale = 1.0;</div>
<div class="line">    <span class="keywordtype">double</span> yScale = 1.0;</div>
<div class="line"></div>
<div class="line">    <a name="_a70"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> tOne(1.0, <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda3091d1a096c28d4993507f167253ebc7">MTime::kSeconds</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>) {</div>
<div class="line"></div>
<div class="line">        xScale = tOne.as(<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">            yScale = tOne.as(<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">            {</div>
<div class="line">                <a name="_a71"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> dOne(1.0, <a name="a72"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#a2a3077e91bb7ba19bade3cae7e4604a6">MDistance::internalUnit</a>());</div>
<div class="line">                yScale = dOne.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> aOne(1.0, <a name="a73"></a><a class="code" href="#!/url=./cpp_ref/class_m_angle.html#aa58fcacd3e0ed41bf20c81c3b9e5ac05">MAngle::internalUnit</a>());</div>
<div class="line">                yScale = aOne.as(angularUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>:</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">double</span> tanAngle = tan(oldAngle);</div>
<div class="line">    newAngle = atan((xScale*tanAngle)/yScale);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line">        <span class="keywordtype">double</span> sinAngle = sin(oldAngle);</div>
<div class="line">        <span class="keywordtype">double</span> cosAngle = cos(oldAngle);</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">double</span> denominator = (yScale*yScale*sinAngle*sinAngle) +</div>
<div class="line">                                (xScale*xScale*cosAngle*cosAngle);</div>
<div class="line">        weight = sqrtl(weight/denominator);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> finalAngle(newAngle, <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>);</div>
<div class="line">    angle = finalAngle;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomReader::convertAnglesAndWeights2To3(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type, </div>
<div class="line">                                <span class="keywordtype">bool</span> isWeighted, <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> &amp;angle, <span class="keywordtype">double</span> &amp;weight)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Converts the tangent angles from Maya 2.* to Maya3.0+ formats.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> oldAngle = angle.<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">double</span> newAngle = oldAngle;</div>
<div class="line">    <span class="keywordtype">double</span> newWeight = weight;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Calculate the scale values for the conversion.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">double</span> xScale = 1.0;</div>
<div class="line">    <span class="keywordtype">double</span> yScale = 1.0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> tOne(1.0, <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49eda3091d1a096c28d4993507f167253ebc7">MTime::kSeconds</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a> ||</div>
<div class="line">        type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>) {</div>
<div class="line"></div>
<div class="line">        xScale = tOne.as(<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">            yScale = tOne.as(<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>());</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> dOne(1.0, <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#a2a3077e91bb7ba19bade3cae7e4604a6">MDistance::internalUnit</a>());</div>
<div class="line">                yScale = dOne.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> aOne(1.0, <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#aa58fcacd3e0ed41bf20c81c3b9e5ac05">MAngle::internalUnit</a>());</div>
<div class="line">                yScale = aOne.as(angularUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>:</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> quarter = M_PI/2;</div>
<div class="line">    <span class="keywordflow">if</span> (isEquivalent(oldAngle, 0.0) ||</div>
<div class="line">        isEquivalent(oldAngle, quarter) ||</div>
<div class="line">        isEquivalent(oldAngle, -quarter)) {</div>
<div class="line">        </div>
<div class="line">        newAngle = oldAngle;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line">            newWeight = yScale*oldAngle;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordtype">double</span> tanAngle = tan(oldAngle);</div>
<div class="line">        newAngle = atan((yScale*tanAngle)/xScale);</div>
<div class="line">            </div>
<div class="line">        <span class="keywordflow">if</span> (isWeighted) {</div>
<div class="line">            <span class="keywordtype">double</span> cosAngle = cos(oldAngle);</div>
<div class="line">            <span class="keywordtype">double</span> cosSq = cosAngle*cosAngle;</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">double</span> wSq = (weight*weight) * </div>
<div class="line">                    (((xScale*xScale - yScale*yScale)*cosSq) + (yScale*yScale));</div>
<div class="line"></div>
<div class="line">            newWeight = sqrtl(wSq);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    weight = newWeight;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> finalAngle(newAngle, <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>);</div>
<div class="line">    angle = finalAngle;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomReader::readAnimCurve(</div>
<div class="line">ifstream &amp;clipFile, <a name="_a74"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;item)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Read a block of the ifstream that should contain anim curve</span></div>
<div class="line"><span class="comment">//      data in the format determined by the animData keyword.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a name="_a75"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> animCurve;</div>
<div class="line">    <a name="_a76"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> animCurveObj; </div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Anim curve defaults.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    atomBase::AnimBaseType input = wordAsInputType(kWordTypeTime);</div>
<div class="line">    atomBase::AnimBaseType output = wordAsOutputType(kWordTypeLinear);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4">MFnAnimCurve::InfinityType</a> preInf = wordAsInfinityType(kWordConstant);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4">MFnAnimCurve::InfinityType</a> postInf = wordAsInfinityType(kWordConstant);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> inputUnitName;</div>
<div class="line">    atomUnitNames::setToShortName(timeUnit, inputUnitName);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> outputUnitName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49ed">MAngle::Unit</a> tanAngleUnit = angularUnit;</div>
<div class="line">    <span class="keywordtype">bool</span> isWeighted (<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">char</span> *dataType;</div>
<div class="line">    <span class="keywordflow">while</span> (!clipFile.eof()) {</div>
<div class="line">        advance(clipFile);</div>
<div class="line"></div>
<div class="line">        dataType = asWord(clipFile);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(dataType, kInputString) == 0) {</div>
<div class="line">            input = wordAsInputType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kOutputString) == 0) {</div>
<div class="line">            output = wordAsOutputType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kWeightedString) == 0) {</div>
<div class="line">            isWeighted = (asDouble(clipFile) == 1.0);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kPreInfinityString) == 0) {</div>
<div class="line">            preInf = wordAsInfinityType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kPostInfinityString) == 0) {</div>
<div class="line">            postInf = wordAsInfinityType(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kInputUnitString) == 0) {</div>
<div class="line">            inputUnitName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kOutputUnitString) == 0) {</div>
<div class="line">            outputUnitName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(clipFile));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kTanAngleUnitString) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> tUnit(asWord(clipFile));</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(tUnit, tanAngleUnit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                tanAngleUnit = angularUnit;</div>
<div class="line">                atomUnitNames::setToShortName(tanAngleUnit, unitName);</div>
<div class="line"></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingTanAngleUnit, stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kKeysString) == 0) {</div>
<div class="line">            <span class="comment">//  Ignore the rest of this line.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">&quot;{&quot;</span>) == 0) {</div>
<div class="line">            <span class="comment">//  Skipping the &#39;{&#39; character. Just ignore it.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="comment">//  An unrecogized keyword was found.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> warnStr(dataType);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">            <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownKeyword,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, warnStr);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Read the animCurve</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type = typeAsAnimCurveType(input, output);</div>
<div class="line">    animCurveObj = animCurve.<a name="a77"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac6f5d067bd54ad9dc9f51badf0d632bf">create</a>(type, NULL, &amp;status);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotCreateAnim, status);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    animCurve.<a name="a78"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac61b1bb1724f20367a6cb9b6abbe6320">setIsWeighted</a>(isWeighted);</div>
<div class="line">    animCurve.<a name="a79"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a5a02fb53240bf78c80738bc4233d4efb">setPreInfinityType</a>(preInf);</div>
<div class="line">    animCurve.<a name="a80"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a76d9f8b9583719aba9caf509296757c2">setPostInfinityType</a>(postInf);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Set the appropriate units.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49ed">MTime::Unit</a> inputTimeUnit;</div>
<div class="line">    <span class="keywordflow">if</span> (input == kAnimBaseTime) {</div>
<div class="line">        <span class="keywordflow">if</span> (!atomUnitNames::setFromName(inputUnitName, inputTimeUnit)) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">            inputTimeUnit = timeUnit;</div>
<div class="line">            atomUnitNames::setToShortName(inputTimeUnit, unitName);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">            <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kInputUnitString, unitName);</div>
<div class="line">            <a name="a81"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_time.html#abceb2331ad056e3c5ad27894199a49ed">MTime::Unit</a> outputTimeUnit;</div>
<div class="line">    <span class="keywordflow">if</span> (output == kAnimBaseTime) {</div>
<div class="line">        <span class="keywordflow">if</span> (!atomUnitNames::setFromName(outputUnitName, outputTimeUnit)) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">            outputTimeUnit = timeUnit;</div>
<div class="line">            atomUnitNames::setToShortName(outputTimeUnit, unitName);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">            <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                        stat);</div>
<div class="line">            msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0;</div>
<div class="line">    <span class="keywordtype">double</span> conversion = 1.0;</div>
<div class="line">    <span class="keywordflow">if</span> (output == kAnimBaseLinear) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49ed">MDistance::Unit</a> unit;</div>
<div class="line">        <span class="keywordflow">if</span> (outputUnitName.<a name="a82"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 0) {</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(outputUnitName, unit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                unit = linearUnit;</div>
<div class="line">                atomUnitNames::setToShortName(unit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            unit = linearUnit;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (unit != <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda0603f671fbadde0729a2e79a80fb9a0e">MDistance::kCentimeters</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> one(1.0, unit);</div>
<div class="line">            conversion = one.as(<a class="code" href="#!/url=./cpp_ref/class_m_distance.html#abceb2331ad056e3c5ad27894199a49eda0603f671fbadde0729a2e79a80fb9a0e">MDistance::kCentimeters</a>);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (output == kAnimBaseAngular) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49ed">MAngle::Unit</a> unit;</div>
<div class="line">        <span class="keywordflow">if</span> (outputUnitName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() != 0) {</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(outputUnitName, unit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                unit = angularUnit;</div>
<div class="line">                atomUnitNames::setToShortName(unit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kOutputUnitString, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            unit = angularUnit;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (unit != <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> one(1.0, unit);</div>
<div class="line">            conversion = one.as(<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abceb2331ad056e3c5ad27894199a49edacbf42b42e59efcda5e100ade7d4df2f5">MAngle::kRadians</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Now read each keyframe</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">bool</span> lIsFirstFrame = <span class="keyword">true</span>; </div>
<div class="line">    <span class="keywordtype">double</span> lLowestFrame;</div>
<div class="line">    <span class="keywordtype">double</span> lHighestFrame;</div>
<div class="line">    advance(clipFile);</div>
<div class="line">    <span class="keywordtype">char</span> c = clipFile.peek();</div>
<div class="line">    <span class="keywordflow">while</span> (clipFile &amp;&amp; c != kBraceRightChar) {</div>
<div class="line">        <span class="keywordtype">double</span> t = asDouble (clipFile);</div>
<div class="line">        <span class="keywordtype">double</span> val = asDouble (clipFile);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(lIsFirstFrame)</div>
<div class="line">        {</div>
<div class="line">            lLowestFrame    = t;</div>
<div class="line">            lHighestFrame   = t;</div>
<div class="line">            lIsFirstFrame = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span>(t &lt; lLowestFrame)</div>
<div class="line">                lLowestFrame = t;</div>
<div class="line">            <span class="keywordflow">if</span>(t &gt; lHighestFrame)</div>
<div class="line">                lHighestFrame = t;</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51">MFnAnimCurve::TangentType</a> tanIn = wordAsTangentType(asWord(clipFile));</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51">MFnAnimCurve::TangentType</a> tanOut = wordAsTangentType(asWord(clipFile));</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span> (type) {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">                index = animCurve.<a name="a83"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(val, inputTimeUnit),</div>
<div class="line">                                            <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(val, outputTimeUnit),</div>
<div class="line">                                            tanIn, tanOut, NULL, &amp;status);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>:</div>
<div class="line">                index = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(t, inputTimeUnit),</div>
<div class="line">                                            val*conversion, tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>:</div>
<div class="line">                index = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   t, val*conversion, </div>
<div class="line">                                            tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">                index = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(   t, <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(val, outputTimeUnit),</div>
<div class="line">                                            tanIn, tanOut,</div>
<div class="line">                                            NULL, &amp;status);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownNode, status);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotKey, stringStat);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  Tangent locking needs to be called after the weights and </span></div>
<div class="line">        <span class="comment">//  angles are set for the fixed tangents.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordtype">bool</span> tLocked = bool(asDouble(clipFile) == 1.0);</div>
<div class="line">        <span class="keywordtype">bool</span> swLocked = bool(asDouble(clipFile) == 1.0);</div>
<div class="line">        <span class="keywordtype">bool</span> isBreakdown =bool(asDouble(clipFile) == 1.0);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  Only fixed tangents need additional information.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (tanIn == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> inAngle(asDouble(clipFile), tanAngleUnit);</div>
<div class="line">            <span class="keywordtype">double</span> inWeight = asDouble(clipFile);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  If this is from a pre-Maya3.0 file, the tangent angles will </span></div>
<div class="line">            <span class="comment">//  need to be converted.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">if</span> (convertAnglesFromV2To3) {</div>
<div class="line">                convertAnglesAndWeights2To3(type,isWeighted,inAngle,inWeight);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (convertAnglesFromV3To2) {</div>
<div class="line">                convertAnglesAndWeights3To2(type,isWeighted,inAngle,inWeight);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  By default, the tangents are locked. When the tangents</span></div>
<div class="line">            <span class="comment">//  are locked, setting the angle and weight of a fixed in</span></div>
<div class="line">            <span class="comment">//  tangent may change the tangent type of the out tangent.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            animCurve.<a name="a84"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, <span class="keyword">false</span>);</div>
<div class="line">            animCurve.<a name="a85"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ad1583e5891b5e459d8a2f4451007e274">setTangent</a>(index, inAngle, inWeight, <span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  Only fixed tangents need additional information.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (tanOut == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> outAngle(asDouble(clipFile), tanAngleUnit);</div>
<div class="line">            <span class="keywordtype">double</span> outWeight = asDouble(clipFile);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  If this is from a pre-Maya3.0 file, the tangent angles will </span></div>
<div class="line">            <span class="comment">//  need to be converted.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">if</span> (convertAnglesFromV2To3) {</div>
<div class="line">                convertAnglesAndWeights2To3(type,isWeighted,outAngle,outWeight);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (convertAnglesFromV3To2) {</div>
<div class="line">                convertAnglesAndWeights3To2(type,isWeighted,outAngle,outWeight);</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line">            <span class="comment">//  By default, the tangents are locked. When the tangents</span></div>
<div class="line">            <span class="comment">//  are locked, setting the angle and weight of a fixed out </span></div>
<div class="line">            <span class="comment">//  tangent may change the tangent type of the in tangent.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, <span class="keyword">false</span>);</div>
<div class="line">            animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ad1583e5891b5e459d8a2f4451007e274">setTangent</a>(index, outAngle, outWeight, <span class="keyword">false</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  To prevent tangent types from unexpectedly changing, tangent </span></div>
<div class="line">        <span class="comment">//  locking should be the last operation. See the above comments</span></div>
<div class="line">        <span class="comment">//  about fixed tangent types for more information.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        animCurve.<a name="a86"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ab0b50ef1323a8aa9086d2546a625feca">setWeightsLocked</a>(index, swLocked);</div>
<div class="line">        animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a2044ea503203161a35bc2a07afe663fb">setTangentsLocked</a>(index, tLocked);</div>
<div class="line">        animCurve.<a name="a87"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a2928619982a83d88dee1bb0b2e9fb316">setIsBreakdown</a> (index, isBreakdown);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  There should be no additional data on this line. Go to the</span></div>
<div class="line">        <span class="comment">//  next line of data.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  Skip any comments.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        advance(clipFile);</div>
<div class="line">        c = clipFile.peek();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Ignore the brace that marks the end of the keys block.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (c == kBraceRightChar) {</div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Ignore the brace that marks the end of the animData block.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    advance(clipFile);</div>
<div class="line">    <span class="keywordflow">if</span> (clipFile.peek() == kBraceRightChar) {</div>
<div class="line">        clipFile.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//  Something is wrong.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kMissingBrace, stringStat);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Do not set the clipboard with an empty clipboard item.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (!animCurveObj.<a name="a88"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) </div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>( mImportCustomFrameRange )</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">double</span> lFirstFrameToImport = mImportStartFrame &lt; lLowestFrame ? lLowestFrame : mImportStartFrame;</div>
<div class="line">            <span class="keywordtype">double</span> lLastFrameToImport  = mImportEndFrame   &gt; lHighestFrame ? lHighestFrame : mImportEndFrame;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 2; i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">double</span> lCurrentFrame = i == 0 ? lFirstFrameToImport : lLastFrameToImport;</div>
<div class="line"></div>
<div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lFrameIndex = 0;</div>
<div class="line">                <span class="keywordtype">bool</span> lIsFrameFound = animCurve.<a name="a89"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a4d5d6976f75d332220d7e9966f54da7d">find</a>( <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(lCurrentFrame, inputTimeUnit), lFrameIndex );</div>
<div class="line">                </div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// If the keyframe is not found, we need to create a new one</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="keywordflow">if</span>( !lIsFrameFound )</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">switch</span> ( animCurve.<a name="a90"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#acd1e166bac2d7cfd822656fcb11d7110">animCurveType</a>() ) </div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">                            {</div>
<div class="line">                                <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> lTime;</div>
<div class="line">                                animCurve.<a name="a91"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afa42afa4e7cd8d64bef3f17361334090">evaluate</a>( <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(lCurrentFrame, inputTimeUnit), lTime );</div>
<div class="line">                                lFrameIndex = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>( <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(lCurrentFrame, inputTimeUnit), lTime, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, NULL, &amp;status);</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>:</div>
<div class="line">                            {</div>
<div class="line">                                <span class="keywordtype">double</span> lValue = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afa42afa4e7cd8d64bef3f17361334090">evaluate</a>( <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(lCurrentFrame, inputTimeUnit) );</div>
<div class="line">                                lFrameIndex = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>( <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(lCurrentFrame, inputTimeUnit), lValue, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, NULL, &amp;status);</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a6ca1a4be447fa5aa7e76b4af3cfff9f5">MFnAnimCurve::kAnimCurveUU</a>:</div>
<div class="line">                            {</div>
<div class="line">                                <span class="keywordtype">double</span> lValue = 0;</div>
<div class="line">                                animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afa42afa4e7cd8d64bef3f17361334090">evaluate</a>( lCurrentFrame, lValue );</div>
<div class="line">                                lFrameIndex = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>( lCurrentFrame, lValue,  <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, NULL, &amp;status);</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">                            {</div>
<div class="line">                                <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> lTime;</div>
<div class="line">                                animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afa42afa4e7cd8d64bef3f17361334090">evaluate</a>( lCurrentFrame, lTime );</div>
<div class="line">                                lFrameIndex = animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>( lCurrentFrame, lTime, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a69422abb7643db5fafec8a31dd93701f">MFnAnimCurve::kTangentGlobal</a>, NULL, &amp;status);</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">default</span>:</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownNode, status);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(i == 0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Remove all frame before the first keyframe</span></div>
<div class="line">                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; lFrameIndex; i++)</div>
<div class="line">                    {</div>
<div class="line">                        animCurve.<a name="a92"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac5241319c298aa9da7302806dc5231dd">remove</a>(0);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> </div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Remove all frame after the last keyframe</span></div>
<div class="line">                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lNumKeysToRemove = animCurve.<a name="a93"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a5c05175c33425e77658aa0a257bf3996">numKeys</a>()-1 - lFrameIndex;</div>
<div class="line">                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; lNumKeysToRemove; i++)</div>
<div class="line">                    {</div>
<div class="line">                        animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac5241319c298aa9da7302806dc5231dd">remove</a>(lFrameIndex + 1);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        item.<a name="a94"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a7dceeb98eeaff79e7d1606e6ed8b1efd">setAnimCurve</a>(animCurveObj);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Delete the copy of the anim curve.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a name="a95"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a3d83d29ca400045849d777aecafda70c">MGlobal::deleteNode</a>(animCurveObj);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> *</div>
<div class="line">atomReader::skipToNextParenth(<span class="keywordtype">char</span> *dataType, ifstream &amp;readAnim,<span class="keywordtype">int</span> parenthCount)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> firstParenthHit = (parenthCount &gt; 0);</div>
<div class="line">    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; (firstParenthHit==<span class="keyword">false</span> || parenthCount != 0))</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) == 0)</div>
<div class="line">            --parenthCount;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(dataType, <span class="stringliteral">&quot;{&quot;</span>) == 0)</div>
<div class="line">        {</div>
<div class="line">            firstParenthHit = <span class="keyword">true</span>;</div>
<div class="line">            ++parenthCount; <span class="comment">//get a { then add 1 to the count </span></div>
<div class="line">        }</div>
<div class="line">        dataType = asWord(readAnim); </div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">atomReader::addDynamicAttributeIfNeeded(<a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; nodeName,</div>
<div class="line">                                        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; attributeName)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (attributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() &gt; 0) {</div>
<div class="line">        <span class="comment">// check if the attribute exists on the node, and if</span></div>
<div class="line">        <span class="comment">// it doesn&#39;t then add it</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> list;</div>
<div class="line">        list.<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a23929aeafb29672f2652128eac9c4dec">add</a>(nodeName);</div>
<div class="line">        <span class="keywordflow">if</span> (list.<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>() == 1) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> node;</div>
<div class="line">            list.<a name="a96"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a72d8cd9c78fd234dcf68cd2fb70bc432">getDependNode</a>(0,node);</div>
<div class="line">            <a name="_a97"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_dependency_node.html">MFnDependencyNode</a> fnNode(node);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attributeFound;</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (!fnNode.hasAttribute(attributeName) &amp;&amp; !fnNode.findAlias(attributeName,attributeFound)) {</div>
<div class="line">                <a name="_a98"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> nAttr;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> dynAdd = nAttr.<a name="a99"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html#a5c08a5ce5e7123cc444c95a0e4a50f29">create</a>(attributeName,attributeName,<a name="a100"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>);</div>
<div class="line">                nAttr.<a name="a101"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html#a9e68a8b4af016b37f6567cfa6d68e551">setKeyable</a>(<span class="keyword">true</span>);</div>
<div class="line">                </div>
<div class="line">                <a name="_a102"></a><a class="code" href="#!/url=./cpp_ref/class_m_d_g_modifier.html">MDGModifier</a> mod;</div>
<div class="line">                mod.<a name="a103"></a><a class="code" href="#!/url=./cpp_ref/class_m_d_g_modifier.html#ad714eb6c2e6f51659e3e50f176c75a91">addAttribute</a>(node,dynAdd);</div>
<div class="line">                mod.<a name="a104"></a><a class="code" href="#!/url=./cpp_ref/class_m_d_g_modifier.html#a984345cd272bc1a32a9fc2e93a6678b2">doIt</a>();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> </div>
<div class="line">atomReader::readNodes(<span class="keywordtype">char</span> *dataType, ifstream &amp;readAnim,   </div>
<div class="line">                        atomLayerClipboard &amp;cb,</div>
<div class="line">                        <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> &amp;mList, atomNodeNameReplacer &amp; replacer,</div>
<div class="line">                        atomTemplateReader &amp;templateReader,</div>
<div class="line">                        <span class="keywordtype">bool</span> replaceLayers,  <span class="comment">// if true we remove the attribute from all existing anim layers, if false, we don&#39;t</span></div>
<div class="line">                        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;exportEditsFile, <span class="comment">//if we find an export edit file, return it here</span></div>
<div class="line">                        <span class="keywordtype">bool</span> &amp;removeExportEditsFile) <span class="comment">//if the file we found was created us, return this to be true to remove it.</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> nodeName;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth =0, childCount =0;</div>
<div class="line">    <span class="keywordtype">bool</span> nodeIsValid = <span class="keyword">false</span>;</div>
<div class="line">    atomAnimLayers animLayers;</div>
<div class="line">    <span class="keywordflow">while</span> (!readAnim.eof())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (NULL == dataType) {</div>
<div class="line">            dataType = asWord(readAnim);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordtype">bool</span> isDag = (strcmp(dataType, kDagNode) == 0);</div>
<div class="line">        <span class="keywordtype">bool</span> isDepend = (strcmp(dataType, kDependNode) == 0);</div>
<div class="line">        <span class="keywordtype">bool</span> isShape = (strcmp(dataType, kShapeNode) == 0);</div>
<div class="line">        <span class="keywordtype">bool</span> isAnimLayer = (strcmp(dataType, kAnimLayer) ==0);</div>
<div class="line">        <span class="keywordflow">if</span> (isDag ||isDepend||isShape||isAnimLayer) </div>
<div class="line">        {</div>
<div class="line">            atomNodeNameReplacer::NodeType  type = atomNodeNameReplacer::eDepend;</div>
<div class="line">            <span class="keywordflow">if</span>(isDag)</div>
<div class="line">                type = atomNodeNameReplacer::eDag;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isShape)</div>
<div class="line">                type = atomNodeNameReplacer::eShape;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isAnimLayer)</div>
<div class="line">                type = atomNodeNameReplacer::eAnimLayer;</div>
<div class="line">            <span class="comment">//depend is the default above</span></div>
<div class="line">            dataType = asWord(readAnim);</div>
<div class="line">            <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">&quot;{&quot;</span>) == 0)</div>
<div class="line">            {</div>
<div class="line">                dataType = asWord(readAnim);</div>
<div class="line">                nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(dataType);</div>
<div class="line">                depth = (unsigned)asDouble(readAnim);</div>
<div class="line">                childCount = (unsigned)asDouble(readAnim);</div>
<div class="line">                <span class="comment">//now see if the node is valid if not, then just read to the last parenth,</span></div>
<div class="line">                <span class="comment">//otherwise the returned node name is the name we use</span></div>
<div class="line">                <span class="comment">//first check the template, if not in the template then not valid</span></div>
<div class="line">                nodeIsValid = replacer.findNode(type,nodeName,depth,childCount);</div>
<div class="line">                <span class="keywordflow">if</span>(nodeIsValid)</div>
<div class="line">                    nodeIsValid =   templateReader.findNode(nodeName);</div>
<div class="line">                </div>
<div class="line">                <span class="keywordflow">if</span>(nodeIsValid == <span class="keyword">false</span>)</div>
<div class="line">                {</div>
<div class="line">                    dataType = skipToNextParenth(dataType,readAnim);</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (animLayers.readAnimLayers(readAnim,dataType,*<span class="keyword">this</span>))</div>
<div class="line">        {</div>
<div class="line">            dataType = NULL;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kAnim) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> fullAttributeName, leafAttributeName;</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  If this is from an unconnected anim curve, then there</span></div>
<div class="line">            <span class="comment">//  will not be an attribute name.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> layerName;</div>
<div class="line">            <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">                fullAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line"></div>
<div class="line">                <span class="comment">//  If the node names were specified, then the next two</span></div>
<div class="line">                <span class="comment">//  words should be the leaf attribute and the node name.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">                    leafAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">                }</div>
<div class="line">                </div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">//attr and node not in template skip</span></div>
<div class="line">            <span class="keywordflow">if</span>(templateReader.findNodeAndAttr(nodeName,leafAttributeName)==<span class="keyword">false</span>)</div>
<div class="line">            {</div>
<div class="line">                dataType = skipToNextParenth(dataType,readAnim,0); <span class="comment">//0 parenth means exit on first set</span></div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">            }</div>
<div class="line">            <span class="keywordtype">unsigned</span>  attrCount;</div>
<div class="line">            attrCount = (unsigned)asDouble(readAnim);</div>
<div class="line"></div>
<div class="line">            addDynamicAttributeIfNeeded(nodeName,leafAttributeName);</div>
<div class="line">            </div>
<div class="line">            <span class="comment">//peek to see if the next character is a ; if not it&#39;s a name</span></div>
<div class="line">            <span class="comment">//which means this attribute is the specified animation layer</span></div>
<div class="line">            <span class="keywordtype">char</span> next = readAnim.peek();</div>
<div class="line">            <span class="keywordflow">if</span> (next != kSemiColonChar) </div>
<div class="line">            {</div>
<div class="line">                layerName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">                <span class="comment">//since this attribute has an anim layer we need to remove all of the previous layers the attribute is on if we</span></div>
<div class="line">                <span class="comment">//are &#39;replacing&#39; and not &#39;inserting&#39;. this function automatically makes sure we only remove it once.</span></div>
<div class="line">                animLayers.removeLayersIfNeeded(replaceLayers, nodeName, leafAttributeName);</div>
<div class="line">                <span class="keywordflow">if</span>(atomAnimLayers::isAttrInAnimLayer(nodeName,leafAttributeName,layerName) == <span class="keyword">false</span>)</div>
<div class="line">                    atomAnimLayers::addAttrToAnimLayer(nodeName,leafAttributeName,layerName);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <a name="_a105"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a> &amp;clipboardArray = cb.getCBItemArray(layerName);</div>
<div class="line">            <span class="comment">//  If the next keyword is not an animData, then this is </span></div>
<div class="line">            <span class="comment">//  a place holder for the API clipboard.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            dataType = asWord(readAnim);</div>
<div class="line">            <span class="keywordflow">if</span> (strcmp(dataType, kAnimData) == 0) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> clipboardItem;</div>
<div class="line">                <span class="keywordflow">if</span> (readAnimCurve(readAnim, clipboardItem)) {</div>
<div class="line">                    clipboardItem.<a name="a106"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(depth, </div>
<div class="line">                                                    childCount, attrCount);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">//change node name with the one the replacer gave us</span></div>
<div class="line">                    clipboardItem.<a name="a107"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(  nodeName, </div>
<div class="line">                                                fullAttributeName, </div>
<div class="line">                                                leafAttributeName);</div>
<div class="line">                    clipboardArray.<a name="a108"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(clipboardItem);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="comment">//  Could not read the anim curve.</span></div>
<div class="line">                    <span class="comment">//</span></div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadAnim,</div>
<div class="line">                                                             stringStat);</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">//  This must be a place holder object for the clipboard.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> clipboardItem;</div>
<div class="line">                clipboardItem.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(depth, </div>
<div class="line">                                                childCount, attrCount);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//  Since there is no anim curve specified, what is </span></div>
<div class="line">                <span class="comment">//  in the fullAttributeName string is really the node </span></div>
<div class="line">                <span class="comment">//  name.</span></div>
<div class="line">                <span class="comment">// TODO, figure out these placeholders.</span></div>
<div class="line">                clipboardItem.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(  nodeName, </div>
<div class="line">                                            nodeName, </div>
<div class="line">                                            leafAttributeName);</div>
<div class="line">                clipboardArray.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(clipboardItem);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//  dataType already contains the next keyword. </span></div>
<div class="line">                <span class="comment">//  </span></div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kCached) == 0)</div>
<div class="line">        {</div>
<div class="line">            dataType = readCachedValues(nodeName,dataType,depth,childCount,readAnim,</div>
<div class="line">                cb,templateReader);</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kStatic) == 0)</div>
<div class="line">        {</div>
<div class="line">            dataType = readStaticValue(nodeName,dataType,depth, childCount,readAnim,</div>
<div class="line">                cb,templateReader);</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>)==0)</div>
<div class="line">        {</div>
<div class="line">            nodeIsValid = <span class="keyword">false</span>;</div>
<div class="line">            dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kExportEditsDataString) == 0) {</div>
<div class="line">            <span class="comment">//if this is true then we put that data into the file named exportEditsFile</span></div>
<div class="line">            dataType = readExportEditsFile(dataType, readAnim,exportEditsFile,removeExportEditsFile);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (!readAnim.eof() &amp;&amp; readAnim.fail() == <span class="keyword">false</span>) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> warnStr(dataType);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kUnknownKeyword,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, warnStr);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//  Skip to the next line, this one is invalid.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                readAnim.ignore(INT_MAX, kNewLineChar);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">//  The end of the file was reached. </span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        dataType = NULL;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//delete empty anims that we replaced.</span></div>
<div class="line">    animLayers.deleteEmptyLayers(replaceLayers);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> * atomReader::readCachedValues(<a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,<span class="keywordtype">char</span> *dataType, </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childCount,ifstream &amp;readAnim,</div>
<div class="line">    atomLayerClipboard &amp;cb,atomTemplateReader &amp;templateReader)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> fullAttributeName, leafAttributeName;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> item;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> layerName;</div>
<div class="line">    <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">        fullAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">            leafAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//check with template</span></div>
<div class="line">    <span class="keywordflow">if</span>(templateReader.findNodeAndAttr(nodeName,leafAttributeName)==<span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        dataType = skipToNextParenth(dataType,readAnim,0);</div>
<div class="line">        <span class="keywordflow">return</span> dataType;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    addDynamicAttributeIfNeeded(nodeName,leafAttributeName);</div>
<div class="line">    </div>
<div class="line">    item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(   nodeName, </div>
<div class="line">                        fullAttributeName, </div>
<div class="line">                        leafAttributeName);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">unsigned</span> attrCount;</div>
<div class="line">    attrCount = (unsigned)asDouble(readAnim);</div>
<div class="line">    item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(depth, </div>
<div class="line">                                                childCount, attrCount);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//peek to see if the next character is a ; if not it&#39;s a name</span></div>
<div class="line">    <span class="comment">//which means this attribute is the specified animation layer</span></div>
<div class="line">    <span class="keywordtype">char</span> next = readAnim.peek();</div>
<div class="line">    <span class="keywordflow">if</span> (next != kSemiColonChar) </div>
<div class="line">    {</div>
<div class="line">        layerName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">        <span class="keywordflow">if</span>(atomAnimLayers::isAttrInAnimLayer(nodeName,leafAttributeName,layerName) == <span class="keyword">false</span>)</div>
<div class="line">            atomAnimLayers::addAttrToAnimLayer(nodeName,leafAttributeName,layerName);</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a> &amp;clipboardArray = cb.getCBItemArray(layerName);</div>
<div class="line">    </div>
<div class="line">    dataType = asWord(readAnim);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> origName(nodeName);</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">&quot;{&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug;</div>
<div class="line">        <span class="keywordflow">if</span>(getPlug(nodeName,leafAttributeName,plug))</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> curve;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type = curve.<a name="a109"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aa7f5ea6517bd0af31463b21a48ce93c9">timedAnimCurveTypeForPlug</a> (plug);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> animCurveObj = curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac6f5d067bd54ad9dc9f51badf0d632bf">create</a>(type, NULL);</div>
<div class="line">            <span class="comment">//just use defaults for weighted, set pre/post as constant</span></div>
<div class="line">            curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a5a02fb53240bf78c80738bc4233d4efb">setPreInfinityType</a>(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line">            curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a76d9f8b9583719aba9caf509296757c2">setPostInfinityType</a>(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line"></div>
<div class="line">            dataType = putCachedOnAnimCurve(nodeName,leafAttributeName,dataType,readAnim,plug,curve);</div>
<div class="line">            <span class="keywordflow">if</span> (!animCurveObj.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) {</div>
<div class="line">                item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a7dceeb98eeaff79e7d1606e6ed8b1efd">setAnimCurve</a>(animCurveObj);</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">//  Delete the copy of the anim curve.</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a3d83d29ca400045849d777aecafda70c">MGlobal::deleteNode</a>(animCurveObj);</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  Set the item on the clipboard</span></div>
<div class="line">            clipboardArray.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(item);</div>
<div class="line">            <span class="keywordflow">return</span> dataType;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">    {</div>
<div class="line">        dataType = asWord(readAnim); </div>
<div class="line">    }</div>
<div class="line">    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">    <span class="comment">//if we get here we had an error</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadCached,</div>
<div class="line">                                                stringStat);</div>
<div class="line">    origName += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line">    origName += fullAttributeName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg;</div>
<div class="line">    msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt,origName);</div>
<div class="line">            </div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> </div>
<div class="line">atomReader::readAtom(ifstream &amp;readAnim, atomLayerClipboard &amp;cb,<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> &amp;mList, atomNodeNameReplacer &amp; replacer, </div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; exportEditsFile,<span class="keywordtype">bool</span> &amp;removeExportEditsFile,atomTemplateReader &amp;templateReader, <span class="keywordtype">bool</span> replaceLayers)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Read  the new updated animation transfer object model file.</span></div>
<div class="line"><span class="comment">//      Now contains &#39;static&#39; values.           </span></div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> hasVersionString = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">double</span> startTime = 1.0;</div>
<div class="line">    <span class="keywordtype">double</span> endTime = 0.0;</div>
<div class="line">    <span class="keywordtype">double</span> startUnitless = 1.0;</div>
<div class="line">    <span class="keywordtype">double</span> endUnitless = 0.0;</div>
<div class="line">    <span class="keywordtype">char</span> *dataType = readHeader(readAnim, hasVersionString, startTime,endTime,startUnitless, endUnitless);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">bool</span> exportEditsPresent = <span class="keyword">false</span>;</div>
<div class="line">    dataType = readExportEditsFilePresent(dataType, readAnim,exportEditsPresent,exportEditsFile);</div>
<div class="line">    <span class="keywordflow">if</span>(exportEditsPresent) <span class="comment">//if we have an edit file, make sure hierarchy is off.</span></div>
<div class="line">        replacer.turnOffHierarchy();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//  The atomVersion string is required.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (!hasVersionString) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">        <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kMissingKeyword, stat);</div>
<div class="line">        msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kAtomVersion);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        <span class="keywordflow">return</span> (<a name="a110"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    mStartTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(startTime,timeUnit);</div>
<div class="line">    mEndTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(endTime,timeUnit);</div>
<div class="line">    mStartUnitless = startUnitless;</div>
<div class="line">    mEndUnitless = endUnitless;</div>
<div class="line">    <span class="comment">//  Set the linear and angular units to be the same as the file</span></div>
<div class="line">    <span class="comment">//  being read. This will allow fixed tangent data to be read</span></div>
<div class="line">    <span class="comment">//  in properly if the scene has different units than the .atom file.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    mOldDistanceUnit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">    mOldTimeUnit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line"></div>
<div class="line">    <a name="a111"></a><a class="code" href="#!/url=./cpp_ref/class_m_distance.html#a0619e077e1d24cfc947c6844ec8dcfe3">MDistance::setUIUnit</a>(linearUnit);</div>
<div class="line">    <a name="a112"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#ad9406cfa93f3a9c96b962db36d126909">MTime::setUIUnit</a>(timeUnit);</div>
<div class="line"></div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != readNodes(dataType,readAnim,cb,mList,replacer,templateReader,replaceLayers,exportEditsFile,removeExportEditsFile)) {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadAnim,</div>
<div class="line">                                                 stringStat);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span>*</div>
<div class="line">atomReader::readExportEditsFile(<span class="keywordtype">char</span>* dataType,</div>
<div class="line">                                ifstream&amp; readAnim,</div>
<div class="line">                                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; filename,</div>
<div class="line">                                <span class="keywordtype">bool</span> &amp;removeExportEditsFile)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!readAnim.eof() &amp;&amp; dataType != NULL &amp;&amp; strcmp(dataType, kExportEditsDataString) == 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">//put a temporary editMA file in the temp directory</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> melCommand = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;internalVar -utd&quot;</span>) + <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> tempFile = <a name="a113"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a8dd71fbf4d71dacf626180777ba91a62">MGlobal::executeCommandStringResult</a> (melCommand, <span class="keyword">false</span>, <span class="keyword">false</span>, &amp;status);</div>
<div class="line">        <span class="comment">//make these values false in case we fail for some reason</span></div>
<div class="line">        filename = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        removeExportEditsFile = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> &amp;&amp; tempFile.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">        {</div>
<div class="line">            tempFile = tempFile + <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;atomExportTmpFile.editMA&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if defined (OSMac_)</span></div>
<div class="line">            <span class="keywordtype">char</span> fname[MAXPATHLEN];</div>
<div class="line">            strcpy (fname, tempFile.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">            ofstream editFile(fname);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">            ofstream editFile(tempFile.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">            <span class="comment">// if we created that file then put the data from readAnim into the editFile</span></div>
<div class="line">            <span class="keywordflow">if</span>(editFile.good()== <span class="keyword">true</span>)</div>
<div class="line">            {</div>
<div class="line">                advance(readAnim);</div>
<div class="line">                std::string s;</div>
<div class="line">                <span class="keywordflow">while</span>(getline(readAnim, s)) <span class="comment">//faster ways to do this but it works since we keep the endlines(\n) needed by the editMA file.</span></div>
<div class="line">                {</div>
<div class="line">                    editFile &lt;&lt; s &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">                }</div>
<div class="line">                editFile.flush(); <span class="comment">//make sure it&#39;s written to disk</span></div>
<div class="line">                editFile.close();</div>
<div class="line">                dataType = NULL;</div>
<div class="line">                filename = tempFile;</div>
<div class="line">                removeExportEditsFile = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span>*</div>
<div class="line">atomReader::readExportEditsFilePresent(<span class="keywordtype">char</span>* dataType,</div>
<div class="line">                                ifstream&amp; readAnim,</div>
<div class="line">                                <span class="keywordtype">bool</span> &amp;present,</div>
<div class="line">                                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;filename)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(dataType, kExportEditsString) == 0)</div>
<div class="line">    {</div>
<div class="line">        present = <span class="keyword">true</span>;</div>
<div class="line">        filename = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        <span class="keywordtype">char</span> c = readAnim.peek();</div>
<div class="line">        <span class="keywordflow">if</span> (c != kSemiColonChar) <span class="comment">//to support vs 0.1 files where the export edits are passed in as files,if the next character isn&#39;t a ;</span></div>
<div class="line">                                 <span class="comment">//it&#39;s a file name so we use and set that. </span></div>
<div class="line">        {</div>
<div class="line">            filename.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">        }</div>
<div class="line">        advance(readAnim);</div>
<div class="line">        dataType = asWord(readAnim);</div>
<div class="line">    } </div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> * atomReader::readStaticValue(<a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,<span class="keywordtype">char</span> *dataType, </div>
<div class="line">            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childCount,ifstream &amp;readAnim,</div>
<div class="line">            atomLayerClipboard &amp;cb,atomTemplateReader &amp;templateReader)</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> fullAttributeName, leafAttributeName;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> item;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> layerName;</div>
<div class="line">    <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">        fullAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (!isNextNumeric(readAnim)) {</div>
<div class="line">            leafAttributeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">        <span class="comment">//check with template</span></div>
<div class="line">    <span class="keywordflow">if</span>(templateReader.findNodeAndAttr(nodeName,leafAttributeName)==<span class="keyword">false</span>)</div>
<div class="line">    {</div>
<div class="line">        dataType = skipToNextParenth(dataType,readAnim,0);</div>
<div class="line">        <span class="keywordflow">return</span> dataType;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    addDynamicAttributeIfNeeded(nodeName,leafAttributeName);</div>
<div class="line">            </div>
<div class="line">    item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6919636bc3a3405a920ee33c5aedf609">setNameInfo</a>(   nodeName, </div>
<div class="line">                        fullAttributeName, </div>
<div class="line">                        leafAttributeName);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> attrCount;</div>
<div class="line">    attrCount = (unsigned)asDouble(readAnim);</div>
<div class="line">    item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a4c44c3ba32dc4a44eaf1e6b0c3dd8809">setAddressingInfo</a>(depth, </div>
<div class="line">                                                childCount, attrCount);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//peek to see if the next character is a ; if not it&#39;s a name</span></div>
<div class="line">    <span class="comment">//which means this attribute is the specified animation layer</span></div>
<div class="line">    <span class="keywordtype">char</span> next = readAnim.peek();</div>
<div class="line">    <span class="keywordflow">if</span> (next != kSemiColonChar) </div>
<div class="line">    {</div>
<div class="line">        layerName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#acee761fe098fc30a5ac1437e3aca5bc0">set</a>(asWord(readAnim));</div>
<div class="line">        <span class="keywordflow">if</span>(atomAnimLayers::isAttrInAnimLayer(nodeName,leafAttributeName,layerName) == <span class="keyword">false</span>)</div>
<div class="line">            atomAnimLayers::addAttrToAnimLayer(nodeName,leafAttributeName,layerName);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a> &amp;clipboardArray = cb.getCBItemArray(layerName);</div>
<div class="line"></div>
<div class="line">    dataType = asWord(readAnim);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> origName(nodeName);</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(dataType, <span class="stringliteral">&quot;{&quot;</span>) == 0)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug;</div>
<div class="line">        <span class="keywordflow">if</span>(getPlug(nodeName,leafAttributeName,plug))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//if there is a curve we put the static value as a key using the cipboard</span></div>
<div class="line">            <span class="comment">//which handles the correct insert/replace flags</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> curve(plug,&amp;status);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type = curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#acd1e166bac2d7cfd822656fcb11d7110">animCurveType</a>();</div>
<div class="line">            <span class="keywordflow">if</span>((status== <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>) &amp;&amp; (</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>)))</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> newCurve;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> animCurveObj = newCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ac6f5d067bd54ad9dc9f51badf0d632bf">create</a>(type, NULL);</div>
<div class="line">                <span class="comment">//just use defaults for weighted, set pre/post as constant</span></div>
<div class="line">                curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a5a02fb53240bf78c80738bc4233d4efb">setPreInfinityType</a>(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line">                curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a76d9f8b9583719aba9caf509296757c2">setPostInfinityType</a>(<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aca9c5942b5d67122821becf05ef739a4a36166171fc24611fa107afffd2befa79">MFnAnimCurve::kConstant</a>);</div>
<div class="line">                dataType = putCachedOnAnimCurve(nodeName,leafAttributeName, dataType,readAnim,plug,newCurve);</div>
<div class="line">                <span class="keywordflow">if</span> (!animCurveObj.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) {</div>
<div class="line">                    item.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a7dceeb98eeaff79e7d1606e6ed8b1efd">setAnimCurve</a>(animCurveObj);</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">//  Delete the copy of the anim curve.</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a3d83d29ca400045849d777aecafda70c">MGlobal::deleteNode</a>(animCurveObj);</div>
<div class="line"></div>
<div class="line">                <span class="comment">//  Set the item on the clipboard</span></div>
<div class="line">                clipboardArray.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html#a23bf02447a622dc24bd636dc5708391f">append</a>(item);</div>
<div class="line">                <span class="keywordflow">return</span> dataType;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span><span class="comment">//no curve was present so we just set the value on theh plug directly</span></div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">char</span> c = readAnim.peek();</div>
<div class="line">                <span class="keywordflow">if</span>(readAnim &amp;&amp; c != kBraceRightChar)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attribute = plug.<a name="a114"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a18baf7e7504bc90d54dea49a7d2d924b">attribute</a>();</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>( attribute.<a name="a115"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a name="a116"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a> ) )</div>
<div class="line">                    {</div>
<div class="line">                        <a name="_a117"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html">MFnUnitAttribute</a> fnAttrib(attribute);</div>
<div class="line">                        <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a118"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a7a9a81c214c05358fc6382f8e1f54196">MFnUnitAttribute::kAngle</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> unit(1.0);</div>
<div class="line">                            val /= unit.as(angularUnit);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle(val);</div>
<div class="line">                            plug.<a name="a119"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#ad47bbe33a9408817ca9af08cea121ce3">setMAngle</a>(angle);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a120"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a1925172d8d6f77cdb98f7f486f706024">MFnUnitAttribute::kDistance</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> unit(1.0);</div>
<div class="line">                            val /= unit.as(linearUnit);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> dist(val);</div>
<div class="line">                            plug.<a name="a121"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a037e4430deea2bf1943ac5277127858b">setMDistance</a>(dist);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a122"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a65c3a8bb75ba1a57e36c86855169752e">MFnUnitAttribute::kTime</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> t(val);</div>
<div class="line">                            plug.<a name="a123"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#af060e578d1b72a2d9ad14ae05ec9bf4c">setMTime</a>(t);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">default</span>:</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a name="a124"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a> ) )</div>
<div class="line">                    {</div>
<div class="line">                        <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> fnAttrib(attribute);</div>
<div class="line">            </div>
<div class="line">                        <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">                        {</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a125"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a8cfc0ab572a96edfc9db7c02f0d025d7">MFnNumericData::kBoolean</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">int</span> val = asInt(readAnim);</div>
<div class="line">                            <span class="keywordtype">bool</span> value = (val ==0) ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line">                            plug.<a name="a126"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a7ca6fc59c06e16950cdc9db4c7f5f1bf">setBool</a>(value);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a127"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a46b9941f17f513de8e30e46ac53e684b">MFnNumericData::kByte</a>:</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a128"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a589716b974587a5b575bf02d0b74245a">MFnNumericData::kChar</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">char</span> val = asChar(readAnim);</div>
<div class="line">                            plug.<a name="a129"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#ad2986ef13ced827e5ce2c93e1f3497fd">setChar</a>(val);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a130"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">short</span> val = asShort(readAnim);</div>
<div class="line">                            plug.<a name="a131"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a16cd4e3d2de9b8b254d2582a9dfb5a42">setShort</a>(val);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a132"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a762e1602488228e1b11b83501bb3832e">MFnNumericData::kLong</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">int</span> val = asInt(readAnim);</div>
<div class="line">                            plug.<a name="a133"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#aee193ed4ca8eea1219a903beb736cd64">setInt</a>(val);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a name="a134"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a5686197bafb177bdc82550848416a1ad">MFnNumericData::kFloat</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            plug.<a name="a135"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a9f353fb3153a08d3785714e53a866da3">setFloat</a>((<span class="keywordtype">float</span>)val);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>:</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            plug.<a name="a136"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#aadb1a1fcc32e9e57740a83910fca6869">setDouble</a>(val);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="comment">//dont handle float3 since it&#39;s handled as 3 float plugs</span></div>
<div class="line">                        <span class="keywordflow">default</span>:</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a name="a137"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a> ) )</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordtype">short</span> val = asShort(readAnim);</div>
<div class="line">                        plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a16cd4e3d2de9b8b254d2582a9dfb5a42">setShort</a>(val);</div>
<div class="line">                    }   </div>
<div class="line">                }</div>
<div class="line">                dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                {</div>
<div class="line">                    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">            </div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="comment">//can&#39;t find the plug</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">            {</div>
<div class="line">                dataType = asWord(readAnim); </div>
<div class="line">            }</div>
<div class="line">            dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> dataType;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//if we get here we had an error</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadStatic,</div>
<div class="line">                                                stringStat);</div>
<div class="line">    origName += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line">    origName += fullAttributeName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg;</div>
<div class="line">    msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt,origName);</div>
<div class="line">            </div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> * atomReader::putCachedOnAnimCurve(<a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,<a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;fullAttributeName,</div>
<div class="line">    <span class="keywordtype">char</span> *dataType, ifstream &amp;readAnim, <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> &amp;plug, <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> &amp;curve)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attribute = plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a18baf7e7504bc90d54dea49a7d2d924b">attribute</a>();</div>
<div class="line">    <span class="keywordtype">char</span> c = readAnim.peek();</div>
<div class="line">    <span class="keywordflow">if</span>(readAnim &amp;&amp; c != kBraceRightChar)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type = curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#acd1e166bac2d7cfd822656fcb11d7110">animCurveType</a>();</div>
<div class="line">        <span class="keywordflow">if</span>((type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>) ||</div>
<div class="line">                (type == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a59856725f46f0fad7404558871aa9a5d">MFnAnimCurve::kAnimCurveTU</a>) </div>
<div class="line">                )</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> currentTime = mStartTime;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> stepTime(1,timeUnit);</div>
<div class="line">            <span class="keywordflow">if</span>( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a> ) )</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html">MFnUnitAttribute</a> fnAttrib(attribute);</div>
<div class="line">                <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a7a9a81c214c05358fc6382f8e1f54196">MFnUnitAttribute::kAngle</a>:</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> unit(1.0);</div>
<div class="line">                    <span class="keywordtype">double</span> conv = 1.0/unit.as(angularUnit);</div>
<div class="line">                    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span>(isNextNumeric(readAnim))</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            val *= conv;</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle(val);</div>
<div class="line">                            curve.<a name="a138"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee31f3bc493b091d404c8976ef743562">addKeyframe</a>(currentTime,val);</div>
<div class="line">                            currentTime += stepTime;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                            dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                    <span class="keywordflow">return</span> dataType;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a1925172d8d6f77cdb98f7f486f706024">MFnUnitAttribute::kDistance</a>:</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> unit(1.0);</div>
<div class="line">                    <span class="keywordtype">double</span> conv = 1.0/unit.as(linearUnit);</div>
<div class="line">                    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span>(isNextNumeric(readAnim))</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            val *= conv;</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> dist(val);</div>
<div class="line">                            curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee31f3bc493b091d404c8976ef743562">addKeyframe</a>(currentTime,val);</div>
<div class="line">                            currentTime += stepTime;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                            dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                    <span class="keywordflow">return</span> dataType;</div>
<div class="line"></div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a65c3a8bb75ba1a57e36c86855169752e">MFnUnitAttribute::kTime</a>:</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordflow">if</span>(isNextNumeric(readAnim))</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                            <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> t(val,timeUnit);</div>
<div class="line">                            curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#afc236831cc5b62acad082b9658c7d6a0">addKey</a>(currentTime,t);</div>
<div class="line">                            currentTime += stepTime;</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                            dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                    <span class="keywordflow">return</span> dataType;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a> ) )</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> fnAttrib(attribute);</div>
<div class="line">            </div>
<div class="line">                <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a46b9941f17f513de8e30e46ac53e684b">MFnNumericData::kByte</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a589716b974587a5b575bf02d0b74245a">MFnNumericData::kChar</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a8cfc0ab572a96edfc9db7c02f0d025d7">MFnNumericData::kBoolean</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a762e1602488228e1b11b83501bb3832e">MFnNumericData::kLong</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a5686197bafb177bdc82550848416a1ad">MFnNumericData::kFloat</a>:</div>
<div class="line">                    <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>:</div>
<div class="line">                    {</div>
<div class="line">                        </div>
<div class="line">                        <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordflow">if</span>(isNextNumeric(readAnim))</div>
<div class="line">                            {</div>
<div class="line">                                <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                                curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee31f3bc493b091d404c8976ef743562">addKeyframe</a>(currentTime,val);</div>
<div class="line">                                currentTime += stepTime;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">else</span></div>
<div class="line">                            {</div>
<div class="line">                                dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                        dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                        <span class="keywordflow">return</span> dataType;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">default</span>:</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a> ) )</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//just read as a double</span></div>
<div class="line">                <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span>(isNextNumeric(readAnim))</div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordtype">double</span> val = asDouble(readAnim);</div>
<div class="line">                        curve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee31f3bc493b091d404c8976ef743562">addKeyframe</a>(currentTime,val);</div>
<div class="line">                        currentTime += stepTime;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        dataType = asWord(readAnim); <span class="comment">//this should be the } bracket</span></div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">                <span class="keywordflow">return</span> dataType;    </div>
<div class="line">            }   </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span>(readAnim &amp;&amp; ! readAnim.eof() &amp;&amp; dataType &amp;&amp; strcmp(dataType, <span class="stringliteral">&quot;}&quot;</span>) !=0)</div>
<div class="line">    {</div>
<div class="line">        dataType = asWord(readAnim); </div>
<div class="line">    }</div>
<div class="line">    dataType = asWord(readAnim); <span class="comment">//set up for the next set</span></div>
<div class="line">    <span class="comment">//if we get here we had an error</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stringStat;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotReadCached,</div>
<div class="line">                                                stringStat);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> origName(nodeName);</div>
<div class="line">    origName += <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line">    origName += fullAttributeName;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg;</div>
<div class="line">    msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt,origName);</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">char</span> * </div>
<div class="line">atomReader::readHeader(ifstream &amp;readAnim, <span class="keywordtype">bool</span> &amp;hasVersionString,<span class="keywordtype">double</span> &amp;startTime, <span class="keywordtype">double</span> &amp;endTime, <span class="keywordtype">double</span> &amp;startUnitless, <span class="keywordtype">double</span> &amp;endUnitless)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//  Read the header.</span></div>
<div class="line"><span class="comment">//  Returns: Will return NULL or the current read character after the header is read.</span></div>
<div class="line"><span class="comment">//  Even if NULL the file might not be at the end, so ehck eof() if needed.</span></div>
<div class="line">{</div>
<div class="line">    </div>
<div class="line"></div>
<div class="line">    resetUnits();</div>
<div class="line">    convertAnglesFromV2To3 = <span class="keyword">false</span>;</div>
<div class="line">    convertAnglesFromV3To2 = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  Read the header. The header officially ends when the first non-header</span></div>
<div class="line">    <span class="comment">//  keyword is found. The header contains clipboard specific information</span></div>
<div class="line">    <span class="comment">//  where the body is anim curve specific.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">char</span> *dataType = NULL;</div>
<div class="line">    <span class="keywordflow">while</span> (!readAnim.eof()) {</div>
<div class="line">        advance(readAnim);</div>
<div class="line">        dataType = asWord(readAnim);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(dataType, kAtomVersion) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> version(asWord(readAnim));</div>
<div class="line">            animVersion = version.asDouble();</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> thisVersion(kAtomVersionString);</div>
<div class="line"></div>
<div class="line">            hasVersionString = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">            <span class="comment">//  Add versioning control here.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">if</span> (version != thisVersion) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kInvalidVersion,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, version, thisVersion);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            } </div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kMayaVersion) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> version(asWord(readAnim, <span class="keyword">true</span>));</div>
<div class="line"></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> currentVersion = <a name="a139"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a5e267b7212f8651514c21ca82566e412">MGlobal::mayaVersion</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (currentVersion.<a name="a140"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0,1) == <span class="stringliteral">&quot;2.&quot;</span>) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> vCheck = version.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0, 1);</div>
<div class="line">                <span class="keywordflow">if</span> (vCheck != <span class="stringliteral">&quot;2.&quot;</span>) {</div>
<div class="line">                    convertAnglesFromV3To2 = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">//  If this is a pre-Maya 3.0 file, then the tangent angles </span></div>
<div class="line">                <span class="comment">//  will need to be converted to work in Maya 3.0+</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> vCheck = version.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>(0, 1);</div>
<div class="line">                <span class="keywordflow">if</span> (vCheck == <span class="stringliteral">&quot;2.&quot;</span>) {</div>
<div class="line">                    convertAnglesFromV2To3 = <span class="keyword">true</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kTimeUnit) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> timeUnitString(asWord(readAnim));</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(timeUnitString, timeUnit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                timeUnit = <a class="code" href="#!/url=./cpp_ref/class_m_time.html#a5b08f84ff68e42c0a32dbd8e0a2d6506">MTime::uiUnit</a>();</div>
<div class="line">                atomUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kTimeUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kLinearUnit) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> linearUnitString(asWord(readAnim));</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(linearUnitString, linearUnit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                linearUnit = <a class="code" href="#!/url=./cpp_ref/class_m_distance.html#ad7868b7deab93de1213d816364e634cc">MDistance::uiUnit</a>();</div>
<div class="line">                atomUnitNames::setToShortName(linearUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kLinearUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kAngularUnit) == 0) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> angularUnitString(asWord(readAnim));</div>
<div class="line">            <span class="keywordflow">if</span> (!atomUnitNames::setFromName(angularUnitString, angularUnit)) {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">                angularUnit = <a class="code" href="#!/url=./cpp_ref/class_m_angle.html#abc881d829b53f0f3871fcf9a8ab173b1">MAngle::uiUnit</a>();</div>
<div class="line">                atomUnitNames::setToShortName(angularUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> stat;</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg; </div>
<div class="line">                <span class="comment">// Use format to place variable string into message</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msgFmt = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kSettingToUnit,</div>
<div class="line">                                                            stat);</div>
<div class="line">                msg.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>(msgFmt, kAngularUnit, unitName);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kStartTime) == 0) {</div>
<div class="line">            startTime = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kEndTime) == 0) {</div>
<div class="line">            endTime = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kStartUnitless) == 0) {</div>
<div class="line">            startUnitless = asDouble(readAnim);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(dataType, kEndUnitless) == 0) {</div>
<div class="line">            endUnitless = asDouble(readAnim);</div>
<div class="line">        } </div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(dataType,kMayaSceneFile) ==0){</div>
<div class="line">            <span class="comment">//just make sure we read this;</span></div>
<div class="line">            <span class="comment">//and skip whitespace</span></div>
<div class="line">            asWord(readAnim, <span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {  </div>
<div class="line">            <span class="comment">//  The header should be finished. Begin to parse the body.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> dataType;</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//  Class atomWriter</span></div>
<div class="line"><span class="comment">//-------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">atomWriter::atomWriter()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class constructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">atomWriter::~atomWriter()</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Class destructor.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> </div>
<div class="line">atomWriter::writeClipboard( ofstream&amp; animFile, </div>
<div class="line">                            <span class="keyword">const</span> <a name="_a141"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html">MAnimCurveClipboard</a> &amp;cb,</div>
<div class="line">                            atomCachedPlugs *cachedPlugs,</div>
<div class="line">                            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;layerName)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write the contents of the clipboard to the ofstream.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Check to see if there is anything on the clipboard at all</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (cb.<a name="a142"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a8174b25717a6f860d40f2ca259442df5">isEmpty</a>()) {</div>
<div class="line">        <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Now write out each animCurve</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html">MAnimCurveClipboardItemArray</a>  &amp;clipboardArray = </div>
<div class="line">                                        cb.<a name="a143"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a1da733f06135a2cab5f3cc2c7c08f570">clipboardItems</a>(&amp;status);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != status) {</div>
<div class="line">        <span class="keywordflow">return</span> status;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; clipboardArray.<a name="a144"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++) {</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;clipboardItem = clipboardArray[i];</div>
<div class="line"></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> statusInLoop = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>;</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> animCurveObj = clipboardItem.<a name="a145"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a011adb3ceeca89e8723f4c7c79990514">animCurve</a>(&amp;statusInLoop);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//to check with caching we need the name of the plug, not just the attrname</span></div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug;</div>
<div class="line">        <span class="keywordflow">if</span>(getPlug(clipboardItem.<a name="a146"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a85027d1b009e3bb3e50f080bbaaf10e2">nodeName</a>(),clipboardItem.<a name="a147"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6f47917e66ecaf181087bd514c23388c">fullAttributeName</a>(), plug)==<span class="keyword">false</span>)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attrName;</div>
<div class="line">        getAttrName(plug,attrName);</div>
<div class="line">        <span class="comment">//if we are caching don&#39;t output the curve for a cached plug.</span></div>
<div class="line">        <span class="keywordflow">if</span>(cachedPlugs!=NULL &amp;&amp; cachedPlugs-&gt;isAttrCached(attrName,layerName))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//  The clipboard may contain Null anim curves. If a Null anim </span></div>
<div class="line">        <span class="comment">//  is hit we skip it.</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != statusInLoop || animCurveObj.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>()) {</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Write out animCurve information</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (!writeAnim(animFile, clipboardItem,layerName)) {</div>
<div class="line">            <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <span class="comment">//  Write out each curve in its specified format.</span></div>
<div class="line">        <span class="comment">//  For now, only the anim curve format.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span> (!writeAnimCurve(animFile, &amp;animCurveObj, </div>
<div class="line">                            clipboardItem.<a name="a148"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#acd1e166bac2d7cfd822656fcb11d7110">animCurveType</a>())) {</div>
<div class="line">            <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomWriter::writeStaticValues( ofstream &amp;animFile,</div>
<div class="line">    <span class="keyword">const</span> <a name="_a149"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug_array.html">MPlugArray</a> &amp;animatablePlugs,</div>
<div class="line">    std::set&lt;std::string&gt; &amp;attrStrings,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childCount,</div>
<div class="line">    atomTemplateReader &amp;templateReader</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Walk through each animtable plug and write out the static value on that plug</span></div>
<div class="line">    <span class="comment">// If the plug is animated (or TODO is a constraint or set driven key), or</span></div>
<div class="line">    <span class="comment">// is not found in the attrString set and that set isn&#39;t empty</span></div>
<div class="line">    <span class="comment">// Then don&#39;t write it.</span></div>
<div class="line">    std::set&lt;std::string&gt;::const_iterator constIter = attrStrings.end();</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numPlugs = animatablePlugs.<a name="a150"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numPlugs; i++)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_plug_array.html">MPlugArray</a> dstPlugArray;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug = animatablePlugs[i];</div>
<div class="line">        <span class="comment">//if a plug isn&#39;t connected then it&#39;s static, or if it&#39;s not getting driven</span></div>
<div class="line">        <span class="comment">//later on with cached values we may revert them to a static if the plug</span></div>
<div class="line">        <span class="comment">//is connected but the value doesn&#39;t change over the time range.</span></div>
<div class="line">        <span class="keywordtype">bool</span> connected = plug.<a name="a151"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a3727c18c58fc5ba8be5fb2582b5d06f1">connectedTo</a> (dstPlugArray, <span class="keyword">true</span>,<span class="keyword">false</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (connected == <span class="keyword">false</span> || dstPlugArray.<a class="code" href="#!/url=./cpp_ref/class_m_plug_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() ==0) </div>
<div class="line">        {</div>
<div class="line">            </div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> attrPlug (plug);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attrObj = attrPlug.attribute();</div>
<div class="line">            <a name="_a152"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnLeafAttr (attrObj);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attrName;</div>
<div class="line">            getAttrName(plug,attrName);</div>
<div class="line">            <span class="comment">//template filter check first</span></div>
<div class="line">            <span class="keywordflow">if</span>(templateReader.findNodeAndAttr(nodeName,attrName) == <span class="keyword">false</span>)</div>
<div class="line">                <span class="keywordflow">continue</span>; </div>
<div class="line">            <span class="comment">//and if we have specified attr strings then don&#39;t save it out if it&#39;s not found</span></div>
<div class="line">            <span class="comment">//must use shortName since the channelBox command will always return a short name</span></div>
<div class="line">            <span class="comment">//the long name flag there is only used to turn long name (or nice name) display on</span></div>
<div class="line">            <span class="keywordflow">if</span>(attrStrings.size() == 0 || attrStrings.find(std::string(fnLeafAttr.shortName().asChar())) != constIter)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Write out the plugs&#39; static statement</span></div>
<div class="line">                animFile &lt;&lt;kTwoSpace &lt;&lt; <span class="stringliteral">&quot;static &quot;</span>;</div>
<div class="line">                <span class="comment">// build up the full attribute name</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnAttr (attrObj);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> fullAttrName (fnLeafAttr.shortName());</div>
<div class="line">                attrPlug = attrPlug.parent();</div>
<div class="line">                <span class="keywordflow">while</span> (!attrPlug.isNull()) {</div>
<div class="line">                    attrObj = attrPlug.attribute();</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnAttr2 (attrObj);</div>
<div class="line">                    fullAttrName = fnAttr2.name() + <span class="stringliteral">&quot;.&quot;</span> + fullAttrName;</div>
<div class="line">                    attrPlug = attrPlug.parent();</div>
<div class="line">                }</div>
<div class="line">                animFile &lt;&lt; fullAttrName.asChar() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; attrName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;;\n&quot;</span>;</div>
<div class="line">                <a name="_a153"></a><a class="code" href="#!/url=./cpp_ref/class_m_d_g_context.html">MDGContext</a> context = MDGContext::fsNormal;</div>
<div class="line">                animFile &lt;&lt;kTwoSpace &lt;&lt; <span class="stringliteral">&quot;{ &quot;</span>;</div>
<div class="line">                writeValue(animFile,plug,context);</div>
<div class="line">                animFile &lt;&lt; <span class="stringliteral">&quot; }\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomWriter::writeCachedValues( ofstream &amp;animFile,</div>
<div class="line">    atomCachedPlugs *cachedPlugs,</div>
<div class="line">    std::set&lt;std::string&gt; &amp;attrStrings,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childCount,</div>
<div class="line">    atomTemplateReader &amp;templateReader</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(cachedPlugs)</div>
<div class="line">    {</div>
<div class="line">        std::set&lt;std::string&gt;::const_iterator constIter = attrStrings.end();</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numPlugs = cachedPlugs-&gt;getNumPlugs();</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numPlugs; i++)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> &amp;plug = cachedPlugs-&gt;getPlug(i);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> attrPlug (plug);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attrObj = attrPlug.attribute();</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnLeafAttr (attrObj);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attrName;</div>
<div class="line">            getAttrName(plug,attrName);</div>
<div class="line">            <span class="comment">//template filter check first</span></div>
<div class="line">            <span class="keywordflow">if</span>(templateReader.findNodeAndAttr(nodeName,fnLeafAttr.name()) == <span class="keyword">false</span>)</div>
<div class="line">                <span class="keywordflow">continue</span>; </div>
<div class="line">            <span class="comment">//then if we have specified attr strings then don&#39;t save it out if it&#39;s not found</span></div>
<div class="line">            <span class="comment">//must use shortName since the channelBox command will always return a short name</span></div>
<div class="line">            <span class="comment">//the long name flag there is only used to turn long name (or nice name) display on</span></div>
<div class="line">            <span class="keywordflow">if</span>(attrStrings.size() == 0 || attrStrings.find(std::string(fnLeafAttr.shortName().asChar())) != constIter)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Write out the plugs&#39; cached statement</span></div>
<div class="line">                animFile &lt;&lt;kTwoSpace &lt;&lt; <span class="stringliteral">&quot;cached &quot;</span>;</div>
<div class="line">                <span class="comment">// build up the full attribute name</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnAttr (attrObj);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> fullAttrName (fnLeafAttr.shortName());</div>
<div class="line">                attrPlug = attrPlug.parent();</div>
<div class="line">                <span class="keywordflow">while</span> (!attrPlug.isNull()) {</div>
<div class="line">                    attrObj = attrPlug.attribute();</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_fn_attribute.html">MFnAttribute</a> fnAttr2 (attrObj);</div>
<div class="line">                    fullAttrName = fnAttr2.name() + <span class="stringliteral">&quot;.&quot;</span> + fullAttrName;</div>
<div class="line">                    attrPlug = attrPlug.parent();</div>
<div class="line">                }</div>
<div class="line">                animFile &lt;&lt; fullAttrName.asChar() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; attrName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;;\n&quot;</span>;</div>
<div class="line">                animFile &lt;&lt;kTwoSpace &lt;&lt; <span class="stringliteral">&quot;{ &quot;</span>;</div>
<div class="line">                cachedPlugs-&gt;writeValues(animFile,i);</div>
<div class="line">                animFile &lt;&lt; <span class="stringliteral">&quot; }\n&quot;</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span>    </div>
<div class="line">atomWriter::writeNodeStart(ofstream&amp; animFile,atomNodeNameReplacer::NodeType nodeType, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> depth, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> childCount)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(nodeType == atomNodeNameReplacer::eDag)</div>
<div class="line">        animFile &lt;&lt; kDagNode;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nodeType == atomNodeNameReplacer::eShape)</div>
<div class="line">        animFile &lt;&lt; kShapeNode;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nodeType == atomNodeNameReplacer::eAnimLayer)</div>
<div class="line">        animFile &lt;&lt; kAnimLayer;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        animFile &lt;&lt; kDependNode;</div>
<div class="line">    animFile &lt;&lt; <span class="stringliteral">&quot; {\n&quot;</span>;</div>
<div class="line">    animFile  &lt;&lt; kTwoSpace &lt;&lt; nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; depth &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; childCount &lt;&lt; <span class="stringliteral">&quot;;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span>    </div>
<div class="line">atomWriter::writeNodeEnd(ofstream&amp; animFile)</div>
<div class="line">{</div>
<div class="line">    animFile &lt;&lt; <span class="stringliteral">&quot;}\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomWriter::writeHeader(ofstream&amp; clip,<span class="keywordtype">bool</span> useSpecifiedRange, <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> &amp;defaultStartTime, <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a> &amp;defaultEndTime)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Writes the header for the file. The header contains the clipboard</span></div>
<div class="line"><span class="comment">//      specific data. </span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!clip) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    resetUnits(); <span class="comment">//reset the units first.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//always write out the version info and the units in case we only have statics in the file and no curves.</span></div>
<div class="line">    clip &lt;&lt; kAtomVersion &lt;&lt; kSpaceChar &lt;&lt; kAtomVersionString &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    clip &lt;&lt; kMayaVersion &lt;&lt; kSpaceChar &lt;&lt; <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a5e267b7212f8651514c21ca82566e412">MGlobal::mayaVersion</a>() &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> melCommand = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;file -q -sn&quot;</span>) + <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> sceneName = <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a8dd71fbf4d71dacf626180777ba91a62">MGlobal::executeCommandStringResult</a> (melCommand, <span class="keyword">false</span>, <span class="keyword">false</span>, &amp;status);</div>
<div class="line">    <span class="keywordflow">if</span>(status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> &amp;&amp; sceneName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() &gt;0) <span class="comment">//if no name then don&#39;t save it</span></div>
<div class="line">        clip &lt;&lt; kMayaSceneFile &lt;&lt; kSpaceChar &lt;&lt; sceneName &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unit;</div>
<div class="line">    atomUnitNames::setToShortName(timeUnit, unit);</div>
<div class="line">    clip &lt;&lt; kTimeUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    atomUnitNames::setToShortName(linearUnit, unit);</div>
<div class="line">    clip &lt;&lt; kLinearUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    atomUnitNames::setToShortName(angularUnit, unit);</div>
<div class="line">    clip &lt;&lt; kAngularUnit &lt;&lt; kSpaceChar &lt;&lt; unit &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keyword">static</span> <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html">MAnimCurveClipboard</a> &amp;clipboard = </div>
<div class="line">    <a name="a154"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#af34c0cc340b8211738e45087a7d17672">MAnimCurveClipboard::theAPIClipboard</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">//always use the default times since we may also have cached times too</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(useSpecifiedRange == <span class="keyword">true</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> startTime = defaultStartTime.<a name="a155"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line">        <span class="keywordtype">double</span> endTime = defaultEndTime.<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line"></div>
<div class="line">        mStartTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(startTime,timeUnit);</div>
<div class="line">        mEndTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(endTime,timeUnit);</div>
<div class="line">        clip &lt;&lt; kStartTime &lt;&lt; kSpaceChar &lt;&lt; startTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">        clip &lt;&lt; kEndTime &lt;&lt; kSpaceChar &lt;&lt; endTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">        <span class="keywordflow">if</span>(clipboard.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a8174b25717a6f860d40f2ca259442df5">isEmpty</a>() == <span class="keyword">false</span>) <span class="comment">//we have curves so write out the unitless min/max</span></div>
<div class="line">        {</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">float</span> startUnitless = clipboard.<a name="a156"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a840e4e411b88d13cfbe597cd95af3462">startUnitlessInput</a>();</div>
<div class="line">            <span class="keywordtype">float</span> endUnitless = clipboard.<a name="a157"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a4e7fb342d0cb61bf74a1e96bb6f5b350">endUnitlessInput</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (startUnitless != endUnitless) {</div>
<div class="line">                clip &lt;&lt; kStartUnitless &lt;&lt; kSpaceChar &lt;&lt; startUnitless &lt;&lt; </div>
<div class="line">                        kSemiColonChar &lt;&lt; endl;</div>
<div class="line">                clip &lt;&lt; kEndUnitless &lt;&lt; kSpaceChar &lt;&lt; endUnitless &lt;&lt; </div>
<div class="line">                        kSemiColonChar &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span>(clipboard.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a8174b25717a6f860d40f2ca259442df5">isEmpty</a>() == <span class="keyword">false</span>) <span class="comment">//we have curves so write them out</span></div>
<div class="line">        {</div>
<div class="line">        </div>
<div class="line">            <span class="keywordtype">double</span> startTime = clipboard.<a name="a158"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a0c219d38580479d27e25858b7e0a7a93">startTime</a>().<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line">            <span class="keywordtype">double</span> endTime = clipboard.<a name="a159"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a50ed55f78ebcd59a272b1a44a2d20aa5">endTime</a>().<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line"></div>
<div class="line">            mStartTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(startTime,timeUnit);</div>
<div class="line">            mEndTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(endTime,timeUnit);</div>
<div class="line">            clip &lt;&lt; kStartTime &lt;&lt; kSpaceChar &lt;&lt; startTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">            clip &lt;&lt; kEndTime &lt;&lt; kSpaceChar &lt;&lt; endTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">float</span> startUnitless = clipboard.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a840e4e411b88d13cfbe597cd95af3462">startUnitlessInput</a>();</div>
<div class="line">            <span class="keywordtype">float</span> endUnitless = clipboard.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard.html#a4e7fb342d0cb61bf74a1e96bb6f5b350">endUnitlessInput</a>();</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">if</span> (startUnitless != endUnitless) {</div>
<div class="line">                clip &lt;&lt; kStartUnitless &lt;&lt; kSpaceChar &lt;&lt; startUnitless &lt;&lt; </div>
<div class="line">                        kSemiColonChar &lt;&lt; endl;</div>
<div class="line">                clip &lt;&lt; kEndUnitless &lt;&lt; kSpaceChar &lt;&lt; endUnitless &lt;&lt; </div>
<div class="line">                        kSemiColonChar &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">            </div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="comment">//no anim data so set the default times to the playback options</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">double</span> startTime =  <a name="a160"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_control.html#aad65deeba716641e7c1803f00d157753">MAnimControl::animationStartTime</a>().<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line">            <span class="keywordtype">double</span> endTime = <a name="a161"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_control.html#ae8b44c40ec020b0779a34dc748a74366">MAnimControl::animationEndTime</a>().<a class="code" href="#!/url=./cpp_ref/class_m_time.html#a105d41236561f4d4be6383ced757a429">as</a>(timeUnit);</div>
<div class="line">            mStartTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(startTime,timeUnit);</div>
<div class="line">            mEndTime = <a class="code" href="#!/url=./cpp_ref/class_m_time.html">MTime</a>(endTime,timeUnit);</div>
<div class="line"></div>
<div class="line">            clip &lt;&lt; kStartTime &lt;&lt; kSpaceChar &lt;&lt; startTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">            clip &lt;&lt; kEndTime &lt;&lt; kSpaceChar &lt;&lt; endTime &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    defaultStartTime = mStartTime;</div>
<div class="line">    defaultEndTime = mEndTime;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomWriter::writeExportEditsFilePresent(ofstream&amp; clip)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Says that an export edits file will be present embedded at the end of the file</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    clip &lt;&lt; kExportEditsString &lt;&lt; kSpaceChar  &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomWriter::writeExportEditsFile(ofstream &amp;clip, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>&amp; filename)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Writes the exportEdits (offline) file embedded in the atom file.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    clip &lt;&lt; kExportEditsDataString &lt;&lt; kSpaceChar;</div>
<div class="line"></div>
<div class="line">    std::string line;</div>
<div class="line">    std::ifstream exportFile (filename.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">    <span class="keywordflow">if</span> (exportFile.is_open())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">while</span> ( exportFile.good() )</div>
<div class="line">        {</div>
<div class="line">            getline (exportFile,line);</div>
<div class="line">            clip &lt;&lt; line &lt;&lt;endl;</div>
<div class="line">        }</div>
<div class="line">        exportFile.close();</div>
<div class="line">        clip  &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">        <span class="comment">//remove the file</span></div>
<div class="line">        <span class="keyword">remove</span>(filename.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomWriter::writeAnim( ofstream &amp;clip, </div>
<div class="line">                            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html">MAnimCurveClipboardItem</a> &amp;clipboardItem,</div>
<div class="line">                            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;layerName)</div>
<div class="line"><span class="comment">//  </span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write out the anim curve from the clipboard item into the </span></div>
<div class="line"><span class="comment">//      ofstream. The position of the anim curve in the clipboard</span></div>
<div class="line"><span class="comment">//      and the attribute to which it is attached is written out in this</span></div>
<div class="line"><span class="comment">//      method.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      This method returns true if the write was successful.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!clip) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt;kAnim;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  If this is a clipboard place holder then there will be no full</span></div>
<div class="line">    <span class="comment">//  or leaf attribute names.</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">//want multi[index].leafAttr not just leafAttr here</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> plug;</div>
<div class="line">    <span class="keywordflow">if</span>(getPlug(clipboardItem.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a85027d1b009e3bb3e50f080bbaaf10e2">nodeName</a>(),clipboardItem.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6f47917e66ecaf181087bd514c23388c">fullAttributeName</a>(), plug)==<span class="keyword">false</span>)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attrName;</div>
<div class="line">    getAttrName(plug,attrName);</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; clipboardItem.<a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#a6f47917e66ecaf181087bd514c23388c">fullAttributeName</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; attrName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rowCount, childCount, attrCount;</div>
<div class="line">    clipboardItem.<a name="a162"></a><a class="code" href="#!/url=./cpp_ref/class_m_anim_curve_clipboard_item.html#afe9f5bf8b944abfa62b0e8c0bdb734cc">getAddressingInfo</a>(rowCount, childCount, attrCount);</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kSpaceChar &lt;&lt; attrCount;</div>
<div class="line">    <span class="keywordflow">if</span>(layerName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; layerName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">    clip &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomWriter::writeAnimCurve(ofstream &amp;clip, </div>
<div class="line">                                <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> *animCurveObj,</div>
<div class="line">                                <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27">MFnAnimCurve::AnimCurveType</a> type,</div>
<div class="line">                                <span class="keywordtype">bool</span> verboseUnits)</div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Description:</span></div>
<div class="line"><span class="comment">//      Write out the anim curve from the clipboard item into the</span></div>
<div class="line"><span class="comment">//      ofstream. The actual anim curve data is written out.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//      This method returns true if the write was successful.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (NULL == animCurveObj || animCurveObj-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_object.html#ac02f2a4d7312eb91f40980adfd4e31b2">isNull</a>() || !clip) {</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html">MFnAnimCurve</a> animCurve(*animCurveObj, &amp;status);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a> != status) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> msg = <a class="code" href="#!/url=./cpp_ref/class_m_string_resource.html#a121315f443a9c4ea512738dc1d39414d">MStringResource::getString</a>(kCouldNotExport, status);</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(msg);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace&lt;&lt; kAnimData &lt;&lt; kSpaceChar &lt;&lt; kBraceLeftChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kInputString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            boolInputTypeAsWord(animCurve.<a name="a163"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a9c12542ca640c682074bb8db022f9eb0">isUnitlessInput</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kOutputString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            outputTypeAsWord(type) &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kWeightedString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            (animCurve.<a name="a164"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a39ee5f89bd48376bc77a278169d4e158">isWeighted</a>() ? 1 : 0) &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">//  These units default to the units in the header of the file.</span></div>
<div class="line">    <span class="comment">//  </span></div>
<div class="line">    <span class="keywordflow">if</span> (verboseUnits) {</div>
<div class="line">        clip &lt;&lt; kFourSpace &lt;&lt; kInputUnitString &lt;&lt; kSpaceChar;</div>
<div class="line">        <span class="keywordflow">if</span> (animCurve.<a name="a165"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#af94edf40f82e9b48f334506415933394">isTimeInput</a>()) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">            atomUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line">            clip &lt;&lt; unitName;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="comment">//  The anim curve has unitless input.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            clip &lt;&lt; kUnitlessString;</div>
<div class="line">        }</div>
<div class="line">        clip &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kFourSpace &lt;&lt; kOutputUnitString &lt;&lt; kSpaceChar;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">double</span> conversion = 1.0;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> unitName;</div>
<div class="line">    <span class="keywordflow">switch</span> (type) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a56ecd2b0aa8e7db9d2a22312d638ccf5">MFnAnimCurve::kAnimCurveTA</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27acc34181e08612a4adb67f03265602ebd">MFnAnimCurve::kAnimCurveUA</a>:</div>
<div class="line">            atomUnitNames::setToShortName(angularUnit, unitName);</div>
<div class="line">            <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle(1.0);</div>
<div class="line">                conversion = angle.<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a8031129808b47b18cc4121aa7c517757">MFnAnimCurve::kAnimCurveTL</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27aabaf584b29a77ebed42037fc5eef28b0">MFnAnimCurve::kAnimCurveUL</a>:</div>
<div class="line">            atomUnitNames::setToShortName(linearUnit, unitName);</div>
<div class="line">            <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> distance(1.0);</div>
<div class="line">                conversion = distance.as(linearUnit);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a146ba4df19c880340f2c9b3c65a90e2c">MFnAnimCurve::kAnimCurveTT</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a93c9cae782f401790431a8f034193f27a9f0fdf939faa43375d8869e0d9c460f7">MFnAnimCurve::kAnimCurveUT</a>:</div>
<div class="line">            atomUnitNames::setToShortName(timeUnit, unitName);</div>
<div class="line">            <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; unitName;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; kUnitlessString;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (verboseUnits) clip &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (verboseUnits) {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> angleUnitName;</div>
<div class="line">        atomUnitNames::setToShortName(angularUnit, angleUnitName);</div>
<div class="line">        clip &lt;&lt; kFourSpace &lt;&lt; kTanAngleUnitString &lt;&lt; </div>
<div class="line">                kSpaceChar &lt;&lt; angleUnitName &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kPreInfinityString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            infinityTypeAsWord(animCurve.<a name="a166"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a88b8b1c452c4d2d1c5714d2599e485a4">preInfinityType</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kPostInfinityString &lt;&lt; kSpaceChar &lt;&lt;</div>
<div class="line">            infinityTypeAsWord(animCurve.<a name="a167"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#ad107bf0173bf1f8018b414dbae7bc06f">postInfinityType</a>()) &lt;&lt; </div>
<div class="line">            kSemiColonChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kKeysString &lt;&lt; kSpaceChar &lt;&lt; kBraceLeftChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// And then write out each keyframe</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> numKeys = animCurve.<a name="a168"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a5d0bf2353d16d4c50a6825b8067cdf38">numKeyframes</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numKeys; i++) {</div>
<div class="line">        clip &lt;&lt; kFourSpace &lt;&lt; kTwoSpace;</div>
<div class="line">        <span class="keywordflow">if</span> (animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a9c12542ca640c682074bb8db022f9eb0">isUnitlessInput</a>()) {</div>
<div class="line">            clip &lt;&lt; animCurve.<a name="a169"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a509a5e48fcff509378d856494ca58f1b">unitlessInput</a>(i);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            clip &lt;&lt; animCurve.<a name="a170"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a65183908b74de022172ba65dbcc57a4c">time</a>(i).<a name="a171"></a><a class="code" href="#!/url=./cpp_ref/class_m_time.html#a324b14b7506c6e4f47912161956974ed">value</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// clamp tiny values so that it isn&#39;t so small it can&#39;t be read in</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordtype">double</span> animValue = (conversion*animCurve.<a name="a172"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a97dd3da7fd2ad2e846278ac58cac033a">value</a>(i));</div>
<div class="line">        <span class="keywordflow">if</span> (atomBase::isEquivalent(animValue,0.0)) animValue = 0.0;</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; animValue;</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; tangentTypeAsWord(animCurve.<a name="a173"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee5bcfb44261590c1fbd193fd8a9e272">inTangentType</a>(i));</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; tangentTypeAsWord(animCurve.<a name="a174"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a7f396a0646a6a8ec95fcf6fa39d666fa">outTangentType</a>(i));</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a175"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a70c26b7e4508da8f9e4327988c8a4a52">tangentsLocked</a>(i) ? 1 : 0);</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a176"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a9687680a0340102d75027852143519a8">weightsLocked</a>(i) ? 1 : 0);</div>
<div class="line">        clip &lt;&lt; kSpaceChar &lt;&lt; (animCurve.<a name="a177"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a2f206aa604bae4b561529bb42abe3152">isBreakdown</a>(i) ? 1 : 0);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#aee5bcfb44261590c1fbd193fd8a9e272">inTangentType</a>(i) == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle;</div>
<div class="line">            <span class="keywordtype">double</span> weight;</div>
<div class="line">            animCurve.<a name="a178"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6c166a71a7d9511c95ac36271105ba7c">getTangent</a>(i, angle, weight, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; angle.<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; weight;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a7f396a0646a6a8ec95fcf6fa39d666fa">outTangentType</a>(i) == <a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6b26eee66e19b558a138d0c009653e51a2d897d42a876b83b49878d3a5b6c5516">MFnAnimCurve::kTangentFixed</a>) {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle;</div>
<div class="line">            <span class="keywordtype">double</span> weight;</div>
<div class="line">            animCurve.<a class="code" href="#!/url=./cpp_ref/class_m_fn_anim_curve.html#a6c166a71a7d9511c95ac36271105ba7c">getTangent</a>(i, angle, weight, <span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; angle.<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">            clip &lt;&lt; kSpaceChar &lt;&lt; weight;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        clip &lt;&lt; kSemiColonChar &lt;&lt; endl;</div>
<div class="line">    }</div>
<div class="line">    clip &lt;&lt; kFourSpace &lt;&lt; kBraceRightChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    clip &lt;&lt; kTwoSpace &lt;&lt; kBraceRightChar &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomWriter::writeValue(ofstream &amp; clip,<a class="code" href="#!/url=./cpp_ref/class_m_plug.html">MPlug</a> &amp;plug,<a class="code" href="#!/url=./cpp_ref/class_m_d_g_context.html">MDGContext</a> &amp;context)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> attribute = plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a18baf7e7504bc90d54dea49a7d2d924b">attribute</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a> ) )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> fnAttrib(attribute);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a8cfc0ab572a96edfc9db7c02f0d025d7">MFnNumericData::kBoolean</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">bool</span> value;</div>
<div class="line">                plug.<a name="a179"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                <span class="keywordtype">int</span> ival = value == <span class="keyword">true</span> ? 1 : 0;</div>
<div class="line">                clip &lt;&lt; ival;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a46b9941f17f513de8e30e46ac53e684b">MFnNumericData::kByte</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a589716b974587a5b575bf02d0b74245a">MFnNumericData::kChar</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">char</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a868c593a83291c3c805f13f49e46bd44">MFnNumericData::kShort</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">short</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a762e1602488228e1b11b83501bb3832e">MFnNumericData::kLong</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">int</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a5686197bafb177bdc82550848416a1ad">MFnNumericData::kFloat</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">float</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7acd70f5d2b5e8c1bb8e83b0482a33e518">MFnNumericData::kDouble</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">double</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a name="a180"></a><a class="code" href="#!/url=./cpp_ref/class_m_fn_numeric_data.html#a1d1cfd8ffb84e947f82999c682b666a7a91f4ea6e351f41893ac43d373f9d647c">MFnNumericData::k3Float</a>:</div>
<div class="line">            {</div>
<div class="line">                <a name="_a181"></a><a class="code" href="#!/url=./cpp_ref/class_m_vector.html">MVector</a> float3;</div>
<div class="line">                plug.<a name="a182"></a><a class="code" href="#!/url=./cpp_ref/class_m_plug.html#ae9e2ba9ea7be1790e7e13fd2c49bd143">child</a>(0).<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(float3.<a name="a183"></a><a class="code" href="#!/url=./cpp_ref/class_m_vector.html#af88b946fb90d5f08b5fb740c70e98c10">x</a>,context);</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#ae9e2ba9ea7be1790e7e13fd2c49bd143">child</a>(1).<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(float3.<a name="a184"></a><a class="code" href="#!/url=./cpp_ref/class_m_vector.html#ab927965981178aa1fba979a37168db2a">y</a>,context);</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#ae9e2ba9ea7be1790e7e13fd2c49bd143">child</a>(2).<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(float3.<a name="a185"></a><a class="code" href="#!/url=./cpp_ref/class_m_vector.html#ab3e6ed577a7c669c19de1f9c1b46c872">z</a>,context);</div>
<div class="line">                clip &lt;&lt; float3.<a class="code" href="#!/url=./cpp_ref/class_m_vector.html#af88b946fb90d5f08b5fb740c70e98c10">x</a> &lt;&lt;kSpaceChar&lt;&lt; float3.<a class="code" href="#!/url=./cpp_ref/class_m_vector.html#ab927965981178aa1fba979a37168db2a">y</a> &lt;&lt; kSpaceChar&lt;&lt; float3.<a class="code" href="#!/url=./cpp_ref/class_m_vector.html#ab3e6ed577a7c669c19de1f9c1b46c872">z</a>;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a> ) )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html">MFnUnitAttribute</a> fnAttrib(attribute);</div>
<div class="line">        <span class="keywordflow">switch</span>(fnAttrib.unitType())</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a7a9a81c214c05358fc6382f8e1f54196">MFnUnitAttribute::kAngle</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">double</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_angle.html">MAngle</a> angle(1.0);</div>
<div class="line">                value *= angle.<a class="code" href="#!/url=./cpp_ref/class_m_angle.html#ad8bd60c05e3ae72f081af07bfeb519ac">as</a>(angularUnit);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a1925172d8d6f77cdb98f7f486f706024">MFnUnitAttribute::kDistance</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">double</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_distance.html">MDistance</a> distance(1.0);</div>
<div class="line">                value *= distance.as(linearUnit);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a1d1cfd8ffb84e947f82999c682b666a7a65c3a8bb75ba1a57e36c86855169752e">MFnUnitAttribute::kTime</a>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">double</span> value;</div>
<div class="line">                plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">                clip &lt;&lt; value;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( attribute.<a class="code" href="#!/url=./cpp_ref/class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>( <a class="code" href="#!/url=./cpp_ref/class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a> ) )</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">short</span> value;</div>
<div class="line">        plug.<a class="code" href="#!/url=./cpp_ref/class_m_plug.html#a64f7093bfde5c5eb9d89b32635b772aa">getValue</a>(value,context);</div>
<div class="line">        clip &lt;&lt; value;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//this function returns a sorted list of items that we should save or import onto</span></div>
<div class="line"><span class="comment">//The problem is that we don&#39;t know the order of the objects returned by</span></div>
<div class="line"><span class="comment">//MGlobal::getActiveSelectionList, we also may need to include children, and we need to remove any</span></div>
<div class="line"><span class="comment">//shape nodes</span></div>
<div class="line"><span class="comment">//So we go through that selection list, add children, remove shapes, and save out a </span></div>
<div class="line"><span class="comment">//std::set of all of the dag node names we find.</span></div>
<div class="line"><span class="comment">//then we do a depth sort of the scene and if that dag node is in the set,</span></div>
<div class="line"><span class="comment">//we add it to the list. That way we get the dag orders always sorted in the same</span></div>
<div class="line"><span class="comment">//way no matter if we load or save. The depend ndoes</span></div>
<div class="line"><span class="keywordtype">void</span> SelectionGetter::getSelectedObjects(<span class="keywordtype">bool</span> includeChildren,<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> &amp;list, std::vector&lt;unsigned int&gt; &amp;depths)</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <a name="a186"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a6d81d38246555884897fb153c93aaf42">MGlobal::getActiveSelectionList</a>(list);</div>
<div class="line">        </div>
<div class="line">    std::set&lt;std::string&gt; nodeNames;</div>
<div class="line"></div>
<div class="line">    <a name="_a187"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html">MDagPath</a> path;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numObjects = list.<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line">    std::set&lt;std::string&gt;::const_iterator constIter;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = numObjects -1; i &gt; -1; --i) </div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (list.<a name="a188"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a16dda1a34d5f10be257d8421ac6deabd">getDagPath</a> (i, path) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> <span class="keywordtype">object</span> = path.<a name="a189"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ad1aa507eb8e63e89e8d46a0abc18aa8c">node</a>();</div>
<div class="line">            std::string str(path.<a name="a190"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ac4b316731c4019c927aa63731d4749e8">fullPathName</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">            constIter = nodeNames.end();</div>
<div class="line">            <span class="keywordflow">if</span>(nodeNames.find(str)== constIter)</div>
<div class="line">                nodeNames.insert(str);</div>
<div class="line">            <span class="keywordflow">if</span>(includeChildren) <span class="comment">//add children, if not in the nodenames already</span></div>
<div class="line">            {</div>
<div class="line">                <a name="_a191"></a><a class="code" href="#!/url=./cpp_ref/class_m_it_dag.html">MItDag</a> dagIt (<a name="a192"></a><a class="code" href="#!/url=./cpp_ref/class_m_it_dag.html#a1545968b4f810358b53ae9844bce6bd1a6e92a8757afce03be51397f0b518f4c5">MItDag::kDepthFirst</a>);</div>
<div class="line">                dagIt.reset(path,<a class="code" href="#!/url=./cpp_ref/class_m_it_dag.html#a1545968b4f810358b53ae9844bce6bd1a6e92a8757afce03be51397f0b518f4c5">MItDag::kDepthFirst</a>);</div>
<div class="line">                <span class="keywordflow">for</span> (dagIt.next(); !dagIt.isDone(); dagIt.next()) </div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html">MDagPath</a> path;</div>
<div class="line">                    <span class="keywordflow">if</span> (dagIt.getPath (path) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>) </div>
<div class="line">                    {</div>
<div class="line">                        <span class="keywordtype">object</span> = path.<a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ad1aa507eb8e63e89e8d46a0abc18aa8c">node</a>();</div>
<div class="line">                        std::string str(path.<a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ac4b316731c4019c927aa63731d4749e8">fullPathName</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">                        constIter = nodeNames.end();</div>
<div class="line">                        <span class="keywordflow">if</span>(nodeNames.find(str)== constIter)</div>
<div class="line">                            nodeNames.insert(str);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            list.<a name="a193"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#af05b9926a5e8e7b8e7a9e98a13c839b6">remove</a>(i); </div>
<div class="line">        }<span class="comment">//else not a dag node, leave it in  in the list.</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    constIter = nodeNames.end();</div>
<div class="line">    numObjects = list.<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>(); <span class="comment">//this is just leftover depend nodes now</span></div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = ((<span class="keywordtype">unsigned</span> int)nodeNames.size()) + numObjects;</div>
<div class="line">    depths.resize(size);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//depths for all depend nodes is 0</span></div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k =0; k&lt;numObjects;++k)</div>
<div class="line">        depths[k] =0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count = numObjects;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_it_dag.html">MItDag</a> dagIt (<a class="code" href="#!/url=./cpp_ref/class_m_it_dag.html#a1545968b4f810358b53ae9844bce6bd1a6e92a8757afce03be51397f0b518f4c5">MItDag::kDepthFirst</a>);</div>
<div class="line">    <span class="keywordflow">for</span> (dagIt.next(); !dagIt.isDone(); dagIt.next())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (dagIt.getPath (path) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> <span class="keywordtype">object</span> = path.<a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ad1aa507eb8e63e89e8d46a0abc18aa8c">node</a>();</div>
<div class="line">            std::string str(path.<a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#ac4b316731c4019c927aa63731d4749e8">fullPathName</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(nodeNames.find(str) != constIter ) </div>
<div class="line">            {</div>
<div class="line">                list.<a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a23929aeafb29672f2652128eac9c4dec">add</a>(path);</div>
<div class="line">                <span class="keywordflow">if</span>(count &lt; size)</div>
<div class="line">                    depths[count++] = dagIt.depth();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//atom template reader class</span></div>
<div class="line"><span class="keywordtype">void</span> atomTemplateReader::setTemplate(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;templateName, <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;viewName)</div>
<div class="line">{</div>
<div class="line">    fTemplateSet = <span class="keyword">false</span>;</div>
<div class="line">    <a name="_a194"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> result;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MS::kFailure</a>;</div>
<div class="line">    <span class="keywordflow">if</span>(viewName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>()==0) <span class="comment">//no view specified so query template</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> melCommand = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;containerTemplate -query -attributeList &quot;</span>) + templateName + <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">        status = <a name="a195"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a09e405631e7cf680f8ac9d934ad73434">MGlobal::executeCommand</a>(melCommand, result, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> melCommand = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;baseView -query -viewName &quot;</span>) + viewName + <span class="stringliteral">&quot; -itemList -itemInfo itemName &quot;</span></div>
<div class="line">        + templateName + <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">        status = <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a09e405631e7cf680f8ac9d934ad73434">MGlobal::executeCommand</a>(melCommand, result, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line">        <span class="keywordflow">if</span>(status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//okay get the list but everything may not be an attribute so we need to query the array of attributes</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> isAttribute;</div>
<div class="line">            melCommand = <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;baseView -query -viewName &quot;</span>) + viewName + <span class="stringliteral">&quot; -itemList -itemInfo itemIsAttribute &quot;</span></div>
<div class="line">        + templateName + <span class="stringliteral">&quot;;&quot;</span>;</div>
<div class="line">            status = <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a09e405631e7cf680f8ac9d934ad73434">MGlobal::executeCommand</a>(melCommand, isAttribute, <span class="keyword">false</span>, <span class="keyword">false</span> );</div>
<div class="line">            <span class="keywordflow">if</span>(status ==<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">//remove non attributes</span></div>
<div class="line">                <span class="keywordflow">if</span>(isAttribute.<a name="a196"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>()==result.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z = result.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>();</div>
<div class="line">                    <span class="keywordflow">do</span></div>
<div class="line">                    {</div>
<div class="line">                        --z;</div>
<div class="line">                        <span class="keywordflow">if</span>(isAttribute[z] == <span class="stringliteral">&quot;0&quot;</span>) <span class="comment">//not an attribute</span></div>
<div class="line">                            result.<a name="a197"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#af05b9926a5e8e7b8e7a9e98a13c839b6">remove</a>(z); <span class="comment">//remove it</span></div>
<div class="line">                    }<span class="keywordflow">while</span>( z &gt; 0);</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">//else not sure what todo if it&#39;s not the same size, should be an error with baseView, for now just leave the results alone.</span></div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (status ==<a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MS::kSuccess</a>) </div>
<div class="line">    {</div>
<div class="line">        fTemplateSet = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i =0;i &lt; result.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>();++i)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//use _ as the delimiter between the node name and the attribute, e.g. pSphere1_translateX.</span></div>
<div class="line">            <span class="comment">//since split doesn&#39;t work well with Name__name_attr we find the first _ by going backwards</span></div>
<div class="line">            <span class="comment">//use const char* since node names are always chars.</span></div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">char</span> * str = result[i].asChar();</div>
<div class="line">            <span class="keywordtype">int</span> len = (int)result[i].numChars();</div>
<div class="line">            <span class="keywordtype">int</span> z = len -1;</div>
<div class="line">            <span class="keywordflow">for</span>(; z &gt;=0; --z)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span>(str[z] == <span class="charliteral">&#39;_&#39;</span>)</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span>(z &lt; 1 || z == (len -1))</div>
<div class="line">                <span class="keywordflow">continue</span>; <span class="comment">//should never happen but dont want to crash</span></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> nodeName = result[i].substring(0,z-1);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attribute = result[i].substring(z+1,len-1);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>(nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#a580388f31f60c46fac867ca48a48da1e">length</a>() &gt;0) <span class="comment">//we have a node name</span></div>
<div class="line">            {</div>
<div class="line">                AttrMap::iterator p;</div>
<div class="line">                std::string stdNodeName(nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">                std::string stdAttrName(attribute.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">                p = fNodeAttrs.find(stdNodeName);</div>
<div class="line">                <span class="keywordflow">if</span>(p != fNodeAttrs.end())</div>
<div class="line">                {</div>
<div class="line">                    Attrs val = p-&gt;second;</div>
<div class="line">                    val.fAttrStrings.<a name="a198"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a3db31367f989449bb9b121cd734dc0df">insert</a>(stdAttrName);</div>
<div class="line">                    fNodeAttrs[stdNodeName] = val;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    Attrs val;</div>
<div class="line">                    val.fAttrStrings.insert(stdAttrName);</div>
<div class="line">                    fNodeAttrs[stdNodeName] =val;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomTemplateReader::findNode(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(fTemplateSet)</div>
<div class="line">    {</div>
<div class="line">        AttrMap::const_iterator p;</div>
<div class="line">        std::string stdNodeName(nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">        p = fNodeAttrs.find(stdNodeName);</div>
<div class="line">        <span class="keywordflow">return</span> (p != fNodeAttrs.end());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//not set so it&#39;s valid</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> atomTemplateReader::findNodeAndAttr(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;nodeName,<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;attribute)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(fTemplateSet)</div>
<div class="line">    {</div>
<div class="line">        std::string stdNodeName(nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">        std::string stdAttrName(attribute.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">        AttrMap::iterator p;</div>
<div class="line">        p = fNodeAttrs.find(stdNodeName);</div>
<div class="line">        <span class="keywordflow">if</span>(p != fNodeAttrs.end())</div>
<div class="line">        {</div>
<div class="line">            Attrs val = p-&gt;second;</div>
<div class="line">            std::set&lt;std::string&gt;::iterator iter = val.fAttrStrings.find(stdAttrName);</div>
<div class="line">            <span class="keywordflow">return</span> (iter != val.fAttrStrings.end());</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">//not set so it&#39;s valid</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> atomTemplateReader::attributesForNode(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>  &amp;nodeName)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> attributes(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span>(fTemplateSet)</div>
<div class="line">    {</div>
<div class="line">        std::string stdNodeName(nodeName.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">        AttrMap::iterator p;</div>
<div class="line">        p = fNodeAttrs.find(stdNodeName);</div>
<div class="line">        <span class="keywordflow">if</span>(p != fNodeAttrs.end())</div>
<div class="line">        {</div>
<div class="line">            Attrs val = p-&gt;second;</div>
<div class="line">            <span class="keywordflow">for</span>(std::set&lt;std::string&gt;::iterator iter = val.fAttrStrings.begin(); iter !=</div>
<div class="line">                val.fAttrStrings.end(); ++iter)</div>
<div class="line">            {</div>
<div class="line">                std::string val = *iter;</div>
<div class="line">                attributes += <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> (<span class="stringliteral">&quot; -at &quot;</span>) + <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(val.c_str()) + <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> attributes;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> atomTemplateReader::selectNodes()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(fTemplateSet)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line">        AttrMap::iterator iter;</div>
<div class="line">        <span class="keywordflow">for</span>(iter = fNodeAttrs.begin(); iter != fNodeAttrs.end();++iter)</div>
<div class="line">        {</div>
<div class="line">            std::string nodeName = iter-&gt;first;</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> mName(nodeName.c_str());</div>
<div class="line">            <span class="keywordflow">if</span>(first)</div>
<div class="line">            {</div>
<div class="line">                first = <span class="keyword">false</span>;</div>
<div class="line">                <a name="a199"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a79ff0a65cba431ef7f9ce25a112c075a">MGlobal::selectByName</a>( mName, <a name="a200"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a5b77552a306fb2b916ef75e34e1298d4a7f418bb5928b79c7e0222251461055a6">MGlobal::kReplaceList</a> );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_global.html#a79ff0a65cba431ef7f9ce25a112c075a">MGlobal::selectByName</a>( mName, <a name="a201"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a5b77552a306fb2b916ef75e34e1298d4adc09789778e2bb82b1121c0aab78da12">MGlobal::kAddToList</a> );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line">atomTemplateReader::~atomTemplateReader()</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    <span class="comment">//now we can clear the map</span></div>
<div class="line">    fNodeAttrs.clear();</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
          <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div><br></div>
   </div></body>
</html>
