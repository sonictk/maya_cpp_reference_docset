<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
   <head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
      <title>C++ API Reference: viewRenderOverride/viewRenderOverrideOperations.cpp</title>
      
	  
      
      
      
      
      
      
      
    

</head>
   <body height="100%"><div class="body_content" id="body-content"><link rel="stylesheet" type="text/css" href="cpp_ref/navtree.css"><link rel="stylesheet" type="text/css" href="cpp_ref/doxygen.css"><link rel="stylesheet" type="text/css" href="cpp_ref/tabs.css"><link rel="stylesheet" type="text/css" href="style/adsk.cpm.css"><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('view_render_override_2view_render_override_operations_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
      <div>
         <div class="head">
            <h1>C++ API Reference: viewRenderOverride/viewRenderOverrideOperations.cpp</h1>
         </div>

<div id="top"><!-- do not remove this div, it is closed by doxygen! -->

<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->

  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="#!/url=./cpp_ref/index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="#!/url=./cpp_ref/pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="#!/url=./cpp_ref/modules.html"><span>Modules</span></a></li>
      <li><a href="#!/url=./cpp_ref/namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="#!/url=./cpp_ref/annotated.html"><span>Classes</span></a></li>
      <li><a href="#!/url=./cpp_ref/examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="cpp_ref/search/mag_sel.png" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" alt="">
          <input type="text" id="MSearchField" value="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="cpp_ref/search/close.png" alt=""></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
  </div>
</div>

<div id="doc-content">
<!-- window showing the filter options -->


<!-- iframe showing the search results (closed by default) -->


<div class="header">
  <div class="headertitle">
<div class="title">viewRenderOverride/viewRenderOverrideOperations.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">// Copyright 2015 Autodesk, Inc.  All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk license agreement</span></div>
<div class="line"><span class="comment">// provided at the time of installation or download, or which otherwise</span></div>
<div class="line"><span class="comment">// accompanies this software in either electronic or hard copy form.</span></div>
<div class="line"><span class="comment">//+</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MIOStream.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MGlobal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MString.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MSelectionList.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MItSelectionList.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/M3dView.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPoint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MImage.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MViewport2Renderer.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MRenderTargetManager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MStateManager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MShaderManager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MTextureManager.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MDrawContext.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;viewRenderOverride.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">     Utilty to print out lighting information from a draw context</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span> viewRenderOverrideUtilities::printDrawContextLightInfo( <span class="keyword">const</span> <a name="_a0"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a> &amp; drawContext )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Get all the lighting information in the scene</span></div>
<div class="line">    MHWRender::MDrawContext::LightFilter considerAllSceneLights = MHWRender::MDrawContext::kFilteredIgnoreLightLimit;</div>
<div class="line">    <a name="a1"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#ad3ef90830d42d36701abb67d53748f08">MHWRender::MRenderer::needEvaluateAllLights</a>();</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lightCount = drawContext.<a name="a2"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html#a245ec3740263f7f3c076dd9c723141b7">numberOfActiveLights</a>(considerAllSceneLights);</div>
<div class="line">    <span class="keywordflow">if</span> (!lightCount)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    <a name="_a3"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_point_array.html">MFloatPointArray</a> positions;</div>
<div class="line">    <a name="_a4"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> position;</div>
<div class="line">    <a name="_a5"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_vector.html">MFloatVector</a> direction;</div>
<div class="line">    <a name="_a6"></a><a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a> color;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> positionCount = 0;</div>
<div class="line">    position[0] = position[1] = position[2] = 0.0f;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;lightCount; i++)</div>
<div class="line">    {</div>
<div class="line">        <a name="_a7"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html">MHWRender::MLightParameterInformation</a> *lightParam = drawContext.<a name="a8"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html#a05eaca3528290935c1b9ee55ae020c75">getLightParameterInformation</a>( i, considerAllSceneLights );</div>
<div class="line">        <span class="keywordflow">if</span> (lightParam)</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;\tLight %d\n\t{\n&quot;</span>, i);</div>
<div class="line"></div>
<div class="line">            <a name="_a9"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> params;</div>
<div class="line">            lightParam-&gt;<a name="a10"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aec00be694fc8d654f1f7a8ea823a7cea">parameterList</a>(params);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;params.<a name="a11"></a><a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); p++)</div>
<div class="line">            {</div>
<div class="line">                <a name="_a12"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> pname = params[p];</div>
<div class="line">                MHWRender::MLightParameterInformation::ParameterType ptype = lightParam-&gt;<a name="a13"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a5305e5705305b315f661ae2d13f0f38d">parameterType</a>( pname );</div>
<div class="line">                <a name="_a14"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_array.html">MFloatArray</a> floatVals;</div>
<div class="line">                <a name="_a15"></a><a class="code" href="#!/url=./cpp_ref/class_m_int_array.html">MIntArray</a> intVals;</div>
<div class="line">                <a name="_a16"></a><a class="code" href="#!/url=./cpp_ref/class_m_matrix.html">MMatrix</a> matrixVal;</div>
<div class="line">                <a name="_a17"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sampler_state_desc.html">MHWRender::MSamplerStateDesc</a> samplerDesc;</div>
<div class="line">                <span class="keywordflow">switch</span> (ptype)</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kBoolean:</div>
<div class="line">                    lightParam-&gt;<a name="a18"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, intVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Bool[%d]\n&quot;</span>, pname.<a name="a19"></a><a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        intVals[0]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kInteger:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, intVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Integer[%d]\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        intVals[0]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float[%g]\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        floatVals[0]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat2:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float[%g,%g]\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        floatVals[0], floatVals[1]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat3:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float3[%g,%g,%g]\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        floatVals[0], floatVals[1], floatVals[2]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat4:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float4[%g,%g,%g,%g]\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        floatVals[0], floatVals[1], floatVals[2], floatVals[3]);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat4x4Row:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, matrixVal );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float4x4Row [%g,%g,%g,%g]\n\t\t[%g,%g,%g,%g]\n\t\t[%g,%g,%g,%g]\n\t\t[%g,%g,%g,%g]\n&quot;</span>,</div>
<div class="line">                        pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        matrixVal[0][0], matrixVal[0][1], matrixVal[0][2], matrixVal[0][3],</div>
<div class="line">                        matrixVal[1][0], matrixVal[1][1], matrixVal[1][2], matrixVal[1][3],</div>
<div class="line">                        matrixVal[2][0], matrixVal[2][1], matrixVal[2][2], matrixVal[2][3],</div>
<div class="line">                        matrixVal[3][0], matrixVal[3][1], matrixVal[3][2], matrixVal[3][3]</div>
<div class="line">                    );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kFloat4x4Col:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, matrixVal );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight parameter %s. Float4x4Row\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>() );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kTexture2:</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kTextureCube:</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Get shadow map as a resource handle directly in OpenGL</span></div>
<div class="line">                        <span class="keywordtype">void</span> *handle = lightParam-&gt;<a name="a20"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aabc0d75c8960d98b6f8dbe31c777cf56">getParameterTextureHandle</a>( pname );</div>
<div class="line">                        printf(<span class="stringliteral">&quot;\t\tLight texture parameter %s. OpenGL texture id = %d\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                            *((<span class="keywordtype">int</span> *)handle));</div>
<div class="line">                        <span class="comment">// Similar access for DX would look something like this:</span></div>
<div class="line">                        <span class="comment">// (ID3D11ShaderResourceView *) lightParam-&gt;getParameterTextureHandle( pname );</span></div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kSampler:</div>
<div class="line">                    lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, samplerDesc );</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\tLight sampler parameter %s. filter = %d\n&quot;</span>, pname.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(),</div>
<div class="line">                        samplerDesc.<a name="a21"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sampler_state_desc.html#a0280d6ae8821c595d0300d0e65ca5adf">filter</a> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">// Do some discovery to map stock parameters to usable values</span></div>
<div class="line">                <span class="comment">// based on the semantic</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                MHWRender::MLightParameterInformation::StockParameterSemantic semantic = lightParam-&gt;<a name="a22"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a37a7621bc6d9453902d95132fbbe2101">parameterSemantic</a>( pname );</div>
<div class="line">                <span class="keywordflow">switch</span> (semantic)</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kLightEnabled:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : light enabled\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kWorldPosition:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : world position\n&quot;</span>);</div>
<div class="line">                    position += <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a>( floatVals[0], floatVals[1], floatVals[2] );</div>
<div class="line">                    positionCount++;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kWorldDirection:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : world direction\n&quot;</span>);</div>
<div class="line">                    direction = <a class="code" href="#!/url=./cpp_ref/class_m_float_vector.html">MFloatVector</a>( floatVals[0], floatVals[1], floatVals[2] );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kIntensity:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : intensity\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kColor:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : color\n&quot;</span>);</div>
<div class="line">                    color = <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( floatVals[0], floatVals[1], floatVals[2] );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kEmitsDiffuse:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : emits-diffuse\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kEmitsSpecular:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : emits-specular\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kDecayRate:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : decay rate\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kDropoff:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : drop-off\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kCosConeAngle:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : cosine cone angle\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowMap:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow map\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowSamp:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow map sampler\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowBias:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow map bias\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowMapSize:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow map size\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowViewProj:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow map view projection matrix\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowColor:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : shadow color\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kGlobalShadowOn:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : global shadows on \n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowOn:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : local shadows on\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kDepthRange:</div>
<div class="line">                    printf(<span class="stringliteral">&quot;\t\t- Parameter semantic : depth range\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Compute an average position</span></div>
<div class="line">            <span class="keywordflow">if</span> (positionCount &gt; 1)</div>
<div class="line">            {</div>
<div class="line">                position[0] /= (float)positionCount;</div>
<div class="line">                position[1] /= (float)positionCount;</div>
<div class="line">                position[2] /= (float)positionCount;</div>
<div class="line">                printf(<span class="stringliteral">&quot;\t\tCompute average position [%g,%g,%g]\n&quot;</span>, position[0],</div>
<div class="line">                    position[1], position[2]);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Print by semantic</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\tSemantic -&gt; Parameter Name Lookups\n&quot;</span>);</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> paramNames;</div>
<div class="line">            lightParam-&gt;<a name="a23"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kLightEnabled, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkLightEnabled -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_float_array.html">MFloatArray</a> floatVals;</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>(MHWRender::MLightParameterInformation::kLightEnabled, floatVals);</div>
<div class="line">            <span class="keywordflow">if</span> (floatVals.<a name="a24"></a><a class="code" href="#!/url=./cpp_ref/class_m_float_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>() &gt; 0) printf(<span class="stringliteral">&quot;(%f)&quot;</span>, floatVals[0]);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kWorldPosition, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkWorldPosition -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kWorldDirection, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkWorldDirection -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kIntensity, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkIntensity -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kColor, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkColor -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kEmitsDiffuse, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkEmitsDiffuse -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kEmitsSpecular, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkEmitsSpecular -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kDecayRate, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkDecayRate -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kDropoff, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkDropoff -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kCosConeAngle, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkCosConeAngle -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kIrradianceIn, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkIrradianceIn -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowMap, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowMap -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowSamp, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowSamp -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowBias, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowBias -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowMapSize, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowMapSize -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowColor, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowColor -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kGlobalShadowOn, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkGlobalShadowOn -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kShadowOn, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkShadowOn -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">            lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a00c252ce7a0daa2300cfc98fc3d12d1d">parameterNames</a>(MHWRender::MLightParameterInformation::kDepthRange, paramNames);</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\t\tkDepthRange -&gt; &quot;</span>);</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;%s &quot;</span>, paramNames[i].asChar());</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">            printf(<span class="stringliteral">&quot;\t}\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Custom present target operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// There is not much in this operation except to override which targets</span></div>
<div class="line"><span class="comment">// will be presented.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// This differs from scene and quad operations which generally</span></div>
<div class="line"><span class="comment">// use targets as the place to render into.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">viewRenderPresentTarget::viewRenderPresentTarget(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line">    : MPresentTarget( name )</div>
<div class="line">{</div>
<div class="line">    mTargets = NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">viewRenderPresentTarget::~viewRenderPresentTarget()</div>
<div class="line">{</div>
<div class="line">    mTargets = NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">viewRenderPresentTarget::setRenderTargets(<a name="_a25"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_target.html">MHWRender::MRenderTarget</a> **targets)</div>
<div class="line">{</div>
<div class="line">    mTargets = targets;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_target.html">MHWRender::MRenderTarget</a>* <span class="keyword">const</span>*</div>
<div class="line">viewRenderPresentTarget::targetOverrideList(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;listSize)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mTargets)</div>
<div class="line">    {</div>
<div class="line">        listSize = 2;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;mTargets[kMyColorTarget];</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Custom HUD operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> viewRenderHUDOperation::addUIDrawables( <a name="_a26"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager2D, <span class="keyword">const</span> <a name="_a27"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Start draw UI</span></div>
<div class="line">    drawManager2D.<a name="a28"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line">    <span class="comment">// Set font color</span></div>
<div class="line">    drawManager2D.<a name="a29"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.455f, 0.212f, 0.596f ) );</div>
<div class="line">    <span class="comment">// Set font size</span></div>
<div class="line">    drawManager2D.<a name="a30"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( MHWRender::MUIDrawManager::kSmallFontSize );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Draw renderer name</span></div>
<div class="line">    <span class="keywordtype">int</span> x=0, y=0, w=0, h=0;</div>
<div class="line">    frameContext.<a name="a31"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html#a7cd3b2dca6e4f8f4641b587bc642b08e">getViewportDimensions</a>( x, y, w, h );</div>
<div class="line">    drawManager2D.<a name="a32"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a name="_a33"></a><a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(w*0.5f, h*0.91f), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Sample VP2 Renderer Override&quot;</span>), MHWRender::MUIDrawManager::kCenter );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Draw viewport information</span></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> viewportInfoText( <span class="stringliteral">&quot;Viewport information: x= &quot;</span> );</div>
<div class="line">    viewportInfoText += x;</div>
<div class="line">    viewportInfoText += <span class="stringliteral">&quot;, y= &quot;</span>;</div>
<div class="line">    viewportInfoText += y;</div>
<div class="line">    viewportInfoText += <span class="stringliteral">&quot;, w= &quot;</span>;</div>
<div class="line">    viewportInfoText += w;</div>
<div class="line">    viewportInfoText += <span class="stringliteral">&quot;, h= &quot;</span>;</div>
<div class="line">    viewportInfoText += h;</div>
<div class="line">    drawManager2D.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>(w*0.5f, h*0.885f), viewportInfoText, MHWRender::MUIDrawManager::kCenter );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// End draw UI</span></div>
<div class="line">    drawManager2D.<a name="a34"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Custom quad operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Instances of this class are used to provide different</span></div>
<div class="line"><span class="comment">// shaders to be applied to a full screen quad.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">viewRenderQuadRender::viewRenderQuadRender(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line">    : MQuadRender( name )</div>
<div class="line">    , mShaderInstance(NULL)</div>
<div class="line">    , mShader(kEffectNone)</div>
<div class="line">{</div>
<div class="line">    mTargets = NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">viewRenderQuadRender::~viewRenderQuadRender()</div>
<div class="line">{</div>
<div class="line">    mTargets = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (mShaderInstance)</div>
<div class="line">    {</div>
<div class="line">        <a name="_a35"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a name="a36"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (renderer)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a name="_a37"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a>* shaderMgr = renderer-&gt;<a name="a38"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125">getShaderManager</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (shaderMgr)</div>
<div class="line">            {</div>
<div class="line">                shaderMgr-&gt;<a name="a39"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a0c7deb55edc231cbb2365b271ecd55f8">releaseShader</a>(mShaderInstance);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        mShaderInstance = NULL;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Return the appropriate shader instance based on the what</span></div>
<div class="line"><span class="comment">    we want the quad operation to perform</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">const</span> <a name="_a40"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a> *</div>
<div class="line">viewRenderQuadRender::shader()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Create a new shader instance for this quad render instance</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (mShaderInstance == NULL)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (renderer)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a>* shaderMgr = renderer-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125">getShaderManager</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (shaderMgr)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Note in the following code that we are not specifying the</span></div>
<div class="line">                <span class="comment">// full file name, but relying on the getEffectFileShader() logic</span></div>
<div class="line">                <span class="comment">// to determine the correct file name extension based on the shading language</span></div>
<div class="line">                <span class="comment">// which is appropriate for the drawing API (DirectX or OpenGL).</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// Refer to the documentation for this method to review how the</span></div>
<div class="line">                <span class="comment">// final name on disk is derived.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="comment">// The second argument here is the technique. If desired</span></div>
<div class="line">                <span class="comment">// and effect on disk can hold different techniques. For each unique</span></div>
<div class="line">                <span class="comment">// effect + technique a different shader instance is created.</span></div>
<div class="line">                <span class="comment">//</span></div>
<div class="line">                <span class="keywordflow">switch</span> (mShader)</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordflow">case</span> kPre_MandelBrot:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a name="a41"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;MandelBrot&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kPost_EffectMonochrome:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;FilterMonochrome&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kPost_EffectEdgeDetect:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;FilterEdgeDetect&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kPost_EffectInvert:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;Invert&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kScene_Threshold:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;Threshold&quot;</span>, <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kScene_BlurHoriz:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;Blur&quot;</span>, <span class="stringliteral">&quot;BlurHoriz&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kScene_BlurVert:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;Blur&quot;</span>, <span class="stringliteral">&quot;BlurVert&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">case</span> kSceneBlur_Blend:</div>
<div class="line">                    mShaderInstance = shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>( <span class="stringliteral">&quot;Blend&quot;</span>, <span class="stringliteral">&quot;Add&quot;</span> );</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set parameters on the shader instance.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// This is where the input render targets can be specified by binding</span></div>
<div class="line">    <span class="comment">// a render target to the appropriate parameter on the shader instance.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (mShaderInstance)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span> (mShader)</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> kPre_MandelBrot:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Example of a simple float parameter setting.</span></div>
<div class="line">                <a name="_a42"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gIterate&quot;</span>, 50);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a name="a43"></a><a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not change mandelbrot parameter\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kPost_EffectInvert:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gInputTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a name="_a44"></a><a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.<a name="a45"></a>target = mTargets[kMyColorTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gInputTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on invert shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kScene_Threshold:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gSourceTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyColorTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gSourceTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on threshold shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">                mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gBrightThreshold&quot;</span>, 0.7f );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kScene_BlurHoriz:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gSourceTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyBlurTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gSourceTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on hblur shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kScene_BlurVert:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gSourceTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyBlurTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gSourceTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on vblur shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kSceneBlur_Blend:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the first input texture parameter &#39;gSourceTex&#39; to use</span></div>
<div class="line">                <span class="comment">// one color target.</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyColorTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gSourceTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// Set the second input texture parameter &#39;gSourceTex2&#39; to use</span></div>
<div class="line">                <span class="comment">// a second color target.</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment2;</div>
<div class="line">                assignment2.target = mTargets[kMyBlurTarget];</div>
<div class="line">                status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gSourceTex2&quot;</span>, assignment2);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">                mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gBlendSrc&quot;</span>, 0.3f );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kPost_EffectMonochrome:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gInputTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyColorTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gInputTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on monochrome shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">case</span> kPost_EffectEdgeDetect:</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the input texture parameter &#39;gInputTex&#39; to use</span></div>
<div class="line">                <span class="comment">// a given color target</span></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_render_target_assignment.html">MHWRender::MRenderTargetAssignment</a> assignment;</div>
<div class="line">                assignment.target = mTargets[kMyColorTarget];</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gInputTex&quot;</span>, assignment);</div>
<div class="line">                <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Could not set input render target / texture parameter on edge detect shader\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> NULL;</div>
<div class="line">                }</div>
<div class="line">                mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gThickness&quot;</span>, 1.0f );</div>
<div class="line">                mShaderInstance-&gt;setParameter(<span class="stringliteral">&quot;gThreshold&quot;</span>, 0.1f );</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> mShaderInstance;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Based on which shader is being used for the quad render</span></div>
<div class="line"><span class="comment">    we want to render to different targets. For the</span></div>
<div class="line"><span class="comment">    threshold and two blur shaders the temporary &#39;blur&#39;</span></div>
<div class="line"><span class="comment">    target is used. Otherwise rendering should be directed</span></div>
<div class="line"><span class="comment">    to the custom color and depth target.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_target.html">MHWRender::MRenderTarget</a>* <span class="keyword">const</span>*</div>
<div class="line">viewRenderQuadRender::targetOverrideList(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;listSize)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mTargets)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Render to blur target for blur operations</span></div>
<div class="line">        <span class="keywordflow">if</span> (mShader == kScene_Threshold ||</div>
<div class="line">            mShader == kScene_BlurHoriz ||</div>
<div class="line">            mShader == kScene_BlurVert )</div>
<div class="line">        {</div>
<div class="line">            listSize = 1; <span class="comment">// Only to color target</span></div>
<div class="line">            <span class="keywordflow">return</span> &amp;mTargets[kMyBlurTarget];</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Render to final otherwise</span></div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            listSize = 2; <span class="comment">// 2nd target is depth</span></div>
<div class="line">            <span class="keywordflow">return</span> &amp;mTargets[kMyColorTarget];</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Set the clear override to use.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><a name="_a46"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html">MHWRender::MClearOperation</a> &amp;</div>
<div class="line">viewRenderQuadRender::clearOperation()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Want to clear everything since the quad render is the first operation.</span></div>
<div class="line">    <span class="keywordflow">if</span> (mShader == kPre_MandelBrot)</div>
<div class="line">    {</div>
<div class="line">        mClearOperation.<a name="a47"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html#a0eb426378a3484ea204ea50ad2daa547">setClearGradient</a>( <span class="keyword">false</span> );</div>
<div class="line">        mClearOperation.setMask( (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) MHWRender::MClearOperation::kClearAll );</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// This is a post processing operation, so we don&#39;t want to clear anything</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        mClearOperation.setClearGradient( <span class="keyword">false</span> );</div>
<div class="line">        mClearOperation.setMask( (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) MHWRender::MClearOperation::kClearNone );</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> mClearOperation;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Simple scene operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//  Example of just overriding a few options on the scene render.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">simpleViewRenderSceneRender::simpleViewRenderSceneRender(<span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name)</div>
<div class="line">    : MSceneRender( name )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// 100 % of target size</span></div>
<div class="line">    mViewRectangle[0] = 0.0f;</div>
<div class="line">    mViewRectangle[1] = 0.0f;</div>
<div class="line">    mViewRectangle[2] = 1.0f;</div>
<div class="line">    mViewRectangle[3] = 1.0f;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_float_point.html">MFloatPoint</a> *</div>
<div class="line">simpleViewRenderSceneRender::viewportRectangleOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Enable this flag to use viewport sizing</span></div>
<div class="line">    <span class="keywordtype">bool</span> testRectangleSize = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (testRectangleSize)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// 1/3 to the right and 10 % up. 1/2 the target size.</span></div>
<div class="line">        mViewRectangle[0] = 0.33f;</div>
<div class="line">        mViewRectangle[1] = 0.10f;</div>
<div class="line">        mViewRectangle[2] = 0.50f;</div>
<div class="line">        mViewRectangle[3] = 0.50f;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> &amp;mViewRectangle;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html">MHWRender::MClearOperation</a> &amp;</div>
<div class="line">simpleViewRenderSceneRender::clearOperation()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Override to clear to these gradient colors</span></div>
<div class="line">    <span class="keywordtype">float</span> val1[4] = { 0.0f, 0.2f, 0.8f, 1.0f };</div>
<div class="line">    <span class="keywordtype">float</span> val2[4] = { 0.5f, 0.4f, 0.1f, 1.0f };</div>
<div class="line">    mClearOperation.<a name="a48"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html#ac1c51886d1696805576d1356f44d2668">setClearColor</a>( val1 );</div>
<div class="line">    mClearOperation.setClearColor2( val2 );</div>
<div class="line">    mClearOperation.setClearGradient( <span class="keyword">true</span> );</div>
<div class="line">    <span class="keywordflow">return</span> mClearOperation;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Custom scene operation</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Some example things that can be done with the operation are</span></div>
<div class="line"><span class="comment">// included here but disabled. They are here as examples only</span></div>
<div class="line"><span class="comment">// and not all are used for the overrall render loop logic.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">viewRenderSceneRender::viewRenderSceneRender(</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp;name,</div>
<div class="line">    MHWRender::MSceneRender::MSceneFilterOption sceneFilter,</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> clearMask)</div>
<div class="line">: MSceneRender(name)</div>
<div class="line">, mSceneFilter(sceneFilter)</div>
<div class="line">, mClearMask(clearMask)</div>
<div class="line">, mEnableSRGBWrite(false)</div>
<div class="line">{</div>
<div class="line">    mPrevDisplayStyle = M3dView::kGouraudShaded;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// 100 % of target size</span></div>
<div class="line">    mViewRectangle[0] = 0.0f;</div>
<div class="line">    mViewRectangle[1] = 0.0f;</div>
<div class="line">    mViewRectangle[2] = 1.0f;</div>
<div class="line">    mViewRectangle[3] = 1.0f;</div>
<div class="line"></div>
<div class="line">    mTargets = NULL;</div>
<div class="line"></div>
<div class="line">    mShaderOverride = NULL;</div>
<div class="line"></div>
<div class="line">    mUseShaderOverride = <span class="keyword">false</span>;</div>
<div class="line">    mUseStockShaderOverride = <span class="keyword">false</span>;</div>
<div class="line">    mAttachPrePostShaderCallback = <span class="keyword">false</span>;</div>
<div class="line">    mUseShadowShader = <span class="keyword">false</span>;</div>
<div class="line">    mOverrideDisplayMode = <span class="keyword">true</span>;</div>
<div class="line">    mOverrideDisplayModeFlatActive = <span class="keyword">false</span>;</div>
<div class="line">    mOverrideLightingMode = <span class="keyword">false</span>;</div>
<div class="line">    mOverrideCullingMode = <span class="keyword">false</span>;</div>
<div class="line">    mOverrrideM3dViewDisplayMode = <span class="keyword">false</span>;</div>
<div class="line">    mDebugTargetResourceHandle = <span class="keyword">false</span>;</div>
<div class="line">    mFilterDrawNothing = <span class="keyword">false</span>;</div>
<div class="line">    mFilterDrawSelected = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">viewRenderSceneRender::~viewRenderSceneRender()</div>
<div class="line">{</div>
<div class="line">    mTargets = NULL;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (mShaderOverride)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (renderer)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a>* shaderMgr = renderer-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125">getShaderManager</a>();</div>
<div class="line">            <span class="keywordflow">if</span> (shaderMgr)</div>
<div class="line">            {</div>
<div class="line">                shaderMgr-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a0c7deb55edc231cbb2365b271ecd55f8">releaseShader</a>(mShaderOverride);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        mShaderOverride = NULL;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Pre UI draw</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span> viewRenderSceneRender::addPreUIDrawables( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext  )</div>
<div class="line">{</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.1f, 0.5f, 0.95f ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( MHWRender::MUIDrawManager::kSmallFontSize );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Pre UI draw test in Scene operation&quot;</span>), MHWRender::MUIDrawManager::kRight );</div>
<div class="line">    drawManager.<a name="a49"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 0, -2 ), <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 1.0f, 1.0f, 1.0f ) );</div>
<div class="line">    drawManager.<a name="a50"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), 0.8, <span class="keyword">false</span> );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.1f, 0.5f, 0.95f, 0.4f ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( -2, 2, -2 ), 0.8, <span class="keyword">true</span> );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Post UI draw</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span> viewRenderSceneRender::addPostUIDrawables( <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html">MHWRender::MUIDrawManager</a>&amp; drawManager, <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html">MHWRender::MFrameContext</a>&amp; frameContext  )</div>
<div class="line">{</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9">beginDrawable</a>();</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.05f, 0.95f, 0.34f ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67">setFontSize</a>( MHWRender::MUIDrawManager::kSmallFontSize );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4">text</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a>(<span class="stringliteral">&quot;Post UI draw test in Scene operation&quot;</span>), MHWRender::MUIDrawManager::kLeft );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#abe48ac82aa2ede6d0efd3c9cfadb068c">line</a>( <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 0, 2), <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 1.0f, 1.0f, 1.0f ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), 0.8, <span class="keyword">false</span> );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d">setColor</a>( <a class="code" href="#!/url=./cpp_ref/class_m_color.html">MColor</a>( 0.05f, 0.95f, 0.34f, 0.4f ) );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a3c2219cf077b63cbf547d305ba58fe29">sphere</a>(  <a class="code" href="#!/url=./cpp_ref/class_m_point.html">MPoint</a>( 2, 2, 2 ), 0.8, <span class="keyword">true</span> );</div>
<div class="line">    drawManager.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6">endDrawable</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Keep a reference of per-frame render targets on the operation</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">viewRenderSceneRender::setRenderTargets(<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_target.html">MHWRender::MRenderTarget</a> **targets)</div>
<div class="line">{</div>
<div class="line">    mTargets = targets;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Offscreen target override.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    For this render loop the scene render will always render to</span></div>
<div class="line"><span class="comment">    an offscreen color and depth target (listSize returned = 2).</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_target.html">MHWRender::MRenderTarget</a>* <span class="keyword">const</span>*</div>
<div class="line">viewRenderSceneRender::targetOverrideList(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp;listSize)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mTargets)</div>
<div class="line">    {</div>
<div class="line">        listSize = 2;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;mTargets[kMyColorTarget];</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Indicate whether to enable SRGB write</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">bool</span> viewRenderSceneRender::enableSRGBWrite()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> mEnableSRGBWrite;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Sample of accessing the view to get a camera path and using that as</span></div>
<div class="line"><span class="comment">    the camera override. Other camera paths or direct matrix setting</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">const</span> <a name="_a51"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_camera_override.html">MHWRender::MCameraOverride</a> *</div>
<div class="line">viewRenderSceneRender::cameraOverride()</div>
<div class="line">{</div>
<div class="line">    <a name="_a52"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> mView;</div>
<div class="line">    <span class="keywordflow">if</span> (mPanelName.length() &amp;&amp;</div>
<div class="line">        (<a name="a53"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a6f8dcac6993b14738fc6259cfd50a3b8">M3dView::getM3dViewFromModelPanel</a>(mPanelName, mView) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>))</div>
<div class="line">    {</div>
<div class="line">        mView.<a name="a54"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a5e6ea41ec1bab5ed980b2ddffe398a73">getCamera</a>( mCameraOverride.mCameraPath );</div>
<div class="line">        <span class="keywordflow">return</span> &amp;mCameraOverride;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;\t%s : Query custom scene camera override -- no override set\n&quot;</span>, mName.asChar());</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Depending on what is required either the scene filter will return whether</span></div>
<div class="line"><span class="comment">    to draw the opaque, transparent of non-shaded (UI) items.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">MHWRender::MSceneRender::MSceneFilterOption</div>
<div class="line">viewRenderSceneRender::renderFilterOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> mSceneFilter;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example display mode override. In this example we override so that</span></div>
<div class="line"><span class="comment">    the scene will always be drawn in &quot;shaded&quot; or &quot;flat shade selected&quot; mode </span></div>
<div class="line"><span class="comment">    and in bounding box mode (bounding boxes will also be drawn). This is fact not a</span></div>
<div class="line"><span class="comment">    &#39;regular&#39; viewport display mode available from the viewport menus.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">MHWRender::MSceneRender::MDisplayMode</div>
<div class="line">viewRenderSceneRender::displayModeOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mOverrideDisplayMode)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (mOverrideDisplayModeFlatActive)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> (MHWRender::MSceneRender::MDisplayMode)</div>
<div class="line">                ( MHWRender::MSceneRender::kBoundingBox |</div>
<div class="line">                MHWRender::MSceneRender::kFlatShaded | </div>
<div class="line">                MHWRender::MSceneRender::kShadeActiveOnly);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> (MHWRender::MSceneRender::MDisplayMode)</div>
<div class="line">                ( MHWRender::MSceneRender::kBoundingBox |</div>
<div class="line">                MHWRender::MSceneRender::kShaded );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> MHWRender::MSceneRender::kNoDisplayModeOverride;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example Lighting mode override. In this example</span></div>
<div class="line"><span class="comment">    the override would set to draw with only selected lights.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">MHWRender::MSceneRender::MLightingMode</div>
<div class="line">viewRenderSceneRender::lightModeOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mOverrideLightingMode)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> MHWRender::MSceneRender::kSelectedLights;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> MHWRender::MSceneRender::kNoLightingModeOverride;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example culling mode override. When enable</span></div>
<div class="line"><span class="comment">    this example would force to cull backfacing</span></div>
<div class="line"><span class="comment">    polygons.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">MHWRender::MSceneRender::MCullingOption</div>
<div class="line">viewRenderSceneRender::cullingOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mOverrideCullingMode)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span> MHWRender::MSceneRender::kCullBackFaces;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> MHWRender::MSceneRender::kNoCullingOverride;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Per scene operation pre-render.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    In this example the display style for the given panel / view</span></div>
<div class="line"><span class="comment">    M3dView is set to be consistent with the draw override</span></div>
<div class="line"><span class="comment">    for the scene operation.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">viewRenderSceneRender::preRender()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> ( mOverrrideM3dViewDisplayMode )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> mView;</div>
<div class="line">        <span class="keywordflow">if</span> (mPanelName.length() &amp;&amp;</div>
<div class="line">            (<a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a6f8dcac6993b14738fc6259cfd50a3b8">M3dView::getM3dViewFromModelPanel</a>(mPanelName, mView) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>))</div>
<div class="line">        {</div>
<div class="line">            mPrevDisplayStyle = mView.<a name="a55"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#afb7d316c985d928b3095eaf25ba818a3">displayStyle</a>();</div>
<div class="line">            mView.<a name="a56"></a><a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a22744817eafc94f0cb55c0cc9ac7188d">setDisplayStyle</a>( M3dView::kGouraudShaded );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Post-render example.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    In this example we can debug the resource handle of the active render target</span></div>
<div class="line"><span class="comment">    after this operation. The matching for for the pre-render M3dView override</span></div>
<div class="line"><span class="comment">    also resides here to restore the M3dView state.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">viewRenderSceneRender::postRender()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mDebugTargetResourceHandle)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get the id&#39;s for the textures which are used as the color and</span></div>
<div class="line">        <span class="comment">// depth render targets. These id&#39;s could arbitrarily change</span></div>
<div class="line">        <span class="comment">// so they should not be held on to.</span></div>
<div class="line">        <span class="keywordtype">void</span> * colorResourceHandle = (mTargets[kMyColorTarget]) ? mTargets[kMyColorTarget]-&gt;resourceHandle() : NULL;</div>
<div class="line">        <span class="keywordflow">if</span> (colorResourceHandle)</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t - Color target resource handle = %d\n&quot;</span>, *( (<span class="keywordtype">int</span> *)colorResourceHandle) );</div>
<div class="line">        <span class="keywordtype">void</span> * depthStencilResourceHandle = (mTargets[kMyDepthTarget]) ? mTargets[kMyDepthTarget]-&gt;resourceHandle() : NULL;</div>
<div class="line">        <span class="keywordflow">if</span> (depthStencilResourceHandle)</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t - Depth target resource handle = %d\n&quot;</span>, *( (<span class="keywordtype">int</span> *)depthStencilResourceHandle) );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Example of set the display style for the given panel / view</span></div>
<div class="line">    <span class="comment">// via M3dView vs using the scene operation override</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> ( mOverrrideM3dViewDisplayMode )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m3d_view.html">M3dView</a> mView;</div>
<div class="line">        <span class="keywordflow">if</span> (mPanelName.length() &amp;&amp;</div>
<div class="line">            (<a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a6f8dcac6993b14738fc6259cfd50a3b8">M3dView::getM3dViewFromModelPanel</a>(mPanelName, mView) == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Simple example of restoring display style</span></div>
<div class="line">            mView.<a class="code" href="#!/url=./cpp_ref/class_m3d_view.html#a22744817eafc94f0cb55c0cc9ac7188d">setDisplayStyle</a>( mPrevDisplayStyle );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Object type exclusions example.</span></div>
<div class="line"><span class="comment">    In this example we want to hide cameras and the grid (ground plane)</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line">MUint64</div>
<div class="line">viewRenderSceneRender::getObjectTypeExclusions()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Example of hiding by type.</span></div>
<div class="line">    <span class="keywordflow">return</span> <a name="a57"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html#a2265439f1faefdf8bf923c219f2624f0">MHWRender::MFrameContext::kExcludeCameras</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example scene override logic.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    In this example, the scene to draw can be filtered by a returned</span></div>
<div class="line"><span class="comment">    selection list. If an empty selection list is returned then we can</span></div>
<div class="line"><span class="comment">    essentially disable scene drawing. The other option coded here</span></div>
<div class="line"><span class="comment">    is to look at the current active selection list and return that.</span></div>
<div class="line"><span class="comment">    This results in only rendering what has been selected by the user</span></div>
<div class="line"><span class="comment">    when this operation is executed.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    If this filtering is required across more than one operation it</span></div>
<div class="line"><span class="comment">    is better to precompute these values in the setup phase of</span></div>
<div class="line"><span class="comment">    override and cache the information per operation as required.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">const</span> <a name="_a58"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> *</div>
<div class="line">viewRenderSceneRender::objectSetOverride()</div>
<div class="line">{</div>
<div class="line">    mSelectionList.<a name="a59"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#ad5522f028dde0080b753279426415a4a">clear</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If you set this to true you can make the</span></div>
<div class="line">    <span class="comment">// scene draw draw no part of the scene, only the</span></div>
<div class="line">    <span class="comment">// additional UI elements</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (mFilterDrawNothing)</div>
<div class="line">        <span class="keywordflow">return</span> &amp;mSelectionList;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Turn this on to query the active list and only</span></div>
<div class="line">    <span class="comment">// use that for drawing</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">if</span> (mFilterDrawSelected)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html">MSelectionList</a> selList;</div>
<div class="line">        <a name="a60"></a><a class="code" href="#!/url=./cpp_ref/class_m_global.html#a6d81d38246555884897fb153c93aaf42">MGlobal::getActiveSelectionList</a>( selList );</div>
<div class="line">        <span class="keywordflow">if</span> (selList.<a name="a61"></a><a class="code" href="#!/url=./cpp_ref/class_m_selection_list.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>())</div>
<div class="line">        {</div>
<div class="line">            <a name="_a62"></a><a class="code" href="#!/url=./cpp_ref/class_m_it_selection_list.html">MItSelectionList</a> iter( selList );</div>
<div class="line">            <span class="keywordflow">for</span> ( ; !iter.isDone(); iter.next() )</div>
<div class="line">            {</div>
<div class="line">                <a name="_a63"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html">MDagPath</a> item;</div>
<div class="line">                <a name="_a64"></a><a class="code" href="#!/url=./cpp_ref/class_m_object.html">MObject</a> component;</div>
<div class="line">                iter.getDagPath( item, component );</div>
<div class="line">                <span class="comment">/* MStatus sStatus = */</span> mSelectionList.add( item, component );</div>
<div class="line">                <span class="comment">/*</span></div>
<div class="line"><span class="comment">                if (sStatus == MStatus::kSuccess)</span></div>
<div class="line"><span class="comment">                {</span></div>
<div class="line"><span class="comment">                printf(&quot;Add selection item to other list\n&quot;);</span></div>
<div class="line"><span class="comment">                }</span></div>
<div class="line"><span class="comment">                else if (sStatus == MStatus::kInvalidParameter)</span></div>
<div class="line"><span class="comment">                {</span></div>
<div class="line"><span class="comment">                printf(&quot;Can&#39;t Add invalid selection item to other list\n&quot;);</span></div>
<div class="line"><span class="comment">                }</span></div>
<div class="line"><span class="comment">                else</span></div>
<div class="line"><span class="comment">                printf(&quot;Can&#39;t Add selection item to other list\n&quot;);</span></div>
<div class="line"><span class="comment">                */</span></div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (mSelectionList.length())</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t%s : Filtering render with active object list\n&quot;</span>,</div>
<div class="line">                mName.asChar());</div>
<div class="line">            <span class="keywordflow">return</span> &amp;mSelectionList;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Custom clear override.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    Depending on whether we are drawing the &quot;UI&quot; or &quot;non-UI&quot;</span></div>
<div class="line"><span class="comment">    parts of the scene we will clear different channels.</span></div>
<div class="line"><span class="comment">    Color is never cleared since there is a separate operation</span></div>
<div class="line"><span class="comment">    to clear the background.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html">MHWRender::MClearOperation</a> &amp;</div>
<div class="line">viewRenderSceneRender::clearOperation()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (    mSceneFilter &amp;</div>
<div class="line">        (   MHWRender::MSceneRender::kRenderOpaqueShadedItems | </div>
<div class="line">            MHWRender::MSceneRender::kRenderTransparentShadedItems |</div>
<div class="line">            MHWRender::MSceneRender::kRenderUIItems) ){</div>
<div class="line"></div>
<div class="line">            mClearOperation.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_clear_operation.html#a0eb426378a3484ea204ea50ad2daa547">setClearGradient</a>(<span class="keyword">false</span>);</div>
<div class="line">    } <span class="keywordflow">else</span>{</div>
<div class="line">        <span class="comment">// Force a gradient clear with some sample colors.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordtype">float</span> val1[4] = { 0.0f, 0.2f, 0.8f, 1.0f };</div>
<div class="line">        <span class="keywordtype">float</span> val2[4] = { 0.5f, 0.4f, 0.1f, 1.0f };</div>
<div class="line">        mClearOperation.setClearColor(val1);</div>
<div class="line">        mClearOperation.setClearColor2(val2);</div>
<div class="line">        mClearOperation.setClearGradient(<span class="keyword">true</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    mClearOperation.setMask(mClearMask);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> mClearOperation;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Return shadow override. For the UI pass we don&#39;t want to compute shadows.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">bool</span>* viewRenderSceneRender::shadowEnableOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> ( (mSceneFilter &amp; MHWRender::MSceneRender::kRenderShadedItems) == 0 )</div>
<div class="line">    {</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> noShadowsForUI = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;noShadowsForUI; <span class="comment">// UI doesn&#39;t need shadows</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// For all other cases, just use whatever is currently set</span></div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Shader override helpers:</span></div>
<div class="line"><span class="comment">// As part of a shader override it is possible to attach callbacks which</span></div>
<div class="line"><span class="comment">// are invoked when the shader is to be used. The following are some examples</span></div>
<div class="line"><span class="comment">// of what could be performed.</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example utility used by a callback to:</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    1. Print out the shader parameters for a give MShaderInsrtance</span></div>
<div class="line"><span class="comment">    2. Examine the list of render items which will be rendered with this MShaderInstance</span></div>
<div class="line"><span class="comment">    3. Examine the pass context and print out information in the context.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> callbackDataPrint(</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a>&amp; context,</div>
<div class="line">    <span class="keyword">const</span> <a name="_a65"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html">MHWRender::MRenderItemList</a>&amp; renderItemList,</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a> *shaderInstance)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (shaderInstance)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> paramNames;</div>
<div class="line">        shaderInstance-&gt;<a name="a66"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aec00be694fc8d654f1f7a8ea823a7cea">parameterList</a>( paramNames );</div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> paramCount = paramNames.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>();</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tSHADER: # of parameters = %d\n&quot;</span>, paramCount );</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;paramCount; i++)</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;\t\tPARAM[%s]\n&quot;</span>, paramNames[i].asChar());</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">int</span> numItems = renderItemList.<a name="a67"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html#a57b988236ee6a3a5e572d126d3fbccc1">length</a>();</div>
<div class="line">    <span class="keyword">const</span> <a name="_a68"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html">MHWRender::MRenderItem</a>* item = NULL;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numItems; i++)</div>
<div class="line">    {</div>
<div class="line">        item = renderItemList.<a name="a69"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html#a82ed5d7ae96a2890f5f54f697bb0bab0">itemAt</a>(i);</div>
<div class="line">        <span class="keywordflow">if</span> (item)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html">MDagPath</a> path = item-&gt;<a name="a70"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a9452c2cfed46b5c1977568eb5b225930">sourceDagPath</a>();</div>
<div class="line">            printf(<span class="stringliteral">&quot;\tRENDER ITEM: &#39;%s&#39; -- SOURCE: &#39;%s&#39;\n&quot;</span>, item-&gt;<a name="a71"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#aca2cba4630391c78dcf1a828986160da">name</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>(), path.<a name="a72"></a><a class="code" href="#!/url=./cpp_ref/class_m_dag_path.html#a7cffb69661adc6ae7ac9e03c297caf01">fullPathName</a>().<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a name="_a73"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_pass_context.html">MHWRender::MPassContext</a> &amp; passCtx = context.<a name="a74"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html#ad3f9422688a9ffbe815c374ece46c1ea">getPassContext</a>();</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> &amp; passId = passCtx.<a name="a75"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_pass_context.html#ae90d4b4c8175e81800d8eb16ee126e1f">passIdentifier</a>();</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> &amp; passSem = passCtx.<a name="a76"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_pass_context.html#a9737189d5cfffd795336d711a678d627">passSemantics</a>();</div>
<div class="line">    printf(<span class="stringliteral">&quot;PASS ID[%s], PASS SEMANTICS[&quot;</span>, passId.<a class="code" href="#!/url=./cpp_ref/class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;passSem.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); i++)</div>
<div class="line">        printf(<span class="stringliteral">&quot; %s&quot;</span>, passSem[i].asChar());</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example utility used by callback to bind lighting information to a shader instance.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    This callback works specific with the MayaBlinnDirectionLightShadow shader example.</span></div>
<div class="line"><span class="comment">    It will explicitly binding lighting and shadowing information to the shader instance.</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> shaderOverrideCallbackBindLightingInfo(</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a>&amp; drawContext,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html">MHWRender::MRenderItemList</a>&amp; renderItemList,</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a> *shaderInstance)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!shaderInstance)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Defaults in case there are no lights</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordtype">bool</span> globalShadowsOn = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> localShadowsOn = <span class="keyword">false</span>;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_float_vector.html">MFloatVector</a> direction(0.0f, 0.0f, 1.0f);</div>
<div class="line">    <span class="keywordtype">float</span> lightIntensity = 0.0f; <span class="comment">// If no lights then black out the light</span></div>
<div class="line">    <span class="keywordtype">float</span> lightColor[3] = { 0.0f, 0.0f, 0.0f };</div>
<div class="line"></div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Scan to find the first light that has a direction component in it</span></div>
<div class="line">    <span class="comment">// It&#39;s possible we find no lights.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    MHWRender::MDrawContext::LightFilter considerAllSceneLights = MHWRender::MDrawContext::kFilteredIgnoreLightLimit;</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#ad3ef90830d42d36701abb67d53748f08">MHWRender::MRenderer::needEvaluateAllLights</a>();</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lightCount = drawContext.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html#a245ec3740263f7f3c076dd9c723141b7">numberOfActiveLights</a>(considerAllSceneLights);</div>
<div class="line">    <span class="keywordflow">if</span> (lightCount)</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_float_array.html">MFloatArray</a> floatVals;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_int_array.html">MIntArray</a> intVals;</div>
<div class="line">        <a name="_a77"></a><a class="code" href="#!/url=./cpp_ref/struct_m_h_w_render_1_1_m_texture_assignment.html">MHWRender::MTextureAssignment</a> shadowResource;</div>
<div class="line">        shadowResource.<a name="a78"></a>texture = NULL;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sampler_state_desc.html">MHWRender::MSamplerStateDesc</a> samplerDesc;</div>
<div class="line">        <a class="code" href="#!/url=./cpp_ref/class_m_matrix.html">MMatrix</a> shadowViewProj;</div>
<div class="line">        <span class="keywordtype">float</span> shadowColor[3] = { 0.0f, 0.0f, 0.0f };</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;</div>
<div class="line">        <span class="keywordtype">bool</span> foundDirectional = <span class="keyword">false</span>;</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;lightCount &amp;&amp; !foundDirectional ; i++)</div>
<div class="line">        {</div>
<div class="line">            globalShadowsOn = <span class="keyword">false</span>;</div>
<div class="line">            localShadowsOn = <span class="keyword">false</span>;</div>
<div class="line">            direction = <a class="code" href="#!/url=./cpp_ref/class_m_float_vector.html">MFloatVector</a>(0.0f, 0.0f, 1.0f);</div>
<div class="line">            lightIntensity = 0.0f;</div>
<div class="line">            lightColor[0] = lightColor[1] = lightColor[2] = 0.0f;</div>
<div class="line"></div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html">MHWRender::MLightParameterInformation</a> *lightParam = drawContext.<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html#a05eaca3528290935c1b9ee55ae020c75">getLightParameterInformation</a>( i, considerAllSceneLights );</div>
<div class="line">            <span class="keywordflow">if</span> (lightParam)</div>
<div class="line">            {</div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_string_array.html">MStringArray</a> params;</div>
<div class="line">                lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aec00be694fc8d654f1f7a8ea823a7cea">parameterList</a>(params);</div>
<div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;params.<a class="code" href="#!/url=./cpp_ref/class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>(); p++)</div>
<div class="line">                {</div>
<div class="line">                    <a class="code" href="#!/url=./cpp_ref/class_m_string.html">MString</a> pname = params[p];</div>
<div class="line"></div>
<div class="line">                    MHWRender::MLightParameterInformation::StockParameterSemantic semantic = lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#a37a7621bc6d9453902d95132fbbe2101">parameterSemantic</a>( pname );</div>
<div class="line">                    <span class="keywordflow">switch</span> (semantic)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Pick a few light parameters to pick up as an example</span></div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kWorldDirection:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                        direction = <a class="code" href="#!/url=./cpp_ref/class_m_float_vector.html">MFloatVector</a>( floatVals[0], floatVals[1], floatVals[2] );</div>
<div class="line">                        foundDirectional = <span class="keyword">true</span>;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kIntensity:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                        lightIntensity = floatVals[0];</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kColor:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                        lightColor[0] = floatVals[0];</div>
<div class="line">                        lightColor[1] = floatVals[1];</div>
<div class="line">                        lightColor[2] = floatVals[2];</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">// Pick up shadowing parameters</span></div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kGlobalShadowOn:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, intVals );</div>
<div class="line">                        <span class="keywordflow">if</span> (intVals.<a name="a79"></a><a class="code" href="#!/url=./cpp_ref/class_m_int_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">                            globalShadowsOn = (intVals[0] != 0) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowOn:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, intVals );</div>
<div class="line">                        <span class="keywordflow">if</span> (intVals.<a class="code" href="#!/url=./cpp_ref/class_m_int_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>())</div>
<div class="line">                            localShadowsOn = (intVals[0] != 0) ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowViewProj:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, shadowViewProj);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowMap:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, shadowResource );</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowSamp:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, samplerDesc );</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">case</span> MHWRender::MLightParameterInformation::kShadowColor:</div>
<div class="line">                        lightParam-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_light_parameter_information.html#aa3237e2138596c256a541816278b402f">getParameter</a>( pname, floatVals );</div>
<div class="line">                        shadowColor[0] = floatVals[0];</div>
<div class="line">                        shadowColor[1] = floatVals[1];</div>
<div class="line">                        shadowColor[2] = floatVals[2];</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    <span class="keywordflow">default</span>:</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                } <span class="comment">/* for params */</span></div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Set shadow map and projection if shadows are turned on.</span></div>
<div class="line">            <span class="comment">//</span></div>
<div class="line">            <span class="keywordflow">if</span> (foundDirectional &amp;&amp; globalShadowsOn &amp;&amp; localShadowsOn &amp;&amp; shadowResource.texture)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordtype">void</span> *resourceHandle = shadowResource.texture-&gt;<a name="a80"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_texture.html#ad7bcab0d1707ef0da22fc72ada62c40e">resourceHandle</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (resourceHandle)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordtype">bool</span> debugShadowBindings = <span class="keyword">false</span>;</div>
<div class="line">                    status  = shaderInstance-&gt;<a name="a81"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaShadowPCF1_shadowMap&quot;</span>, shadowResource );</div>
<div class="line">                    <span class="keywordflow">if</span> (status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a> &amp;&amp; debugShadowBindings)</div>
<div class="line">                        printf(<span class="stringliteral">&quot;Bound shadow map to shader param mayaShadowPCF1_shadowMap\n&quot;</span>);</div>
<div class="line">                    status  = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaShadowPCF1_shadowViewProj&quot;</span>, shadowViewProj );</div>
<div class="line">                    <span class="keywordflow">if</span> (status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a> &amp;&amp; debugShadowBindings)</div>
<div class="line">                        printf(<span class="stringliteral">&quot;Bound shadow map transform to shader param mayaShadowPCF1_shadowViewProj\n&quot;</span>);</div>
<div class="line">                    status  = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaShadowPCF1_shadowColor&quot;</span>, &amp;shadowColor[0] );</div>
<div class="line">                    <span class="keywordflow">if</span> (status == <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a> &amp;&amp; debugShadowBindings)</div>
<div class="line">                        printf(<span class="stringliteral">&quot;Bound shadow map color to shader param mayaShadowPCF1_shadowColor\n&quot;</span>);</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a>* renderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">                <span class="keywordflow">if</span> (renderer)</div>
<div class="line">                {</div>
<div class="line">                    <a name="_a82"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_texture_manager.html">MHWRender::MTextureManager</a>* textureManager = renderer-&gt;<a name="a83"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#aa3f2ec2984800e2cd8ea09b4ad9f072e">getTextureManager</a>();</div>
<div class="line">                    <span class="keywordflow">if</span> (textureManager)</div>
<div class="line">                    {</div>
<div class="line">                        textureManager-&gt;<a name="a84"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_texture_manager.html#a82d198d9b895a67d774077d67073d22a">releaseTexture</a>(shadowResource.texture);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                shadowResource.texture = NULL;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set up parameters which should be set regardless of light existence.</span></div>
<div class="line">    status = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaDirectionalLight_direction&quot;</span>, &amp;( direction[0] ));</div>
<div class="line">    status = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaDirectionalLight_intensity&quot;</span>, lightIntensity );</div>
<div class="line">    status = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaDirectionalLight_color&quot;</span>, &amp;( lightColor[0] ));</div>
<div class="line">    status = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaShadowPCF1_mayaGlobalShadowOn&quot;</span>, globalShadowsOn);</div>
<div class="line">    status = shaderInstance-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef">setParameter</a>(<span class="stringliteral">&quot;mayaShadowPCF1_mayaShadowOn&quot;</span>, localShadowsOn);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example pre-render callback attached to a shader instance</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> shaderOverridePreDrawCallback(</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a>&amp; context,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html">MHWRender::MRenderItemList</a>&amp; renderItemList,</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a> *shaderInstance)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;PRE-draw callback triggered for render item list with data:\n&quot;</span>);</div>
<div class="line">    callbackDataPrint(context, renderItemList, shaderInstance);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    printf(<span class="stringliteral">&quot;\tLIGHTS\n&quot;</span>);</div>
<div class="line">    viewRenderOverrideUtilities::printDrawContextLightInfo( context );</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example post-render callback attached to a shader instance</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> shaderOverridePostDrawCallback(</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_context.html">MHWRender::MDrawContext</a>&amp; context,</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item_list.html">MHWRender::MRenderItemList</a>&amp; renderItemList,</div>
<div class="line">    <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a> *shaderInstance)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;POST-draw callback triggered for render item list with data:\n&quot;</span>);</div>
<div class="line">    callbackDataPrint(context, renderItemList, shaderInstance);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    Example of setting a shader override.</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">    Some variations are presented based on some member flags:</span></div>
<div class="line"><span class="comment">    - Use a stock shader or not</span></div>
<div class="line"><span class="comment">    - Attach pre and post shader instance callbacks</span></div>
<div class="line"><span class="comment">    - Use a shadow shader</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html">MHWRender::MShaderInstance</a>*</div>
<div class="line">viewRenderSceneRender::shaderOverride()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (mUseShaderOverride)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (!mShaderOverride)</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html">MHWRender::MRenderer</a> *theRenderer = <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343">MHWRender::MRenderer::theRenderer</a>();</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html">MHWRender::MShaderManager</a> *shaderManager = theRenderer ? theRenderer-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125">getShaderManager</a>() : NULL;</div>
<div class="line">            <span class="keywordflow">if</span> (shaderManager)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">if</span> (!mUseStockShaderOverride)</div>
<div class="line">                {</div>
<div class="line">                    <span class="keywordflow">if</span> (mUseShadowShader)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// This shader has parameters which can be updated</span></div>
<div class="line">                        <span class="comment">// by the attached pre-callback.</span></div>
<div class="line">                        mShaderOverride = shaderManager-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>(</div>
<div class="line">                            <span class="stringliteral">&quot;MayaBlinnDirectionalLightShadow&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0, 0, <span class="keyword">true</span>,</div>
<div class="line">                            shaderOverrideCallbackBindLightingInfo,</div>
<div class="line">                            NULL);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span></div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">// Use a sample Gooch shader</span></div>
<div class="line">                        mShaderOverride = shaderManager-&gt;<a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a581c659670f0e3168750382c61a91a25">getEffectsFileShader</a>(</div>
<div class="line">                            <span class="stringliteral">&quot;Gooch&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0, 0, <span class="keyword">true</span>,</div>
<div class="line">                            mAttachPrePostShaderCallback ? shaderOverridePreDrawCallback : NULL,</div>
<div class="line">                            mAttachPrePostShaderCallback ? shaderOverridePostDrawCallback : NULL);</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// Use a stock shader available from the shader manager</span></div>
<div class="line">                    <span class="comment">// In this case the stock Blinn shader.</span></div>
<div class="line">                    mShaderOverride = shaderManager-&gt;<a name="a85"></a><a class="code" href="#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a8e4ad27d691969622af2b05d8c6213d9">getStockShader</a>(</div>
<div class="line">                        MHWRender::MShaderManager::k3dBlinnShader,</div>
<div class="line">                        mAttachPrePostShaderCallback ? shaderOverridePreDrawCallback : NULL,</div>
<div class="line">                        mAttachPrePostShaderCallback ? shaderOverridePostDrawCallback : NULL);</div>
<div class="line">                    <span class="keywordflow">if</span> (mShaderOverride)</div>
<div class="line">                    {</div>
<div class="line">                        printf(<span class="stringliteral">&quot;\t%s : Set stock shader override %d\n&quot;</span>, mName.asChar(), MHWRender::MShaderManager::k3dBlinnShader );</div>
<div class="line">                        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> diffColor[] = {0.0f, 0.4f, 1.0f, 1.0f};</div>
<div class="line">                        <a class="code" href="#!/url=./cpp_ref/class_m_status.html">MStatus</a> status = mShaderOverride-&gt;setParameter(<span class="stringliteral">&quot;diffuseColor&quot;</span>, diffColor);</div>
<div class="line">                        <span class="keywordflow">if</span> (status != <a class="code" href="#!/url=./cpp_ref/class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>)</div>
<div class="line">                        {</div>
<div class="line">                            printf(<span class="stringliteral">&quot;Could not set diffuseColor on shader\n&quot;</span>);</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> mShaderOverride;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// No override so return NULL</span></div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->

      <div class="footer-block"><a href="../html/ac.cmtdialog.htm" class="comments-anchor" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
   </div></body>
</html>
