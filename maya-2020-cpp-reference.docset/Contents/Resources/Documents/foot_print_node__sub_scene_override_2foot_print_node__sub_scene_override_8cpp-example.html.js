var topic = "<!-- saved from url=(0024)http://docs.autodesk.com -->\n\
<html>\n\
   <head><script src=\"../scripts/yepnope.1.5.4-min.js\" type=\"text/javascript\"></script><script src=\"../scripts/lib/jquery-1.11.1.min.js\" type=\"text/javascript\"></script>\n\
      <title>C++ API Reference: footPrintNode_SubSceneOverride/footPrintNode_SubSceneOverride.cpp</title>\n\
      \n\
	  \n\
      \n\
      \n\
      \n\
      \n\
      \n\
      \n\
      \n\
    \n\
\n\
</head>\n\
   <body height=\"100%\"><div class=\"body_content\" id=\"body-content\"><link rel=\"stylesheet\" type=\"text/css\" href=\"cpp_ref/navtree.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"cpp_ref/doxygen.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"cpp_ref/tabs.css\"><link rel=\"stylesheet\" type=\"text/css\" href=\"style/adsk.cpm.css\"><script type=\"text/javascript\">\n\
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == \'undefined\';\n\
var weAreIn21 = $(\'div#main.view-active\').length;\n\
var tocPrefix = \'\';\n\
if (weAreIn21)\n\
{ tocPrefix = \'cpp_ref/\'; }\n\
function cpp_ref_initializeToc(forceTrigger) {\n\
    cpp_ref_adsk_ref_toc.initResizable();\n\
    cpp_ref_adsk_ref_toc.initNavTree(\'foot_print_node__sub_scene_override_2foot_print_node__sub_scene_override_8cpp-example.html\', tocPrefix);\n\
    dQuery(document).trigger(\'toc_initialized\');\n\
}\n\
if (tocSystemNeedsToBeLoaded)\n\
{\n\
	yepnope([{\n\
	load:[tocPrefix + \'json3.min.js\', tocPrefix + \'jquery.js\', tocPrefix + \'ref-toc-controller.js\', tocPrefix + \'dynsections.js\'],\n\
	complete: function() {\n\
	  if (typeof(dQuery) == \'undefined\')\n\
	  {\n\
	    dQuery = jQuery.noConflict(true);\n\
	  }\n\
	  else { jQuery.noConflict(true); }\n\
	  $(document).ready(cpp_ref_initializeToc);\n\
	}\n\
 	}])\n\
}\n\
if (!weAreIn21) { // if in AKN...\n\
$(window).load( function() {\n\
    setTimeout( function() {\n\
        var content = $(\'body > div\').not(\'#body-content\');     // take any divs under body that are not id=body-content\n\
        content.each( function() { \n\
            $(this).css( { \'padding-left\': $(this).css(\'margin-left\') } );       // and if they have any padding-left already, move it to margin-left.\n\
        } );\n\
        var width = cpp_ref_adsk_ref_toc.readFromStorage(\'width\');\n\
        content.css({marginLeft:parseInt(width)+6+\"px\"});\n\
    }, 100);\n\
} ); \n\
}\n\
</script><script>\n\
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }\n\
 </script>\n\
      <div>\n\
         <div class=\"head\">\n\
            <h1>C++ API Reference: footPrintNode_SubSceneOverride/footPrintNode_SubSceneOverride.cpp</h1>\n\
         </div>\n\
\n\
<div id=\"top\"><!-- do not remove this div, it is closed by doxygen! -->\n\
\n\
<!-- end header part -->\n\
<!-- Generated by Doxygen 1.8.10 -->\n\
\n\
  <div id=\"navrow1\" class=\"tabs\">\n\
    <ul class=\"tablist\">\n\
      <li><a href=\"#!/url=./cpp_ref/index.html\"><span>Main&#160;Page</span></a></li>\n\
      <li><a href=\"#!/url=./cpp_ref/pages.html\"><span>Related&#160;Pages</span></a></li>\n\
      <li><a href=\"#!/url=./cpp_ref/modules.html\"><span>Modules</span></a></li>\n\
      <li><a href=\"#!/url=./cpp_ref/namespaces.html\"><span>Namespaces</span></a></li>\n\
      <li><a href=\"#!/url=./cpp_ref/annotated.html\"><span>Classes</span></a></li>\n\
      <li><a href=\"#!/url=./cpp_ref/examples.html\"><span>Examples</span></a></li>\n\
      <li>\n\
        <div id=\"MSearchBox\" class=\"MSearchBoxInactive\">\n\
        <span class=\"left\">\n\
          <img id=\"MSearchSelect\" src=\"cpp_ref/search/mag_sel.png\" onmouseover=\"return searchBox.OnSearchSelectShow()\" onmouseout=\"return searchBox.OnSearchSelectHide()\" alt=\"\">\n\
          <input type=\"text\" id=\"MSearchField\" value=\"Search\" accesskey=\"S\" onfocus=\"searchBox.OnSearchFieldFocus(true)\" onblur=\"searchBox.OnSearchFieldFocus(false)\" onkeyup=\"searchBox.OnSearchFieldChange(event)\">\n\
          </span><span class=\"right\">\n\
            <a id=\"MSearchClose\" href=\"javascript:searchBox.CloseResultsWindow()\"><img id=\"MSearchCloseImg\" border=\"0\" src=\"cpp_ref/search/close.png\" alt=\"\"></a>\n\
          </span>\n\
        </div>\n\
      </li>\n\
    </ul>\n\
  </div>\n\
</div><!-- top -->\n\
<div id=\"side-nav\" class=\"ui-resizable side-nav-resizable\">\n\
  <div id=\"nav-tree\">\n\
    <div id=\"nav-tree-contents\">\n\
      <div id=\"nav-sync\" class=\"sync\"></div>\n\
    </div>\n\
  </div>\n\
  <div id=\"splitbar\" style=\"-moz-user-select:none;\" class=\"ui-resizable-handle\">\n\
  </div>\n\
</div>\n\
\n\
<div id=\"doc-content\">\n\
<!-- window showing the filter options -->\n\
\n\
\n\
<!-- iframe showing the search results (closed by default) -->\n\
\n\
\n\
<div class=\"header\">\n\
  <div class=\"headertitle\">\n\
<div class=\"title\">footPrintNode_SubSceneOverride/footPrintNode_SubSceneOverride.cpp</div>  </div>\n\
</div><!--header-->\n\
<div class=\"contents\">\n\
<div class=\"fragment\"><div class=\"line\"><span class=\"comment\">//-</span></div>\n\
<div class=\"line\"><span class=\"comment\">// ==========================================================================</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Copyright 2019 Autodesk, Inc.  All rights reserved.</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Use of this software is subject to the terms of the Autodesk license agreement</span></div>\n\
<div class=\"line\"><span class=\"comment\">// provided at the time of installation or download, or which otherwise</span></div>\n\
<div class=\"line\"><span class=\"comment\">// accompanies this software in either electronic or hard copy form.</span></div>\n\
<div class=\"line\"><span class=\"comment\">// ==========================================================================</span></div>\n\
<div class=\"line\"><span class=\"comment\">//+</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// DESCRIPTION:</span></div>\n\
<div class=\"line\"><span class=\"comment\">// </span></div>\n\
<div class=\"line\"><span class=\"comment\">// The plug-in demonstrates how to draw custom locators using MPxSubSceneOverride.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// It can be compared with other plugins which draw the same footprint locator,</span></div>\n\
<div class=\"line\"><span class=\"comment\">// including footPrintNode, rawfootPrintNode and footPrintNode_GeometryOverride.</span></div>\n\
<div class=\"line\"><span class=\"comment\">// For more info, please refer to the developer guide documentation on Choices</span></div>\n\
<div class=\"line\"><span class=\"comment\">// for Porting Plug-in Locators to Viewport 2.0.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// The implementation doesn&#39;t monitor DAG changes, so the update() method needs</span></div>\n\
<div class=\"line\"><span class=\"comment\">// to be called in every frame and walk through all the instances to look for</span></div>\n\
<div class=\"line\"><span class=\"comment\">// color/matrix changes in order to determine whether render items and UI drawables</span></div>\n\
<div class=\"line\"><span class=\"comment\">// need to be updated. If expecting large numbers of instances, monitoring change</span></div>\n\
<div class=\"line\"><span class=\"comment\">// events and changing only the required instances should be done instead to</span></div>\n\
<div class=\"line\"><span class=\"comment\">// improve efficiency.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// The MRenderItem class is used to draw the mesh and allow hardware instancing</span></div>\n\
<div class=\"line\"><span class=\"comment\">// or consolidation to kick in. If the DAG hierarchy is using instances, the</span></div>\n\
<div class=\"line\"><span class=\"comment\">// setInstanceTransformArray()/setExtraInstanceData() method is called to leverage</span></div>\n\
<div class=\"line\"><span class=\"comment\">// hardware instancing and pass in per-instance transforms/colors; if the DAG</span></div>\n\
<div class=\"line\"><span class=\"comment\">// hierarchy is using copies, setWantConsolidation() is called to leverage</span></div>\n\
<div class=\"line\"><span class=\"comment\">// a simple version of classic consolidation which is designed for subscene only.</span></div>\n\
<div class=\"line\"><span class=\"comment\">// In this case a mini shader is used to allow for reusing shaders across copies</span></div>\n\
<div class=\"line\"><span class=\"comment\">// so that the consolidation can kick in. Note the consolidation flag should be</span></div>\n\
<div class=\"line\"><span class=\"comment\">// reset if hardware instancing is intended due to the compatibility between the</span></div>\n\
<div class=\"line\"><span class=\"comment\">// two systems.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// The MUIDrawManager class is used to draw the texts. UI drawables created in a</span></div>\n\
<div class=\"line\"><span class=\"comment\">// subscene will be kept alive until the next addUIDrawables() call. Although UI</span></div>\n\
<div class=\"line\"><span class=\"comment\">// drawables cannot leverage hardware instancing or consolidation, it is possible</span></div>\n\
<div class=\"line\"><span class=\"comment\">// for the plug-in to batch UI drawables for all DAG instances together and</span></div>\n\
<div class=\"line\"><span class=\"comment\">// reduce the draw overhead. Note this method might not be applicable for complex</span></div>\n\
<div class=\"line\"><span class=\"comment\">// meshes because of the cost of transforming a large number of vertices between</span></div>\n\
<div class=\"line\"><span class=\"comment\">// different object spaces using CPU, thus for this case the MRenderItem class</span></div>\n\
<div class=\"line\"><span class=\"comment\">// should be used. See the addUIDrawables() method for batching UI drawables and</span></div>\n\
<div class=\"line\"><span class=\"comment\">// the transformation between spaces.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Selection is handled by the getInstancedSelectionPath() method. To prevent it</span></div>\n\
<div class=\"line\"><span class=\"comment\">// from being called for any unqualified selection hits, each render item should</span></div>\n\
<div class=\"line\"><span class=\"comment\">// be assigned with a proper selection mask.</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Example usage is to load the plug-in and create the node:</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\">// loadPlugin footPrintNode_SubSceneOverride;</span></div>\n\
<div class=\"line\"><span class=\"comment\">// createNode footPrint_SubSceneOverride;</span></div>\n\
<div class=\"line\"><span class=\"comment\">//</span></div>\n\
<div class=\"line\"><span class=\"comment\"></span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MPxLocatorNode.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MString.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MTypeId.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MPlug.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MDataBlock.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MColor.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/M3dView.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MFnPlugin.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MDistance.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MFnUnitAttribute.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MGlobal.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MFnDagNode.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MSelectionContext.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MDagMessage.h&gt;</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">// Viewport 2.0 includes</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MDrawRegistry.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MPxSubSceneOverride.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MShaderManager.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MHWGeometry.h&gt;</span></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;maya/MHWGeometryUtilities.h&gt;</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"preprocessor\">#include &lt;unordered_map&gt;</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keyword\">namespace</span></div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <span class=\"comment\">// Foot Data</span></div>\n\
<div class=\"line\">    <span class=\"comment\">//</span></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">float</span> sole[][3] = { {  0.00f, 0.0f, -0.70f },</div>\n\
<div class=\"line\">                        {  0.04f, 0.0f, -0.69f },</div>\n\
<div class=\"line\">                        {  0.09f, 0.0f, -0.65f },</div>\n\
<div class=\"line\">                        {  0.13f, 0.0f, -0.61f },</div>\n\
<div class=\"line\">                        {  0.16f, 0.0f, -0.54f },</div>\n\
<div class=\"line\">                        {  0.17f, 0.0f, -0.46f },</div>\n\
<div class=\"line\">                        {  0.17f, 0.0f, -0.35f },</div>\n\
<div class=\"line\">                        {  0.16f, 0.0f, -0.25f },</div>\n\
<div class=\"line\">                        {  0.15f, 0.0f, -0.14f },</div>\n\
<div class=\"line\">                        {  0.13f, 0.0f,  0.00f },</div>\n\
<div class=\"line\">                        {  0.00f, 0.0f,  0.00f },</div>\n\
<div class=\"line\">                        { -0.13f, 0.0f,  0.00f },</div>\n\
<div class=\"line\">                        { -0.15f, 0.0f, -0.14f },</div>\n\
<div class=\"line\">                        { -0.16f, 0.0f, -0.25f },</div>\n\
<div class=\"line\">                        { -0.17f, 0.0f, -0.35f },</div>\n\
<div class=\"line\">                        { -0.17f, 0.0f, -0.46f },</div>\n\
<div class=\"line\">                        { -0.16f, 0.0f, -0.54f },</div>\n\
<div class=\"line\">                        { -0.13f, 0.0f, -0.61f },</div>\n\
<div class=\"line\">                        { -0.09f, 0.0f, -0.65f },</div>\n\
<div class=\"line\">                        { -0.04f, 0.0f, -0.69f },</div>\n\
<div class=\"line\">                        { -0.00f, 0.0f, -0.70f } };</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">float</span> heel[][3] = { {  0.00f, 0.0f,  0.06f },</div>\n\
<div class=\"line\">                        {  0.13f, 0.0f,  0.06f },</div>\n\
<div class=\"line\">                        {  0.14f, 0.0f,  0.15f },</div>\n\
<div class=\"line\">                        {  0.14f, 0.0f,  0.21f },</div>\n\
<div class=\"line\">                        {  0.13f, 0.0f,  0.25f },</div>\n\
<div class=\"line\">                        {  0.11f, 0.0f,  0.28f },</div>\n\
<div class=\"line\">                        {  0.09f, 0.0f,  0.29f },</div>\n\
<div class=\"line\">                        {  0.04f, 0.0f,  0.30f },</div>\n\
<div class=\"line\">                        {  0.00f, 0.0f,  0.30f },</div>\n\
<div class=\"line\">                        { -0.04f, 0.0f,  0.30f },</div>\n\
<div class=\"line\">                        { -0.09f, 0.0f,  0.29f },</div>\n\
<div class=\"line\">                        { -0.11f, 0.0f,  0.28f },</div>\n\
<div class=\"line\">                        { -0.13f, 0.0f,  0.25f },</div>\n\
<div class=\"line\">                        { -0.14f, 0.0f,  0.21f },</div>\n\
<div class=\"line\">                        { -0.14f, 0.0f,  0.15f },</div>\n\
<div class=\"line\">                        { -0.13f, 0.0f,  0.06f },</div>\n\
<div class=\"line\">                        { -0.00f, 0.0f,  0.06f } };</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">int</span> soleCount = 21;</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">int</span> heelCount = 17;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Viewport 2.0 specific data</span></div>\n\
<div class=\"line\">    <span class=\"comment\">//</span></div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a name=\"_a0\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> colorParameterName_ = <span class=\"stringliteral\">&quot;solidColor&quot;</span>;</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> wireframeItemName_  = <span class=\"stringliteral\">&quot;footPrintLocatorWires&quot;</span>;</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> shadedItemName_     = <span class=\"stringliteral\">&quot;footPrintLocatorTriangles&quot;</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Maintain a mini cache for 3d solid shaders in order to reuse the shader</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// instance whenever possible. This can allow Viewport 2.0 optimization e.g.</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// the GPU instancing system and the consolidation system to be leveraged.</span></div>\n\
<div class=\"line\">    <span class=\"comment\">//</span></div>\n\
<div class=\"line\">    <span class=\"keyword\">struct </span>MColorHash</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        std::size_t operator()(<span class=\"keyword\">const</span> <a name=\"_a1\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html\">MColor</a>&amp; color)<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\">        </span>{</div>\n\
<div class=\"line\">            std::size_t seed = 0;</div>\n\
<div class=\"line\">            CombineHashCode(seed, color.<a name=\"a2\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a4788d82c901b9367dd5c0daff8a7616b\">r</a>);</div>\n\
<div class=\"line\">            CombineHashCode(seed, color.<a name=\"a3\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a8cf17d727651616de6f2b79ef32170cd\">g</a>);</div>\n\
<div class=\"line\">            CombineHashCode(seed, color.<a name=\"a4\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a83fc1af92e29717b4513d121b0c72c7d\">b</a>);</div>\n\
<div class=\"line\">            CombineHashCode(seed, color.<a name=\"a5\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a4aec1a5be9d9a4a394a2e49e9744286e\">a</a>);</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">return</span> seed;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordtype\">void</span> CombineHashCode(std::size_t&amp; seed, <span class=\"keywordtype\">float</span> v)<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\">        </span>{</div>\n\
<div class=\"line\">            std::hash&lt;float&gt; hasher;</div>\n\
<div class=\"line\">            seed ^= hasher(v) + 0x9e3779b9 + (seed &lt;&lt; 6) + (seed &gt;&gt; 2);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    };</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    std::unordered_map&lt;MColor, MHWRender::MShaderInstance*, MColorHash&gt; the3dSolidShaders;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a6\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html\">MHWRender::MShaderInstance</a>* get3dSolidShader(<span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html\">MColor</a>&amp; color)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"comment\">// Return the shader instance if exists.</span></div>\n\
<div class=\"line\">        <span class=\"keyword\">auto</span> it = the3dSolidShaders.find(color);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (it != the3dSolidShaders.end())</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">return</span> it-&gt;second;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html\">MHWRender::MShaderInstance</a>* shader = NULL;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <a name=\"_a7\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html\">MHWRender::MRenderer</a>* renderer = <a name=\"a8\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343\">MHWRender::MRenderer::theRenderer</a>();</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (renderer)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keyword\">const</span> <a name=\"_a9\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html\">MHWRender::MShaderManager</a>* shaderMgr = renderer-&gt;<a name=\"a10\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125\">getShaderManager</a>();</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">if</span> (shaderMgr)</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                shader = shaderMgr-&gt;<a name=\"a11\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a8e4ad27d691969622af2b05d8c6213d9\">getStockShader</a>(MHWRender::MShaderManager::k3dSolidShader);</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (shader)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keywordtype\">float</span> solidColor[] = { color.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a4788d82c901b9367dd5c0daff8a7616b\">r</a>, color.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a8cf17d727651616de6f2b79ef32170cd\">g</a>, color.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html#a83fc1af92e29717b4513d121b0c72c7d\">b</a>, 1.0f };</div>\n\
<div class=\"line\">            shader-&gt;<a name=\"a12\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html#aa17e2c9a17b86064950103066fa307ef\">setParameter</a>(colorParameterName_, solidColor);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            the3dSolidShaders[color] = shader;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> shader;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a13\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> releaseShaders()</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html\">MHWRender::MRenderer</a>* renderer = <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4678a72ac6959ed21d422d27928d0343\">MHWRender::MRenderer::theRenderer</a>();</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (renderer)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html\">MHWRender::MShaderManager</a>* shaderMgr = renderer-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_renderer.html#a4603e18a1b89b798a2e4a4f36d9b5125\">getShaderManager</a>();</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">if</span> (shaderMgr)</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">for</span> (<span class=\"keyword\">auto</span> it = the3dSolidShaders.begin(); it != the3dSolidShaders.end(); it++)</div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    shaderMgr-&gt;<a name=\"a14\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_manager.html#a0c7deb55edc231cbb2365b271ecd55f8\">releaseShader</a>(it-&gt;second);</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">                the3dSolidShaders.clear();</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">return</span> MS::kSuccess;</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> MS::kFailure;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">} <span class=\"comment\">// anonymous namespace</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Node implementation with legacy viewport draw</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keyword\">class </span>footPrint : <span class=\"keyword\">public</span> <a name=\"_a15\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_px_locator_node.html\">MPxLocatorNode</a></div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\"><span class=\"keyword\">public</span>:</div>\n\
<div class=\"line\">    footPrint();</div>\n\
<div class=\"line\">    ~footPrint() <span class=\"keyword\">override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a>         <a name=\"a16\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_px_node.html#a6e1aa1e50774080d5aee55f20ffa5503\">compute</a>( <span class=\"keyword\">const</span> <a name=\"_a17\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_plug.html\">MPlug</a>&amp; plug, <a name=\"_a18\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_data_block.html\">MDataBlock</a>&amp; data ) <span class=\"keyword\">override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span>            <a name=\"a19\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_px_locator_node.html#a4254418493ef1ab6847b9e5f395fa3de\">isBounded</a>() <span class=\"keyword\">const override</span>;</div>\n\
<div class=\"line\">    <a name=\"_a20\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_bounding_box.html\">MBoundingBox</a>    <a name=\"a21\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_px_locator_node.html#a762dab569a9d88aa731f3c7229803e1e\">boundingBox</a>() <span class=\"keyword\">const override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a22\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_selection_mask.html\">MSelectionMask</a> <a name=\"a23\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_px_locator_node.html#acedd5e97c21aacfc5f976499438c7fa8\">getShapeSelectionMask</a>() <span class=\"keyword\">const override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <span class=\"keywordtype\">void</span> *          creator();</div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a>         initialize();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <a name=\"_a24\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a>         size;         <span class=\"comment\">// The size of the foot</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keyword\">public</span>:</div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <a name=\"_a25\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_type_id.html\">MTypeId</a>     id;</div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a>     drawDbClassification;</div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span>  <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a>     drawRegistrantId;</div>\n\
<div class=\"line\">};</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a> footPrint::size;</div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_type_id.html\">MTypeId</a> footPrint::id( 0x00080037 );</div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> footPrint::drawDbClassification(<span class=\"stringliteral\">&quot;drawdb/subscene/footPrint_SubSceneOverride&quot;</span>);</div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> footPrint::drawRegistrantId(<span class=\"stringliteral\">&quot;FootprintNode_SubSceneOverridePlugin&quot;</span>);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">footPrint::footPrint() {}</div>\n\
<div class=\"line\">footPrint::~footPrint() {}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> footPrint::compute( <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_plug.html\">MPlug</a>&amp; <span class=\"comment\">/*plug*/</span>, <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_data_block.html\">MDataBlock</a>&amp; <span class=\"comment\">/*data*/</span> )</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> MS::kUnknownParameter;</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">bool</span> footPrint::isBounded()<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\"></span>{</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_bounding_box.html\">MBoundingBox</a> footPrint::boundingBox()<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\"></span>{</div>\n\
<div class=\"line\">    <span class=\"comment\">// Get the size</span></div>\n\
<div class=\"line\">    <span class=\"comment\">//</span></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a> thisNode = thisMObject();</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_plug.html\">MPlug</a> plug( thisNode, size );</div>\n\
<div class=\"line\">    <a name=\"_a26\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_distance.html\">MDistance</a> sizeVal;</div>\n\
<div class=\"line\">    plug.getValue( sizeVal );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">double</span> multiplier = sizeVal.<a name=\"a27\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_distance.html#ace39ab92685b0f5ab1a2925e748efb1f\">asCentimeters</a>();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a28\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_point.html\">MPoint</a> corner1( -0.17, 0.0, -0.7 );</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_point.html\">MPoint</a> corner2( 0.17, 0.0, 0.3 );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    corner1 = corner1 * multiplier;</div>\n\
<div class=\"line\">    corner2 = corner2 * multiplier;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_bounding_box.html\">MBoundingBox</a>( corner1, corner2 );</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_selection_mask.html\">MSelectionMask</a> footPrint::getShapeSelectionMask()<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\"></span>{</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_selection_mask.html\">MSelectionMask</a>(<span class=\"stringliteral\">&quot;footPrintSelection&quot;</span>);</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span>* footPrint::creator()</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> <span class=\"keyword\">new</span> footPrint();</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> footPrint::initialize()</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <a name=\"_a29\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_unit_attribute.html\">MFnUnitAttribute</a> unitFn;</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> stat;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    size = unitFn.<a name=\"a30\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a31f804de81a968aa11b510a6231e7874\">create</a>( <span class=\"stringliteral\">&quot;size&quot;</span>, <span class=\"stringliteral\">&quot;sz&quot;</span>, MFnUnitAttribute::kDistance );</div>\n\
<div class=\"line\">    unitFn.<a name=\"a31\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_unit_attribute.html#a02a46e1b4ae48c38d85678a8611e3e77\">setDefault</a>( 1.0 );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    stat = addAttribute( size );</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!stat) {</div>\n\
<div class=\"line\">        stat.<a name=\"a32\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;addAttribute&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> stat;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> MS::kSuccess;</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Viewport 2.0 override implementation</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keyword\">class </span>FootPrintSubSceneOverride : <span class=\"keyword\">public</span> <a name=\"_a33\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html\">MHWRender::MPxSubSceneOverride</a></div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\"><span class=\"keyword\">public</span>:</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html\">MHWRender::MPxSubSceneOverride</a>* Creator(<span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a>&amp; obj)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> <span class=\"keyword\">new</span> FootPrintSubSceneOverride(obj);</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    ~FootPrintSubSceneOverride() <span class=\"keyword\">override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    MHWRender::DrawAPI <a name=\"a34\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a9c43d7192e56c01d8dde77fabd843a0e\">supportedDrawAPIs</a>()<span class=\"keyword\"> const override</span></div>\n\
<div class=\"line\"><span class=\"keyword\">    </span>{</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> MHWRender::kAllDevices;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> <a name=\"a35\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a29a5e9ed2eaaf6c451ac6c7fd19f5d91\">requiresUpdate</a>(</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a name=\"_a36\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html\">MHWRender::MSubSceneContainer</a>&amp; container,</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a name=\"_a37\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html\">MHWRender::MFrameContext</a>&amp; frameContext)<span class=\"keyword\"> const override</span></div>\n\
<div class=\"line\"><span class=\"keyword\">    </span>{</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">void</span> <a name=\"a38\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#ac74e57c764a59c2fa2a8e6a5b72090d5\">update</a>(</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html\">MHWRender::MSubSceneContainer</a>&amp; container,</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html\">MHWRender::MFrameContext</a>&amp; frameContext) <span class=\"keyword\">override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> <a name=\"a39\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a05c70618c28196399681a784a3686b50\">hasUIDrawables</a>()<span class=\"keyword\"> const override</span></div>\n\
<div class=\"line\"><span class=\"keyword\">    </span>{</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> <a name=\"a40\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a1a45ac429d66ab11ed4711b1883c14cb\">areUIDrawablesDirty</a>()<span class=\"keyword\"> const override</span></div>\n\
<div class=\"line\"><span class=\"keyword\">    </span>{</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> fAreUIDrawablesDirty;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">void</span> <a name=\"a41\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a51c18131d1daa15aa761a09d622d9061\">addUIDrawables</a>(</div>\n\
<div class=\"line\">        <a name=\"_a42\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html\">MHWRender::MUIDrawManager</a>&amp; drawManager,</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html\">MHWRender::MFrameContext</a>&amp; frameContext) <span class=\"keyword\">override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> <a name=\"a43\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a3d9b68da81d724902522fe2bf5f809c5\">getInstancedSelectionPath</a>(</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a name=\"_a44\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html\">MHWRender::MRenderItem</a>&amp; renderItem,</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a name=\"_a45\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_intersection.html\">MHWRender::MIntersection</a>&amp; intersection,</div>\n\
<div class=\"line\">        <a name=\"_a46\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a>&amp; dagPath) <span class=\"keyword\">const override</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keyword\">private</span>:</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    FootPrintSubSceneOverride(<span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a>&amp; obj);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Create and delete VB/IB</span></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">void</span> rebuildGeometryBuffers();</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">void</span> deleteGeometryBuffers();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a> fLocatorNode;</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">float</span> fMultiplier;</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> fIsInstanceMode;</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> fAreUIDrawablesDirty;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a47\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_vertex_buffer.html\">MHWRender::MVertexBuffer</a>* fPositionBuffer;</div>\n\
<div class=\"line\">    <a name=\"_a48\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_index_buffer.html\">MHWRender::MIndexBuffer</a>* fWireIndexBuffer;</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_index_buffer.html\">MHWRender::MIndexBuffer</a>* fShadedIndexBuffer;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keyword\">struct </span>InstanceInfo</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a name=\"_a49\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix.html\">MMatrix</a> fMatrix;</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html\">MColor</a> fColor;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        InstanceInfo() {}</div>\n\
<div class=\"line\">        InstanceInfo(<span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix.html\">MMatrix</a>&amp; m, <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html\">MColor</a>&amp; c) : fMatrix(m), fColor(c) {}</div>\n\
<div class=\"line\">    };</div>\n\
<div class=\"line\">    <span class=\"keyword\">typedef</span> std::map&lt;unsigned int, InstanceInfo&gt; InstanceInfoMap;</div>\n\
<div class=\"line\">    InstanceInfoMap fInstanceInfoCache;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Callbacks on instance added/removed.</span></div>\n\
<div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keywordtype\">void</span> InstanceChangedCallback(<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a> &amp;child, <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a> &amp;parent, <span class=\"keywordtype\">void</span> *clientData);</div>\n\
<div class=\"line\">    MCallbackId fInstanceAddedCbId;</div>\n\
<div class=\"line\">    MCallbackId fInstanceRemovedCbId;</div>\n\
<div class=\"line\">    <a name=\"_a50\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path_array.html\">MDagPathArray</a> fInstanceDagPaths;</div>\n\
<div class=\"line\">};</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">FootPrintSubSceneOverride::FootPrintSubSceneOverride(<span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a>&amp; obj)</div>\n\
<div class=\"line\">: <a class=\"code\" href=\"#!/url=./cpp_ref/namespace_m_h_w_render.html\">MHWRender</a>::MPxSubSceneOverride(obj)</div>\n\
<div class=\"line\">, fLocatorNode(obj)</div>\n\
<div class=\"line\">, fMultiplier(0.0f)</div>\n\
<div class=\"line\">, fIsInstanceMode(false)</div>\n\
<div class=\"line\">, fAreUIDrawablesDirty(true)</div>\n\
<div class=\"line\">, fPositionBuffer(NULL)</div>\n\
<div class=\"line\">, fWireIndexBuffer(NULL)</div>\n\
<div class=\"line\">, fShadedIndexBuffer(NULL)</div>\n\
<div class=\"line\">, fInstanceAddedCbId(0)</div>\n\
<div class=\"line\">, fInstanceRemovedCbId(0)</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a> dagPath;</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (<a name=\"a51\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#a422aa5ec02565f757c13fe2873ed25d7\">MDagPath::getAPathTo</a>(obj, dagPath))</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        fInstanceAddedCbId = <a name=\"a52\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_message.html#a9c301d5a30d9424eea522166b283a98d\">MDagMessage::addInstanceAddedDagPathCallback</a>(</div>\n\
<div class=\"line\">            dagPath, InstanceChangedCallback, <span class=\"keyword\">this</span>);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        fInstanceRemovedCbId = <a name=\"a53\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_message.html#aafe921878a14c3ae07f6a453773c59e2\">MDagMessage::addInstanceRemovedDagPathCallback</a>(</div>\n\
<div class=\"line\">            dagPath, InstanceChangedCallback, <span class=\"keyword\">this</span>);</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">FootPrintSubSceneOverride::~FootPrintSubSceneOverride()</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    deleteGeometryBuffers();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fInstanceAddedCbId != 0)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a name=\"a54\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_message.html#a50fe995add3ce133b8b56551abb4ed09\">MMessage::removeCallback</a>(fInstanceAddedCbId);</div>\n\
<div class=\"line\">        fInstanceAddedCbId = 0;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fInstanceRemovedCbId != 0)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_message.html#a50fe995add3ce133b8b56551abb4ed09\">MMessage::removeCallback</a>(fInstanceRemovedCbId);</div>\n\
<div class=\"line\">        fInstanceRemovedCbId = 0;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">/* static */</span></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span> FootPrintSubSceneOverride::InstanceChangedCallback(</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a>&amp; child,</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a>&amp; parent,</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">void</span>* clientData)</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    FootPrintSubSceneOverride* ovr = <span class=\"keyword\">static_cast&lt;</span>FootPrintSubSceneOverride*<span class=\"keyword\">&gt;</span>(clientData);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (ovr)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        ovr-&gt;fInstanceDagPaths.clear();</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span> FootPrintSubSceneOverride::update(</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html\">MHWRender::MSubSceneContainer</a>&amp; container,</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html\">MHWRender::MFrameContext</a>&amp; frameContext)</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> numInstances = fInstanceDagPaths.length();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (numInstances == 0)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (!<a name=\"a55\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#a6e4195497a9d3f031d159ddb60f94e74\">MDagPath::getAllPathsTo</a>(fLocatorNode, fInstanceDagPaths))</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            fprintf(stderr, <span class=\"stringliteral\">&quot;FootPrintSubSceneOverride: Failed to get all DAG paths.\\n&quot;</span>);</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">return</span>;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        numInstances = fInstanceDagPaths.length();</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (numInstances == 0) <span class=\"keywordflow\">return</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_shader_instance.html\">MHWRender::MShaderInstance</a>* shader = get3dSolidShader(</div>\n\
<div class=\"line\">        <a name=\"a56\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_geometry_utilities.html#a6221bc7407b14246b14f79a751496276\">MHWRender::MGeometryUtilities::wireframeColor</a>(fInstanceDagPaths[0]));</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!shader)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        fprintf(stderr, <span class=\"stringliteral\">&quot;FootPrintSubSceneOverride: Failed to get a 3d solid shader.\\n&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_plug.html\">MPlug</a> plug(fLocatorNode, footPrint::size);</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">float</span> newMultiplier = 1.0f;</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!plug.isNull())</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_distance.html\">MDistance</a> sizeVal;</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (plug.getValue(sizeVal))</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            newMultiplier = (float)sizeVal.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_distance.html#ace39ab92685b0f5ab1a2925e748efb1f\">asCentimeters</a>();</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> updateGeometry = (container.<a name=\"a57\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html#ab1eb6de2bf3aa228929ab4b40c73507c\">count</a>() == 0);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fMultiplier != newMultiplier)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        fMultiplier = newMultiplier;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        updateGeometry = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (updateGeometry)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        rebuildGeometryBuffers();</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> anyInstanceChanged = <span class=\"keyword\">false</span>;</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> numVisibleInstances = 0;</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> componentsPerColor = 4; <span class=\"comment\">// RGBA color</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a name=\"_a58\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix_array.html\">MMatrixArray</a> instanceMatrixArray(numInstances);</div>\n\
<div class=\"line\">    <a name=\"_a59\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_float_array.html\">MFloatArray</a> instanceColorArray(numInstances * componentsPerColor);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// If expecting large numbers of instances, walking through all the instances</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// every frame to look for changes is not efficient enough. Monitoring change</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// events and changing only the required instances should be done instead.</span></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">for</span> (<span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> i=0; i&lt;numInstances; i++)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a>&amp; instance = fInstanceDagPaths[i];</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (instance.<a name=\"a60\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#a095ae34296e81703965265a42ee783ca\">isValid</a>() &amp;&amp; instance.<a name=\"a61\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#a27f324b7f2643119a7542e39101601d1\">isVisible</a>())</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            InstanceInfo instanceInfo(instance.<a name=\"a62\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#afb30f64680f5aa038da428a79579d08c\">inclusiveMatrix</a>(),</div>\n\
<div class=\"line\">                <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_geometry_utilities.html#a6221bc7407b14246b14f79a751496276\">MHWRender::MGeometryUtilities::wireframeColor</a>(instance));</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            InstanceInfoMap::iterator iter = fInstanceInfoCache.find(i);</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">if</span> (iter == fInstanceInfoCache.end() ||</div>\n\
<div class=\"line\">                iter-&gt;second.fColor != instanceInfo.fColor ||</div>\n\
<div class=\"line\">                !iter-&gt;second.fMatrix.isEquivalent(instanceInfo.fMatrix))</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">if</span> (!fAreUIDrawablesDirty &amp;&amp;</div>\n\
<div class=\"line\">                    (iter == fInstanceInfoCache.end() ||</div>\n\
<div class=\"line\">                     !iter-&gt;second.fMatrix.isEquivalent(instanceInfo.fMatrix)))</div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    fAreUIDrawablesDirty = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">                anyInstanceChanged = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">                fInstanceInfoCache[i] = instanceInfo;</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            instanceMatrixArray[numVisibleInstances] = instanceInfo.fMatrix;</div>\n\
<div class=\"line\">            instanceColorArray[numVisibleInstances*componentsPerColor] = instanceInfo.fColor.r;</div>\n\
<div class=\"line\">            instanceColorArray[numVisibleInstances*componentsPerColor+1] = instanceInfo.fColor.g;</div>\n\
<div class=\"line\">            instanceColorArray[numVisibleInstances*componentsPerColor+2] = instanceInfo.fColor.b;</div>\n\
<div class=\"line\">            instanceColorArray[numVisibleInstances*componentsPerColor+3] = instanceInfo.fColor.a;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            numVisibleInstances++;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">else</span></div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            InstanceInfoMap::iterator iter = fInstanceInfoCache.find(i);</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">if</span> (iter != fInstanceInfoCache.end())</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                fInstanceInfoCache.erase(i);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">                anyInstanceChanged = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">                fAreUIDrawablesDirty = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Shrink to fit</span></div>\n\
<div class=\"line\">    instanceMatrixArray.setLength(numVisibleInstances);</div>\n\
<div class=\"line\">    instanceColorArray.setLength(numVisibleInstances*componentsPerColor);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> numInstanceInfo = fInstanceInfoCache.size();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (numInstanceInfo != numVisibleInstances)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">for</span> (<span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> i=numVisibleInstances; i&lt;numInstanceInfo; i++)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            fInstanceInfoCache.erase(i);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        anyInstanceChanged = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">        fAreUIDrawablesDirty = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">bool</span> itemsChanged = <span class=\"keyword\">false</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html\">MHWRender::MRenderItem</a>* wireItem = container.<a name=\"a63\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html#aa96c3d709fe8ea2325d20c2423bb8f23\">find</a>(wireframeItemName_);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!wireItem)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        wireItem = <a name=\"a64\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#ac74a014f3346d8ddac693b7f034fa228\">MHWRender::MRenderItem::Create</a>(wireframeItemName_,</div>\n\
<div class=\"line\">            MHWRender::MRenderItem::DecorationItem,</div>\n\
<div class=\"line\">            MHWRender::MGeometry::kLines);</div>\n\
<div class=\"line\">        wireItem-&gt;<a name=\"a65\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a8e28487092f00765128c2ffdd43d0fe4\">setDrawMode</a>(MHWRender::MGeometry::kWireframe);</div>\n\
<div class=\"line\">        wireItem-&gt;<a name=\"a66\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a6e865e2cf5c9d818b1cbb99af2360c47\">depthPriority</a>(5);</div>\n\
<div class=\"line\">        wireItem-&gt;<a name=\"a67\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a793ce3d41d7f13aea020b811379a3ef3\">setSelectionMask</a>(MSelectionMask::kSelectLocators);</div>\n\
<div class=\"line\">        container.<a name=\"a68\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html#a3868473990e1902a2929a48acd2746d8\">add</a>(wireItem);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        itemsChanged = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html\">MHWRender::MRenderItem</a>* shadedItem = container.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html#aa96c3d709fe8ea2325d20c2423bb8f23\">find</a>(shadedItemName_);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!shadedItem)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        shadedItem = <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#ac74a014f3346d8ddac693b7f034fa228\">MHWRender::MRenderItem::Create</a>(shadedItemName_,</div>\n\
<div class=\"line\">            MHWRender::MRenderItem::DecorationItem,</div>\n\
<div class=\"line\">            MHWRender::MGeometry::kTriangles);</div>\n\
<div class=\"line\">        shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a8e28487092f00765128c2ffdd43d0fe4\">setDrawMode</a>((MHWRender::MGeometry::DrawMode)</div>\n\
<div class=\"line\">            (MHWRender::MGeometry::kShaded|MHWRender::MGeometry::kTextured));</div>\n\
<div class=\"line\">        shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a793ce3d41d7f13aea020b811379a3ef3\">setSelectionMask</a>(MSelectionMask::kSelectLocators);</div>\n\
<div class=\"line\">        container.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_sub_scene_container.html#a3868473990e1902a2929a48acd2746d8\">add</a>(shadedItem);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        itemsChanged = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (itemsChanged || anyInstanceChanged)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        wireItem-&gt;<a name=\"a69\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#ad283b157fa4f6c40bceb9d398c53a72a\">setShader</a>(shader);</div>\n\
<div class=\"line\">        shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#ad283b157fa4f6c40bceb9d398c53a72a\">setShader</a>(shader);</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (itemsChanged || updateGeometry)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> status;</div>\n\
<div class=\"line\">        <a name=\"_a70\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_dag_node.html\">MFnDagNode</a> node(fLocatorNode, &amp;status);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        footPrint* fp = status ? <span class=\"keyword\">dynamic_cast&lt;</span>footPrint*<span class=\"keyword\">&gt;</span>(node.userNode()) : NULL;</div>\n\
<div class=\"line\">        <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_bounding_box.html\">MBoundingBox</a> *bounds = fp ? <span class=\"keyword\">new</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_bounding_box.html\">MBoundingBox</a>(fp-&gt;boundingBox()) : NULL;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <a name=\"_a71\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_vertex_buffer_array.html\">MHWRender::MVertexBufferArray</a> vertexBuffers;</div>\n\
<div class=\"line\">        vertexBuffers.<a name=\"a72\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_vertex_buffer_array.html#acd36fdd49c7d45faff08163ae776c5b2\">addBuffer</a>(<span class=\"stringliteral\">&quot;positions&quot;</span>, fPositionBuffer);</div>\n\
<div class=\"line\">        setGeometryForRenderItem(*wireItem, vertexBuffers, *fWireIndexBuffer, bounds);</div>\n\
<div class=\"line\">        setGeometryForRenderItem(*shadedItem, vertexBuffers, *fShadedIndexBuffer, bounds);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (bounds) <span class=\"keyword\">delete</span> bounds;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (itemsChanged || anyInstanceChanged)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (!fIsInstanceMode &amp;&amp; numInstances == 1)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"comment\">// For multiple copies (not multiple instances), consolidation is</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// enabled for static scenario, mainly to improve tumbling performance.</span></div>\n\
<div class=\"line\">            wireItem-&gt;<a name=\"a73\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a3fc9143c6cf463c2f4523a7bfb68c6e6\">setWantConsolidation</a>(<span class=\"keyword\">true</span>);</div>\n\
<div class=\"line\">            shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a3fc9143c6cf463c2f4523a7bfb68c6e6\">setWantConsolidation</a>(<span class=\"keyword\">true</span>);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            <span class=\"comment\">// When not dealing with multiple instances, don&#39;t convert the render items into instanced</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// mode.  Set the matrices on them directly.</span></div>\n\
<div class=\"line\">            <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix.html\">MMatrix</a>&amp; objToWorld = instanceMatrixArray[0];</div>\n\
<div class=\"line\">            wireItem-&gt;<a name=\"a74\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a32cf944375530a37382f8ff49045ddf6\">setMatrix</a>(&amp;objToWorld);</div>\n\
<div class=\"line\">            shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a32cf944375530a37382f8ff49045ddf6\">setMatrix</a>(&amp;objToWorld);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">else</span></div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"comment\">// For multiple instances, consolidation should be turned off</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// so that the GPU instancing can kick in.</span></div>\n\
<div class=\"line\">            wireItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a3fc9143c6cf463c2f4523a7bfb68c6e6\">setWantConsolidation</a>(<span class=\"keyword\">false</span>);</div>\n\
<div class=\"line\">            shadedItem-&gt;<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a3fc9143c6cf463c2f4523a7bfb68c6e6\">setWantConsolidation</a>(<span class=\"keyword\">false</span>);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            <span class=\"comment\">// If we have DAG instances of this shape then use the MPxSubSceneOverride instance</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// transform API to set up instance copies of the render items.  This will be faster</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// to render than creating render items for each instance, especially for large numbers</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// of instances.</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// Note this has to happen after the geometry and shaders are set, otherwise it will fail.</span></div>\n\
<div class=\"line\">            setInstanceTransformArray(*wireItem, instanceMatrixArray);</div>\n\
<div class=\"line\">            setInstanceTransformArray(*shadedItem, instanceMatrixArray);</div>\n\
<div class=\"line\">            setExtraInstanceData(*wireItem, colorParameterName_, instanceColorArray);</div>\n\
<div class=\"line\">            setExtraInstanceData(*shadedItem, colorParameterName_, instanceColorArray);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            <span class=\"comment\">// Once we change the render items into instance rendering they can&#39;t be changed back without</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// being deleted and re-created.  So if instances are deleted to leave only one remaining,</span></div>\n\
<div class=\"line\">            <span class=\"comment\">// just keep treating them the instance way.</span></div>\n\
<div class=\"line\">            fIsInstanceMode = <span class=\"keyword\">true</span>;</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span> FootPrintSubSceneOverride::addUIDrawables(</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html\">MHWRender::MUIDrawManager</a>&amp; drawManager,</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_frame_context.html\">MHWRender::MFrameContext</a>&amp; frameContext)</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_point.html\">MPoint</a> pos( 0.0, 0.0, 0.0 );</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_color.html\">MColor</a> textColor( 0.1f, 0.8f, 0.8f, 1.0f );</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_string.html\">MString</a> text( <span class=\"stringliteral\">&quot;Footprint&quot;</span> );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    drawManager.<a name=\"a75\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9008ebfa63c02670625076230d77c3f9\">beginDrawable</a>();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    drawManager.<a name=\"a76\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a9baede3e37abe9551e50a8c6be65ec4d\">setColor</a>( textColor );</div>\n\
<div class=\"line\">    drawManager.<a name=\"a77\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#adfd0cfdd2cc781dba3987f64cb638a67\">setFontSize</a>( MHWRender::MUIDrawManager::kSmallFontSize );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// MUIDrawManager assumes the object space of the original instance. If there</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// are multiple instances, each text needs to be drawn in the origin of each</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// instance, so we need to transform the coordinates from each instance&#39;s</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// object space to the original instance&#39;s object space.</span></div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix.html\">MMatrix</a> worldInverse0 = fInstanceInfoCache[0].fMatrix.<a name=\"a78\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_matrix.html#a8ca5ebc404566e2c4a16d4754772e082\">inverse</a>();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">for</span> (<span class=\"keyword\">auto</span> it = fInstanceInfoCache.begin(); it != fInstanceInfoCache.end(); it++)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        drawManager.<a name=\"a79\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a334e4280e5ddd4653c69f9703b5dd3b4\">text</a>((pos * it-&gt;second.fMatrix) * worldInverse0,</div>\n\
<div class=\"line\">                         text, MHWRender::MUIDrawManager::kCenter);</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    drawManager.<a name=\"a80\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#a78c343c25a05be7e46dd4b7ebab82ff6\">endDrawable</a>();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    fAreUIDrawablesDirty = <span class=\"keyword\">false</span>;</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">bool</span> FootPrintSubSceneOverride::getInstancedSelectionPath(</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_render_item.html\">MHWRender::MRenderItem</a>&amp; renderItem,</div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_intersection.html\">MHWRender::MIntersection</a>&amp; intersection,</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html\">MDagPath</a>&amp; dagPath)<span class=\"keyword\"> const</span></div>\n\
<div class=\"line\"><span class=\"keyword\"></span>{</div>\n\
<div class=\"line\">    <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span> numInstances = fInstanceDagPaths.length();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (numInstances == 0) <span class=\"keywordflow\">return</span> <span class=\"keyword\">false</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// The instance ID starts from 1 for the first DAG path. We use instanceID-1</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// as the index to DAG path array returned by MFnDagNode::getAllPaths().</span></div>\n\
<div class=\"line\">    <span class=\"keywordtype\">int</span> instanceId = intersection.<a name=\"a81\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_intersection.html#a35ab9f5cd2b7e3c46d5c661d9cd73571\">instanceID</a>();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (instanceId &gt; (<span class=\"keywordtype\">int</span>)numInstances) <span class=\"keywordflow\">return</span> <span class=\"keyword\">false</span>;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Return the first DAG path in case of no instancing.</span></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (numInstances == 1 || instanceId == -1)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        instanceId = 1;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_dag_path.html#a422aa5ec02565f757c13fe2873ed25d7\">MDagPath::getAPathTo</a>(fInstanceDagPaths[instanceId-1].transform(), dagPath);</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span> FootPrintSubSceneOverride::rebuildGeometryBuffers()</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    deleteGeometryBuffers();</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// VB for positions. We concatenate the heel and sole positions into a single vertex buffer.</span></div>\n\
<div class=\"line\">    <span class=\"comment\">// The index buffers will decide which positions will be selected for each render items.</span></div>\n\
<div class=\"line\">    <span class=\"keyword\">const</span> <a name=\"_a82\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_vertex_buffer_descriptor.html\">MHWRender::MVertexBufferDescriptor</a> vbDesc(<span class=\"stringliteral\">&quot;&quot;</span>,</div>\n\
<div class=\"line\">        MHWRender::MGeometry::kPosition, MHWRender::MGeometry::kFloat, 3);</div>\n\
<div class=\"line\">    fPositionBuffer = <span class=\"keyword\">new</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_vertex_buffer.html\">MHWRender::MVertexBuffer</a>(vbDesc);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fPositionBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">float</span>* positions = (<span class=\"keywordtype\">float</span>*)fPositionBuffer-&gt;acquire(soleCount+heelCount, <span class=\"keyword\">true</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (positions)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keywordtype\">int</span> verticesPointerOffset = 0;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            <span class=\"keywordflow\">for</span> (<span class=\"keywordtype\">int</span> currentVertex = 0 ; currentVertex &lt; soleCount+heelCount; ++currentVertex)</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">if</span> (currentVertex &lt; heelCount)</div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    <span class=\"keywordtype\">int</span> heelVtx = currentVertex;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = heel[heelVtx][0] * fMultiplier;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = heel[heelVtx][1] * fMultiplier;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = heel[heelVtx][2] * fMultiplier;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">else</span></div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    <span class=\"keywordtype\">int</span> soleVtx = currentVertex - heelCount;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = sole[soleVtx][0] * fMultiplier;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = sole[soleVtx][1] * fMultiplier;</div>\n\
<div class=\"line\">                    positions[verticesPointerOffset++] = sole[soleVtx][2] * fMultiplier;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            fPositionBuffer-&gt;commit(positions);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// IB for the wireframe item</span></div>\n\
<div class=\"line\">    fWireIndexBuffer = <span class=\"keyword\">new</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_index_buffer.html\">MHWRender::MIndexBuffer</a>(MHWRender::MGeometry::kUnsignedInt32);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fWireIndexBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> primitiveIndex = 0;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> startIndex = 0;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> numPrimitive = heelCount + soleCount - 2;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> numIndex = numPrimitive * 2;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span>* indices = (<span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span>*)fWireIndexBuffer-&gt;acquire(numIndex, <span class=\"keyword\">true</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (indices)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">for</span> (<span class=\"keywordtype\">int</span> i = 0; i &lt; numIndex; )</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">if</span> (i &lt; (heelCount - 1) * 2)</div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    startIndex = 0;</div>\n\
<div class=\"line\">                    primitiveIndex = i / 2;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">else</span></div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    startIndex = heelCount;</div>\n\
<div class=\"line\">                    primitiveIndex = i / 2 - heelCount + 1;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">                indices[i++] = startIndex + primitiveIndex;</div>\n\
<div class=\"line\">                indices[i++] = startIndex + primitiveIndex + 1;</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            fWireIndexBuffer-&gt;commit(indices);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// IB for the shaded item</span></div>\n\
<div class=\"line\">    fShadedIndexBuffer = <span class=\"keyword\">new</span> <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_index_buffer.html\">MHWRender::MIndexBuffer</a>(MHWRender::MGeometry::kUnsignedInt32);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fShadedIndexBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> primitiveIndex = 0;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> startIndex = 0;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> numPrimitive = heelCount + soleCount - 4;</div>\n\
<div class=\"line\">        <span class=\"keywordtype\">int</span> numIndex = numPrimitive * 3;</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">        <span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span>* indices = (<span class=\"keywordtype\">unsigned</span> <span class=\"keywordtype\">int</span>*)fShadedIndexBuffer-&gt;acquire(numIndex, <span class=\"keyword\">true</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">if</span> (indices)</div>\n\
<div class=\"line\">        {</div>\n\
<div class=\"line\">            <span class=\"keywordflow\">for</span> (<span class=\"keywordtype\">int</span> i = 0; i &lt; numIndex; )</div>\n\
<div class=\"line\">            {</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">if</span> (i &lt; (heelCount - 2) * 3)</div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    startIndex = 0;</div>\n\
<div class=\"line\">                    primitiveIndex = i / 3;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">                <span class=\"keywordflow\">else</span></div>\n\
<div class=\"line\">                {</div>\n\
<div class=\"line\">                    startIndex = heelCount;</div>\n\
<div class=\"line\">                    primitiveIndex = i / 3 - heelCount + 2;</div>\n\
<div class=\"line\">                }</div>\n\
<div class=\"line\">                indices[i++] = startIndex;</div>\n\
<div class=\"line\">                indices[i++] = startIndex + primitiveIndex + 1;</div>\n\
<div class=\"line\">                indices[i++] = startIndex + primitiveIndex + 2;</div>\n\
<div class=\"line\">            }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">            fShadedIndexBuffer-&gt;commit(indices);</div>\n\
<div class=\"line\">        }</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"keywordtype\">void</span> FootPrintSubSceneOverride::deleteGeometryBuffers()</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fPositionBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keyword\">delete</span> fPositionBuffer;</div>\n\
<div class=\"line\">        fPositionBuffer = NULL;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fWireIndexBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keyword\">delete</span> fWireIndexBuffer;</div>\n\
<div class=\"line\">        fWireIndexBuffer = NULL;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (fShadedIndexBuffer)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        <span class=\"keyword\">delete</span> fShadedIndexBuffer;</div>\n\
<div class=\"line\">        fShadedIndexBuffer = NULL;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">// Plugin Registration</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"><span class=\"comment\">//---------------------------------------------------------------------------</span></div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> initializePlugin( <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a> obj )</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> status;</div>\n\
<div class=\"line\">    <a name=\"_a83\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_plugin.html\">MFnPlugin</a> plugin(obj, PLUGIN_COMPANY, <span class=\"stringliteral\">&quot;1.0&quot;</span>, <span class=\"stringliteral\">&quot;Any&quot;</span>);</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    status = plugin.registerNode(</div>\n\
<div class=\"line\">        <span class=\"stringliteral\">&quot;footPrint_SubSceneOverride&quot;</span>,</div>\n\
<div class=\"line\">        footPrint::id,</div>\n\
<div class=\"line\">        &amp;footPrint::creator,</div>\n\
<div class=\"line\">        &amp;footPrint::initialize,</div>\n\
<div class=\"line\">        MPxNode::kLocatorNode,</div>\n\
<div class=\"line\">        &amp;footPrint::drawDbClassification);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!status)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        status.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;registerNode&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    status = <a name=\"a84\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_registry.html#af075a48779d4514f296c42034f9298cb\">MHWRender::MDrawRegistry::registerSubSceneOverrideCreator</a>(</div>\n\
<div class=\"line\">            footPrint::drawDbClassification,</div>\n\
<div class=\"line\">            footPrint::drawRegistrantId,</div>\n\
<div class=\"line\">            FootPrintSubSceneOverride::Creator);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!status)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        status.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;registerSubSceneOverrideCreator&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Register a custom selection mask with priority 2 (same as locators by default).</span></div>\n\
<div class=\"line\">    <a name=\"a85\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_selection_mask.html#ab4cc6ba8300a9924dd443bb64b736744\">MSelectionMask::registerSelectionType</a>(<span class=\"stringliteral\">&quot;footPrintSelection&quot;</span>, 2);</div>\n\
<div class=\"line\">    status = <a name=\"a86\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_global.html#a09e405631e7cf680f8ac9d934ad73434\">MGlobal::executeCommand</a>(<span class=\"stringliteral\">&quot;selectType -byName \\&quot;footPrintSelection\\&quot; 1&quot;</span>);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">}</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\"><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> uninitializePlugin( <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_object.html\">MObject</a> obj)</div>\n\
<div class=\"line\">{</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html\">MStatus</a> status;</div>\n\
<div class=\"line\">    <a class=\"code\" href=\"#!/url=./cpp_ref/class_m_fn_plugin.html\">MFnPlugin</a> plugin( obj );</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    status = <a name=\"a87\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_h_w_render_1_1_m_draw_registry.html#aecdb63d6aa8b938e81dc3ce56ca42bcd\">MHWRender::MDrawRegistry::deregisterSubSceneOverrideCreator</a>(</div>\n\
<div class=\"line\">        footPrint::drawDbClassification,</div>\n\
<div class=\"line\">        footPrint::drawRegistrantId);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!status)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        status.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;deregisterSubSceneOverrideCreator&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    status = releaseShaders();</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!status)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        status.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;releaseShaders&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    status = plugin.deregisterNode( footPrint::id );</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">if</span> (!status)</div>\n\
<div class=\"line\">    {</div>\n\
<div class=\"line\">        status.<a class=\"code\" href=\"#!/url=./cpp_ref/class_m_status.html#a1f01a4748fea4d8bcced082df83f804d\">perror</a>(<span class=\"stringliteral\">&quot;deregisterNode&quot;</span>);</div>\n\
<div class=\"line\">        <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">    }</div>\n\
<div class=\"line\"></div>\n\
<div class=\"line\">    <span class=\"comment\">// Deregister custom selection mask</span></div>\n\
<div class=\"line\">    <a name=\"a88\"></a><a class=\"code\" href=\"#!/url=./cpp_ref/class_m_selection_mask.html#ae82a6cf818deb6b6310ad06e60b269ed\">MSelectionMask::deregisterSelectionType</a>(<span class=\"stringliteral\">&quot;footPrintSelection&quot;</span>);</div>\n\
<div class=\"line\">    <span class=\"keywordflow\">return</span> status;</div>\n\
<div class=\"line\">}</div>\n\
</div><!-- fragment --> </div><!-- contents -->\n\
</div><!-- doc-content -->\n\
<!-- start footer part -->\n\
\n\
      <div class=\"footer-block\"><a href=\"../html/ac.cmtdialog.htm\" class=\"comments-anchor\" target=\"_blank\"><span class=\"comments-link\">Please send us your comment about this page</span></a></div></div>\n\
   </div></body>\n\
</html>\n\
";