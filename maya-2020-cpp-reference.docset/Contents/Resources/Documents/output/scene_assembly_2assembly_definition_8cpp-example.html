<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
<title>C++ API Reference: sceneAssembly/assemblyDefinition.cpp</title>
</head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('scene_assembly_2assembly_definition_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
<div>
<div class="head">
<h1>C++ API Reference: sceneAssembly/assemblyDefinition.cpp</h1>
</div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>Main Page</span></a></li>
<li><a href="./pages.html"><span>Related Pages</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
<li>
<div class="MSearchBoxInactive" id="MSearchBox">
<span class="left">
<img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="cpp_ref/search/mag_sel.png"/>
<input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
</span><span class="right">
<a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="cpp_ref/search/close.png"/></a>
</span>
</div>
</li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<!-- window showing the filter options -->
<!-- iframe showing the search results (closed by default) -->
<div class="header">
<div class="headertitle">
<div class="title">sceneAssembly/assemblyDefinition.cpp</div> </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="preprocessor">#include "assemblyDefinition.h"</span></div>
<div class="line"><span class="preprocessor">#include "adskRepresentationFactory.h"</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MPxRepresentation.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnAssembly.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnDependencyNode.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnContainerNode.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnTypedAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MFnCompoundAttribute.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MStringArray.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MNamespace.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MGlobal.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MExternalContentInfoTable.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;maya/MExternalContentLocationTable.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span> <span class="comment">// For CHECK_MSTATUS_AND_RETURN_IT.</span></div>
<div class="line"><span class="keyword">using namespace </span>std;            <span class="comment">// For CHECK_MSTATUS macros.</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define DIMOF(array) (sizeof(array)/sizeof((array)[0]))</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// LOCAL DECLARATIONS</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*----- constants -----*/</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> ICON_NAME = <span class="stringliteral">"out_assemblyDefinition.png"</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <a name="_a0"></a><a class="code" href="./class_m_string.html">MString</a> REPRESENTATIONS_ATTR_UINAME( <span class="stringliteral">"representations"</span> );</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> REPRESENTATIONS_ATTR_SHORTNAME( <span class="stringliteral">"rep"</span> );</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> REPRESENTATION_DATA_ATTR_UINAME( <span class="stringliteral">"repData"</span> );</div>
<div class="line"><span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> REPRESENTATION_DATA_ATTR_SHORTNAME( <span class="stringliteral">"rda"</span> );</div>
<div class="line"></div>
<div class="line"><span class="comment">/*----- types and enumerations -----*/</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">typedef</span> std::map&lt;std::string, AdskRepresentationFactory*&gt;</div>
<div class="line">RepresentationFactories;</div>
<div class="line"></div>
<div class="line"><span class="comment">/*----- variables -----*/</span></div>
<div class="line"></div>
<div class="line">RepresentationFactories repFactories;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"><span class="comment">// CLASS AssemblyDefinition</span></div>
<div class="line"><span class="comment">//==============================================================================</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <a name="_a1"></a><a class="code" href="./class_m_type_id.html">MTypeId</a> AssemblyDefinition::id(0x580000b2);</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::typeName(<span class="stringliteral">"assemblyDefinition"</span>);</div>
<div class="line"></div>
<div class="line"><a name="_a2"></a><a class="code" href="./class_m_object.html">MObject</a> AssemblyDefinition::aRepresentations;</div>
<div class="line"><a class="code" href="./class_m_object.html">MObject</a> AssemblyDefinition::aRepName;</div>
<div class="line"><a class="code" href="./class_m_object.html">MObject</a> AssemblyDefinition::aRepLabel;</div>
<div class="line"><a class="code" href="./class_m_object.html">MObject</a> AssemblyDefinition::aRepType;</div>
<div class="line"><a class="code" href="./class_m_object.html">MObject</a> AssemblyDefinition::aRepData;</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span>* AssemblyDefinition::creator()</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">new</span> AssemblyDefinition;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a name="_a3"></a><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::initRepresentations(</div>
<div class="line">   eStorable storable,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;  aRepresentations,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;  aRepName,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;  aRepLabel,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;  aRepType,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;  aRepData</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"> <a name="_a4"></a><a class="code" href="./class_m_fn_typed_attribute.html">MFnTypedAttribute</a> stringAttrFn;</div>
<div class="line">   aRepName = stringAttrFn.<a name="a5"></a><a class="code" href="./class_m_fn_typed_attribute.html#af785af0a66bd4a4da1d9f7bd74d4de0a">create</a>(<span class="stringliteral">"repName"</span>, <span class="stringliteral">"rna"</span>, MFnData::kString);</div>
<div class="line">   stat = <a name="a6"></a><a class="code" href="./class_m_px_node.html#a837094252166c0b365fafb53e4a0203b">MPxNode::addAttribute</a>(aRepName);</div>
<div class="line"> <a name="a7"></a><a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"></div>
<div class="line">   aRepLabel = stringAttrFn.<a class="code" href="./class_m_fn_typed_attribute.html#af785af0a66bd4a4da1d9f7bd74d4de0a">create</a>(<span class="stringliteral">"repLabel"</span>, <span class="stringliteral">"rla"</span>, MFnData::kString);</div>
<div class="line">   stat = <a class="code" href="./class_m_px_node.html#a837094252166c0b365fafb53e4a0203b">MPxNode::addAttribute</a>(aRepLabel);</div>
<div class="line"> <a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"></div>
<div class="line">   aRepType = stringAttrFn.<a class="code" href="./class_m_fn_typed_attribute.html#af785af0a66bd4a4da1d9f7bd74d4de0a">create</a>(<span class="stringliteral">"repType"</span>, <span class="stringliteral">"rty"</span>, MFnData::kString);</div>
<div class="line">   stat = <a class="code" href="./class_m_px_node.html#a837094252166c0b365fafb53e4a0203b">MPxNode::addAttribute</a>(aRepType);</div>
<div class="line"> <a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"></div>
<div class="line">   aRepData = stringAttrFn.<a class="code" href="./class_m_fn_typed_attribute.html#af785af0a66bd4a4da1d9f7bd74d4de0a">create</a>(</div>
<div class="line">      REPRESENTATION_DATA_ATTR_UINAME, REPRESENTATION_DATA_ATTR_SHORTNAME,</div>
<div class="line">      MFnData::kString);   </div>
<div class="line">   stat = <a class="code" href="./class_m_px_node.html#a837094252166c0b365fafb53e4a0203b">MPxNode::addAttribute</a>(aRepData);</div>
<div class="line"> <a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// List of representations.</span></div>
<div class="line"> <a name="_a8"></a><a class="code" href="./class_m_fn_compound_attribute.html">MFnCompoundAttribute</a> representationsAttrFn;</div>
<div class="line">   aRepresentations = representationsAttrFn.<a name="a9"></a><a class="code" href="./class_m_fn_compound_attribute.html#a94a6d5e93a85fb18bc7accc18ee0d9f6">create</a>(</div>
<div class="line">      REPRESENTATIONS_ATTR_UINAME, REPRESENTATIONS_ATTR_SHORTNAME);  </div>
<div class="line"> <span class="keywordflow">if</span> (storable == kNotStorable) {</div>
<div class="line"> <a name="a10"></a><a class="code" href="./group___macros.html#gae3dc78724237805e00a767b587b7cf79">CHECK_MSTATUS</a>(representationsAttrFn.<a name="a11"></a><a class="code" href="./class_m_fn_attribute.html#a8d2be80de133a200a455bf9e2ac1b709">setStorable</a>(<span class="keyword">false</span>));</div>
<div class="line">   }</div>
<div class="line"> <a class="code" href="./group___macros.html#gae3dc78724237805e00a767b587b7cf79">CHECK_MSTATUS</a>(representationsAttrFn.<a name="a12"></a><a class="code" href="./class_m_fn_attribute.html#acc80b84249f9c028f2c6d085a026b50c">setArray</a>(<span class="keyword">true</span>));</div>
<div class="line">   representationsAttrFn.<a name="a13"></a><a class="code" href="./class_m_fn_compound_attribute.html#a45469146fcfb96cdc96ad3a07df5dfa7">addChild</a>(aRepName);</div>
<div class="line">   representationsAttrFn.<a class="code" href="./class_m_fn_compound_attribute.html#a45469146fcfb96cdc96ad3a07df5dfa7">addChild</a>(aRepLabel);</div>
<div class="line">   representationsAttrFn.<a class="code" href="./class_m_fn_compound_attribute.html#a45469146fcfb96cdc96ad3a07df5dfa7">addChild</a>(aRepType);</div>
<div class="line">   representationsAttrFn.<a class="code" href="./class_m_fn_compound_attribute.html#a45469146fcfb96cdc96ad3a07df5dfa7">addChild</a>(aRepData);</div>
<div class="line">   stat = <a class="code" href="./class_m_px_node.html#a837094252166c0b365fafb53e4a0203b">MPxNode::addAttribute</a>(aRepresentations);</div>
<div class="line"> <a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::initialize()</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Initialize our storable list of representations.</span></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat = initRepresentations(</div>
<div class="line">      kStorable, aRepresentations, aRepName, aRepLabel, aRepType, aRepData);</div>
<div class="line"> <a class="code" href="./group___macros.html#ga2f3f1ac62ed663f5efd20ff99991335b">CHECK_MSTATUS_AND_RETURN_IT</a>(stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> stat;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::uninitialize()</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Delete and remove any representation factories left behind.</span></div>
<div class="line">   RepresentationFactories::iterator i = repFactories.begin();</div>
<div class="line"> <span class="keywordflow">for</span> (; i != repFactories.end(); ++i) {</div>
<div class="line"> <span class="keyword">delete</span> i-&gt;second;</div>
<div class="line">   }</div>
<div class="line">   repFactories.<a name="a14"></a><a class="code" href="./class_m_status.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <a name="a15"></a><a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a name="_a16"></a><a class="code" href="./class_m_string_array.html">MStringArray</a> AssemblyDefinition::registeredTypes()</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> repTypes;</div>
<div class="line">   RepresentationFactories::const_iterator i = repFactories.<a name="a17"></a><a class="code" href="./class_m_string_array.html#a1ebac8c16ac95b2b81d78055841992f3">begin</a>();</div>
<div class="line"> <span class="keywordflow">for</span> (; i != repFactories.end(); ++i) {</div>
<div class="line">      repTypes.<a name="a18"></a><a class="code" href="./class_m_string_array.html#a18d06b3d0af1426e654ac2cc1dc86c60">append</a>(<a class="code" href="./class_m_string.html">MString</a>(i-&gt;first.c_str()));</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> repTypes;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AssemblyDefinition::registerRepresentationFactory(</div>
<div class="line">   AdskRepresentationFactory* f</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (f == 0 ||</div>
<div class="line">       repFactories.find(f-&gt;getType().asChar()) != repFactories.end()) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line">   repFactories[f-&gt;getType().asChar()] = f;</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AssemblyDefinition::deregisterRepresentationFactory(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; type</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line">   RepresentationFactories::iterator found = repFactories.find(type.<a name="a19"></a><a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"> <span class="keywordflow">if</span> (found == repFactories.end()) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="keyword">delete</span> found-&gt;second;</div>
<div class="line">   repFactories.erase(found);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"> <span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">AssemblyDefinition::AssemblyDefinition() : fActiveRep(nullptr)</div>
<div class="line">{}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">AssemblyDefinition::~AssemblyDefinition()</div>
<div class="line">{}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::getExternalContent(</div>
<div class="line"> <a name="_a20"></a><a class="code" href="./class_m_external_content_info_table.html">MExternalContentInfoTable</a>&amp; table</div>
<div class="line">)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> repNames( getRepresentations( &amp;status ) );</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nbReps = repNames.length();</div>
<div class="line"> <span class="keywordflow">if</span> (status != MS::kSuccess || nbReps == 0) {</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// To be friendly to the file path editor, which assumes all paths are stored</span></div>
<div class="line"> <span class="comment">// verbatim in plugs, we provide the external content entries with the plug</span></div>
<div class="line"> <span class="comment">// name as the key.  This simplified approach can be changed if the filepath</span></div>
<div class="line"> <span class="comment">// editor supports a more generic interface in the future.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// This is based on assumptions (true as of this writing) that</span></div>
<div class="line"> <span class="comment">// representations will have, at most, a single external content item, and</span></div>
<div class="line"> <span class="comment">// that the key that representations give for the item is irrelevant (they</span></div>
<div class="line"> <span class="comment">// will read the path from the first item we pass back in setExternalContent,</span></div>
<div class="line"> <span class="comment">// no matter what its name is).</span></div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> entryFormat( <span class="stringliteral">"^1s[^2s].^3s"</span> );</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> entryName;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nbReps; ++i) {</div>
<div class="line">      RepresentationPtr rep( representationFactory( repNames[ i ] ) );</div>
<div class="line"> <span class="keywordflow">if</span> ( rep.get() == 0 ) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_external_content_info_table.html">MExternalContentInfoTable</a> repTable;</div>
<div class="line">      rep-&gt;getExternalContent( repTable );</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( repTable.<a name="a21"></a><a class="code" href="./class_m_external_content_info_table.html#a580388f31f60c46fac867ca48a48da1e">length</a>() == 0 ) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unusedKey;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> unresolvedLocation;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> resolvedLocation;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> contextNodeFullName;</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> roles;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// As explained above, we are only reading the first item in the table, as</span></div>
<div class="line"> <span class="comment">// we know that the currently implemented representations only have one,</span></div>
<div class="line"> <span class="comment">// at most.  The case where there is no external content has already been</span></div>
<div class="line"> <span class="comment">// filtered out at this point.</span></div>
<div class="line"> <span class="keywordflow">if</span> ( repTable.<a name="a22"></a><a class="code" href="./class_m_external_content_info_table.html#aa52fbca9287699057b1ac28c99a03297">getEntry</a>(</div>
<div class="line">              0, unusedKey, unresolvedLocation, resolvedLocation, contextNodeFullName, roles ) !=</div>
<div class="line"> <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a> ) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> plugIndex;</div>
<div class="line">      plugIndex += i;</div>
<div class="line">      entryName.<a name="a23"></a><a class="code" href="./class_m_string.html#a07ae464181c795f43fa1bcc288acff91">format</a>( entryFormat, REPRESENTATIONS_ATTR_UINAME,</div>
<div class="line">                        plugIndex, REPRESENTATION_DATA_ATTR_UINAME );</div>
<div class="line"></div>
<div class="line">      table.<a name="a24"></a><a class="code" href="./class_m_external_content_info_table.html#a065dfd4fad52eddb6ec6f612fc80dfa0">addResolvedEntry</a>(</div>
<div class="line">         entryName, unresolvedLocation, resolvedLocation, contextNodeFullName, roles );</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::setExternalContent(</div>
<div class="line"> <span class="keyword">const</span> <a name="_a25"></a><a class="code" href="./class_m_external_content_location_table.html">MExternalContentLocationTable</a>&amp; table</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> repNames( getRepresentations( &amp;status ) );</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nbReps = repNames.length();</div>
<div class="line"> <span class="keywordflow">if</span> (status != MS::kSuccess || nbReps == 0) {</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nbEntries = table.<a name="a26"></a><a class="code" href="./class_m_external_content_location_table.html#a580388f31f60c46fac867ca48a48da1e">length</a>();</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> oldActive = getActive();</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; nbEntries; ++i) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> key;</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> location;</div>
<div class="line">      table.<a name="a27"></a><a class="code" href="./class_m_external_content_location_table.html#a64fc25e6e6fa3433ee41b9bff040e834">getEntry</a>( i, key, location );</div>
<div class="line"></div>
<div class="line"> <span class="comment">// The key name is set in getExternalContent, and will be along the</span></div>
<div class="line"> <span class="comment">// lines of</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">//    representations[0].repData</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// The only information that is relevant for this implementation is the</span></div>
<div class="line"> <span class="comment">// index as the rest is implicit.  So just extract the index by finding</span></div>
<div class="line"> <span class="comment">// what lies between brackets.</span></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> openingBracketIdx = key.<a name="a28"></a><a class="code" href="./class_m_string.html#a7487f32861d955d3ac0d8722cc5797b2">index</a>( <span class="charliteral">'['</span> );</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> closingBracketIdx = key.<a class="code" href="./class_m_string.html#a7487f32861d955d3ac0d8722cc5797b2">index</a>( <span class="charliteral">']'</span> );</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( openingBracketIdx &lt; 0 || closingBracketIdx &lt; 0 ) {</div>
<div class="line"> <span class="comment">// Key syntax got garbled, not much we can do.</span></div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> repIdxStr(</div>
<div class="line">         key.<a name="a29"></a><a class="code" href="./class_m_string.html#a41ba57372bc1082383b4f1929a8030fa">substring</a>( openingBracketIdx + 1, closingBracketIdx - 1 ) );</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> repIdx = repIdxStr.<a name="a30"></a><a class="code" href="./class_m_string.html#a33a3313205686174bef095f523f9408b">asUnsigned</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> ( repIdx &gt;= nbReps ) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      std::unique_ptr&lt; MPxRepresentation &gt; rep(</div>
<div class="line">         representationFactory( repNames[ repIdx ] ) );</div>
<div class="line"> <span class="keywordflow">if</span> ( rep.get() == 0 ) {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// Create a table just for the representation.  The entry name is not</span></div>
<div class="line"> <span class="comment">// really important in this limited implementation: we know in advance</span></div>
<div class="line"> <span class="comment">// that the currently existing representations will only use the first</span></div>
<div class="line"> <span class="comment">// item, whatever its name.</span></div>
<div class="line"> <a class="code" href="./class_m_external_content_location_table.html">MExternalContentLocationTable</a> repTable;</div>
<div class="line">      repTable.<a name="a31"></a><a class="code" href="./class_m_external_content_location_table.html#a6488faa3dec73da625fe519162a1cec0">addEntry</a>( <span class="stringliteral">"Data"</span>, location );</div>
<div class="line">      rep-&gt;setExternalContent( repTable );</div>
<div class="line"> </div>
<div class="line"> <span class="comment">// Since the file has been changed,</span></div>
<div class="line"> <span class="comment">// refresh representation if it is active</span></div>
<div class="line"> <span class="keywordflow">if</span>(repNames[ repIdx ] == oldActive)</div>
<div class="line">      {</div>
<div class="line">        activate(oldActive);</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::createRepresentation(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; input,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; type,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; representation,</div>
<div class="line"> <a name="_a32"></a><a class="code" href="./class_m_dag_modifier.html">MDagModifier</a>*  <span class="comment">/* undoRedo */</span>,</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a>*       status</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Early out: unknown representation type.</span></div>
<div class="line">   RepresentationFactories::const_iterator found =</div>
<div class="line">      repFactories.find(type.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"> <span class="keywordflow">if</span> (found == repFactories.end()) {</div>
<div class="line"> <span class="keywordflow">if</span> (status) *status = <a name="a33"></a><a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_string.html">MString</a>();</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="keyword">const</span> AdskRepresentationFactory* <span class="keyword">const</span> repFactory = found-&gt;second;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// If it wasn't given to us, set the return representation name.</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> newRepName = </div>
<div class="line">       (representation.<a name="a34"></a><a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() &gt; 0) ?</div>
<div class="line">       representation :</div>
<div class="line">       repFactory-&gt;creationName(<span class="keyword">this</span>, input);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// If the factory couldn't create a name for the representation,</span></div>
<div class="line"> <span class="comment">// report failure.</span></div>
<div class="line"> <span class="keywordflow">if</span> (newRepName.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() == 0) {</div>
<div class="line"> <span class="keywordflow">if</span> (status) *status = <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_string.html">MString</a>();</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   performCreateRepresentation(</div>
<div class="line">      newRepName,                             <span class="comment">// Name</span></div>
<div class="line">      type,                                   <span class="comment">// Type</span></div>
<div class="line">      repFactory-&gt;creationLabel(<span class="keyword">this</span>, input), <span class="comment">// Label</span></div>
<div class="line">      repFactory-&gt;creationData(<span class="keyword">this</span>, input)   <span class="comment">// Data</span></div>
<div class="line">   );</div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">if</span> (status) *status = <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> newRepName;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AssemblyDefinition::inactivateRep()</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Unload the previously-active representation (if any).</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> oldActive = getActive();</div>
<div class="line"> <span class="keywordflow">if</span> (oldActive.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() != 0) {</div>
<div class="line"> <span class="keywordtype">bool</span> returnVal = fActiveRep.get() ? fActiveRep-&gt;inactivate(): <span class="keyword">false</span>;      </div>
<div class="line"> <span class="keywordflow">if</span> (!returnVal) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">      }</div>
<div class="line"> <span class="comment">// Null out the active representation only if inactivation succeeds.</span></div>
<div class="line">      fActiveRep = RepresentationPtr();</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AssemblyDefinition::activateRep(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; representation)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Activation of an empty string is a no-op.</span></div>
<div class="line"> <span class="keywordflow">if</span> (representation.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() != 0) {</div>
<div class="line">      fActiveRep = RepresentationPtr(representationFactory(representation));</div>
<div class="line"> <span class="keywordflow">return</span> fActiveRep.get() ?  fActiveRep-&gt;activate() : <span class="keyword">false</span>;</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getActive()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">return</span> fActiveRep.get() ? fActiveRep-&gt;getName() : <a class="code" href="./class_m_string.html">MString</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="./class_m_string_array.html">MStringArray</a> AssemblyDefinition::getRepresentations(<a class="code" href="./class_m_status.html">MStatus</a>* status)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> representations;</div>
<div class="line"> <a name="_a35"></a><a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;static_cast&lt;int&gt;(representationsPlug.numElements()); ++i) {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationPlug = representationsPlug[i];</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> namePlug = representationPlug.<a name="a36"></a><a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepName);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> name;</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status_ = namePlug.<a name="a37"></a><a class="code" href="./class_m_plug.html#ab017c746e6e0c13bf994b2458d3b5eee">getValue</a>(name);</div>
<div class="line"> <span class="keywordflow">if</span> (status_ != MS::kSuccess) {</div>
<div class="line"> <span class="comment">// Retrieving the plug name should never fail. If it did,</span></div>
<div class="line"> <span class="comment">// something went terribly wrong, so let's report it.</span></div>
<div class="line"> <a class="code" href="./group___macros.html#gae3dc78724237805e00a767b587b7cf79">CHECK_MSTATUS</a>(status_);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      representations.<a class="code" href="./class_m_string_array.html#a18d06b3d0af1426e654ac2cc1dc86c60">append</a>(name);</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// There exists no documented reason that would cause this function</span></div>
<div class="line"> <span class="comment">// to fail. We therefore unconditionally return success.</span></div>
<div class="line"> <span class="keywordflow">if</span> (status != 0) {</div>
<div class="line">       *status = MS::kSuccess;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> representations;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getRepType(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">return</span> getRepAttrValue(repName, aRepType);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getRepLabel(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">return</span> getRepAttrValue(repName, aRepLabel);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getRepData(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">return</span> getRepAttrValue(repName, aRepData);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::setRepData(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; data</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line">   setRepAttrValue( repName, aRepData, data );</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getRepNamespace()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="comment">// returning an empty string will make sure that no namespace is created for this assembly</span></div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_string.html">MString</a>();   </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string_array.html">MStringArray</a> AssemblyDefinition::repTypes()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="comment">// This is the representation creation query for existing assembly</span></div>
<div class="line"> <span class="comment">// definitions.  Previously-created representations impose no</span></div>
<div class="line"> <span class="comment">// constraints to new representation creation, so simply return the</span></div>
<div class="line"> <span class="comment">// full list of representation types.</span></div>
<div class="line"> <span class="keywordflow">return</span> registeredTypes();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::deleteRepresentation(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName)</div>
<div class="line">{   </div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line"> </div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> numElements = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(representationsPlug.numElements());</div>
<div class="line"> <span class="keyword">static</span> <a class="code" href="./class_m_object.html">MObject</a> attribs[] = {aRepName, aRepData, aRepLabel, aRepType};</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numElements; ++i) </div>
<div class="line">   {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationPlug = representationsPlug[i];</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> namePlug = representationPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepName);</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> value;    </div>
<div class="line">      namePlug.<a class="code" href="./class_m_plug.html#ab017c746e6e0c13bf994b2458d3b5eee">getValue</a>(value);</div>
<div class="line"> <span class="keywordflow">if</span> (value == repName) {       </div>
<div class="line"> <span class="comment">// Keep the representation list compacted.</span></div>
<div class="line"> <span class="comment">// Overwrite the item data that we want to delete by copying </span></div>
<div class="line"> <span class="comment">// all the data items -1 position where they are.</span></div>
<div class="line"> <span class="comment">// Delete the last item of the list.       </span></div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = i + 1 ; j &lt; numElements; j++)</div>
<div class="line">         {          </div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; DIMOF(attribs); ++k){</div>
<div class="line">               representationsPlug[j].child(attribs[k]).getValue(value);</div>
<div class="line">               representationsPlug[j-1].child(attribs[k]).setValue(value);               </div>
<div class="line">            }           </div>
<div class="line">         }  </div>
<div class="line"></div>
<div class="line"> <span class="comment">// remove the numElements-1 item.</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> cmd(<span class="stringliteral">"removeMultiInstance -b true "</span>);</div>
<div class="line">         cmd += representationsPlug[numElements-1].name();</div>
<div class="line"> <a name="a38"></a><a class="code" href="./class_m_global.html#a09e405631e7cf680f8ac9d934ad73434">MGlobal::executeCommand</a>(cmd);  </div>
<div class="line"> </div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> status;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::deleteAllRepresentations()</div>
<div class="line">{  </div>
<div class="line">   clearRepresentationList();</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="keywordflow">return</span> representationsPlug.numElements() == 0 ? <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a> : <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;  </div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a name="_a39"></a><a class="code" href="./class_m_px_representation.html">MPxRepresentation</a>* AssemblyDefinition::representationFactory(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; name</div>
<div class="line">)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> repType = getRepType(name);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (repType.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() &gt; 0) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> repData = getRepData(name);</div>
<div class="line">      RepresentationFactories::const_iterator found =</div>
<div class="line">         repFactories.find(repType.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>());</div>
<div class="line"> <span class="keywordflow">if</span> (found != repFactories.end()) {</div>
<div class="line"> <span class="comment">// Representations require a non-const pointer to their</span></div>
<div class="line"> <span class="comment">// assembly, which they will then use in a const-correct way.</span></div>
<div class="line"> <span class="keywordflow">return</span> found-&gt;second-&gt;create(</div>
<div class="line">            const_cast&lt;AssemblyDefinition*&gt;(<span class="keyword">this</span>), name, repData);</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::postLoad()</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Activate the default representation, which is representation 0.</span></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> representations = getRepresentations(&amp;status);</div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> len = representations.<a name="a40"></a><a class="code" href="./class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>();</div>
<div class="line"> <span class="keywordflow">if</span> (status != MS::kSuccess || len == 0) {</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// If we can't activate a representation (because our parent assembly is</span></div>
<div class="line"> <span class="comment">// being called with activateNonRecursive()), stop now.  As of</span></div>
<div class="line"> <span class="comment">// 20-Nov-2012, nesting assembly definitions is not a recommended</span></div>
<div class="line"> <span class="comment">// workflow, but it is not prohibited.</span></div>
<div class="line"> <a name="_a41"></a><a class="code" href="./class_m_fn_assembly.html">MFnAssembly</a> aFn(thisMObject());</div>
<div class="line"> <span class="keywordflow">if</span> (!aFn.canActivate()) {</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// MFnAssembly::activate() must be called to benefit from scene</span></div>
<div class="line"> <span class="comment">// assembly infrastructure activation services.</span></div>
<div class="line">   aFn.activate(representations[0]);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getDefaultIcon()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_string.html">MString</a>(ICON_NAME);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::postConstructor()</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// Set the assembly default icon.</span></div>
<div class="line"> <a name="_a42"></a><a class="code" href="./class_m_fn_dependency_node.html">MFnDependencyNode</a> <span class="keyword">self</span>(thisMObject());</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> status;</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> iconName = <span class="keyword">self</span>.findPlug(<a class="code" href="./class_m_string.html">MString</a>(<span class="stringliteral">"iconName"</span>), <span class="keyword">true</span>, &amp;status);</div>
<div class="line"> <span class="keywordflow">if</span> (status != <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>) {</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line">   iconName.<a name="a43"></a><a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(getDefaultIcon());</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::clearRepresentationList()</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_string_array.html">MStringArray</a> representations;</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;static_cast&lt;int&gt;(representationsPlug.numElements()); ++i) {</div>
<div class="line">      representations.<a class="code" href="./class_m_string_array.html#a18d06b3d0af1426e654ac2cc1dc86c60">append</a>(representationsPlug[i].name());</div>
<div class="line">   }   </div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;static_cast&lt;int&gt;(representations.<a class="code" href="./class_m_string_array.html#a580388f31f60c46fac867ca48a48da1e">length</a>()); ++i) {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> cmd(<span class="stringliteral">"removeMultiInstance -b true "</span>);</div>
<div class="line">      cmd += representations[i];</div>
<div class="line"> <a class="code" href="./class_m_global.html#a09e405631e7cf680f8ac9d934ad73434">MGlobal::executeCommand</a>(cmd);</div>
<div class="line">   }   </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> AssemblyDefinition::performCreateRepresentation(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; name,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; type,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; label,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; data</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="keywordtype">int</span> nbElements = representationsPlug.numElements();</div>
<div class="line">   representationsPlug.selectAncestorLogicalIndex(nbElements, aRepresentations);</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> namePlug = representationsPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepName);</div>
<div class="line">   namePlug.<a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(name);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> labelPlug = representationsPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepLabel);</div>
<div class="line">   labelPlug.<a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(label);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// In the future, could consider making representation type as not editable.</span></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> typePlug = representationsPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepType);</div>
<div class="line">   typePlug.<a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(type);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> dataPlug = representationsPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepData);</div>
<div class="line">   dataPlug.<a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(data);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::getRepAttrValue(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;       repAttr</div>
<div class="line">)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">if</span> (repName.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_string.html">MString</a>();</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> data;</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="comment">// O(n) search over all representations should not matter because</span></div>
<div class="line"> <span class="comment">// the number of representations is small.</span></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> numElements = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(representationsPlug.numElements());</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numElements; ++i) {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationPlug = representationsPlug[i];</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> namePlug = representationPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepName);</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> name;</div>
<div class="line">      namePlug.<a class="code" href="./class_m_plug.html#ab017c746e6e0c13bf994b2458d3b5eee">getValue</a>(name);</div>
<div class="line"> <span class="keywordflow">if</span> (name == repName) {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> dataPlug = representationPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(repAttr);</div>
<div class="line">         dataPlug.<a class="code" href="./class_m_plug.html#ab017c746e6e0c13bf994b2458d3b5eee">getValue</a>(data);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> data;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::setRepAttrValue(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName,</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a>&amp;       repAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; data</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (repName.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80a1ef6c2d725fb4bec3e7e840d28adbc00">MStatus::kFailure</a>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationsPlug(thisMObject(), aRepresentations);</div>
<div class="line"> <span class="comment">// O(n) search over all representations should not matter because</span></div>
<div class="line"> <span class="comment">// the number of representations is small.</span></div>
<div class="line"> <span class="keyword">const</span> <span class="keywordtype">int</span> numElements = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(representationsPlug.numElements());</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;numElements; ++i) {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> representationPlug = representationsPlug[i];</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> namePlug = representationPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(aRepName);</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> name;</div>
<div class="line">      namePlug.<a class="code" href="./class_m_plug.html#ab017c746e6e0c13bf994b2458d3b5eee">getValue</a>(name);</div>
<div class="line"> <span class="keywordflow">if</span> (name == repName) {</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> dataPlug = representationPlug.<a class="code" href="./class_m_plug.html#a482274cc996238a9a9e77be5781caa90">child</a>(repAttr);</div>
<div class="line">         dataPlug.<a class="code" href="./class_m_plug.html#aec7c3792a53d27a61ece4f7b81cc123b">setValue</a>(data);</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> <span class="keywordflow">return</span> <a class="code" href="./class_m_status.html#a02ab596f4febca68da503aaf8dde3a80af0536797208144380691e2b376ffc1d1">MStatus::kSuccess</a>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_string.html">MString</a> AssemblyDefinition::setRepName(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; newName,</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a>*       status</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> s = setRepAttrValue(repName, aRepName, newName);</div>
<div class="line"> <span class="keywordflow">if</span> (status) *status = s;</div>
<div class="line"> <span class="keywordflow">return</span> newName;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="./class_m_status.html">MStatus</a> AssemblyDefinition::setRepLabel(</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; repName,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; label</div>
<div class="line">)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">return</span> setRepAttrValue(repName, aRepLabel, label);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AssemblyDefinition::canRepApplyEdits(<span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a>&amp; representation)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{</div>
<div class="line"> <span class="keywordflow">if</span> (representation.<a class="code" href="./class_m_string.html#a9f0f85031c628ef5111739fe8573003b">numChars</a>() == 0) {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// If the argument isn't the active representation, need to build a</span></div>
<div class="line"> <span class="comment">// temporary transient representation to ask it.</span></div>
<div class="line"> <span class="keywordflow">if</span> (getActive() != representation || fActiveRep.get() == 0) {</div>
<div class="line">      RepresentationPtr ptr(representationFactory(representation));</div>
<div class="line"> <span class="keywordflow">return</span> (ptr.get() == 0 ? <span class="keyword">false</span> : ptr-&gt;canApplyEdits());</div>
<div class="line">   }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> fActiveRep-&gt;canApplyEdits();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-</span></div>
<div class="line"><span class="comment">//*****************************************************************************</span></div>
<div class="line"><span class="comment">// Copyright 2015 Autodesk, Inc.  All rights reserved.</span></div>
<div class="line"><span class="comment">// </span></div>
<div class="line"><span class="comment">// Use of this software is subject to the terms of the Autodesk license</span></div>
<div class="line"><span class="comment">// agreement provided at the time of installation or download, or which</span></div>
<div class="line"><span class="comment">// otherwise accompanies this software in either electronic or hard copy</span></div>
<div class="line"><span class="comment">// form.</span></div>
<div class="line"><span class="comment">//*****************************************************************************</span></div>
<div class="line"><span class="comment">//+</span></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
