<!-- saved from url=(0024)http://docs.autodesk.com -->
<html>
<head><script src="../scripts/yepnope.1.5.4-min.js" type="text/javascript"></script><script src="../scripts/lib/jquery-1.11.1.min.js" type="text/javascript"></script>
<title>C++ API Reference: AbcBullet/AttributesWriter.cpp</title>
</head>
<body height="100%"><div class="body_content" id="body-content"><link href="cpp_ref/navtree.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/doxygen.css" rel="stylesheet" type="text/css"/><link href="cpp_ref/tabs.css" rel="stylesheet" type="text/css"/><link href="style/adsk.cpm.css" rel="stylesheet" type="text/css"/><script type="text/javascript">
var tocSystemNeedsToBeLoaded = typeof(cpp_ref_adsk_ref_toc) == 'undefined';
var weAreIn21 = $('div#main.view-active').length;
var tocPrefix = '';
if (weAreIn21)
{ tocPrefix = 'cpp_ref/'; }
function cpp_ref_initializeToc(forceTrigger) {
    cpp_ref_adsk_ref_toc.initResizable();
    cpp_ref_adsk_ref_toc.initNavTree('_abc_bullet_2_attributes_writer_8cpp-example.html', tocPrefix);
    dQuery(document).trigger('toc_initialized');
}
if (tocSystemNeedsToBeLoaded)
{
	yepnope([{
	load:[tocPrefix + 'json3.min.js', tocPrefix + 'jquery.js', tocPrefix + 'ref-toc-controller.js', tocPrefix + 'dynsections.js'],
	complete: function() {
	  if (typeof(dQuery) == 'undefined')
	  {
	    dQuery = jQuery.noConflict(true);
	  }
	  else { jQuery.noConflict(true); }
	  $(document).ready(cpp_ref_initializeToc);
	}
 	}])
}
if (!weAreIn21) { // if in AKN...
$(window).load( function() {
    setTimeout( function() {
        var content = $('body > div').not('#body-content');     // take any divs under body that are not id=body-content
        content.each( function() { 
            $(this).css( { 'padding-left': $(this).css('margin-left') } );       // and if they have any padding-left already, move it to margin-left.
        } );
        var width = cpp_ref_adsk_ref_toc.readFromStorage('width');
        content.css({marginLeft:parseInt(width)+6+"px"});
    }, 100);
} ); 
}
</script><script>
 if (!tocSystemNeedsToBeLoaded) { cpp_ref_initializeToc(); }
 </script>
<div>
<div class="head">
<h1>C++ API Reference: AbcBullet/AttributesWriter.cpp</h1>
</div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<div class="tabs" id="navrow1">
<ul class="tablist">
<li><a href="./index.html"><span>Main Page</span></a></li>
<li><a href="./pages.html"><span>Related Pages</span></a></li>
<li><a href="./modules.html"><span>Modules</span></a></li>
<li><a href="./namespaces.html"><span>Namespaces</span></a></li>
<li><a href="./annotated.html"><span>Classes</span></a></li>
<li><a href="./examples.html"><span>Examples</span></a></li>
<li>
<div class="MSearchBoxInactive" id="MSearchBox">
<span class="left">
<img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="cpp_ref/search/mag_sel.png"/>
<input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
</span><span class="right">
<a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="cpp_ref/search/close.png"/></a>
</span>
</div>
</li>
</ul>
</div>
</div><!-- top -->
<div class="ui-resizable side-nav-resizable" id="side-nav">
<div id="nav-tree">
<div id="nav-tree-contents">
<div class="sync" id="nav-sync"></div>
</div>
</div>
<div class="ui-resizable-handle" id="splitbar" style="-moz-user-select:none;">
</div>
</div>
<div id="doc-content">
<!-- window showing the filter options -->
<!-- iframe showing the search results (closed by default) -->
<div class="header">
<div class="headertitle">
<div class="title">AbcBullet/AttributesWriter.cpp</div> </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//-*****************************************************************************</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Copyright (c) 2009-2012,</span></div>
<div class="line"><span class="comment">//  Sony Pictures Imageworks Inc. and</span></div>
<div class="line"><span class="comment">//  Industrial Light &amp; Magic, a division of Lucasfilm Entertainment Company Ltd.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// All rights reserved.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><span class="comment">// modification, are permitted provided that the following conditions are</span></div>
<div class="line"><span class="comment">// met:</span></div>
<div class="line"><span class="comment">// *       Redistributions of source code must retain the above copyright</span></div>
<div class="line"><span class="comment">// notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><span class="comment">// *       Redistributions in binary form must reproduce the above</span></div>
<div class="line"><span class="comment">// copyright notice, this list of conditions and the following disclaimer</span></div>
<div class="line"><span class="comment">// in the documentation and/or other materials provided with the</span></div>
<div class="line"><span class="comment">// distribution.</span></div>
<div class="line"><span class="comment">// *       Neither the name of Sony Pictures Imageworks, nor</span></div>
<div class="line"><span class="comment">// Industrial Light &amp; Magic, nor the names of their contributors may be used</span></div>
<div class="line"><span class="comment">// to endorse or promote products derived from this software without specific</span></div>
<div class="line"><span class="comment">// prior written permission.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><span class="comment">// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//-*****************************************************************************</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include "AttributesWriter.h"</span></div>
<div class="line"><span class="preprocessor">#include "MayaUtility.h"</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>Abc = Alembic::Abc;</div>
<div class="line"><span class="keyword">namespace </span>AbcGeom = Alembic::AbcGeom;</div>
<div class="line"><span class="keyword">namespace </span>AbcA = Alembic::AbcCoreAbstract;</div>
<div class="line"></div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * cAttrScope = <span class="stringliteral">"_AbcGeomScope"</span>;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * cAttrType  = <span class="stringliteral">"_AbcType"</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// returns true if a plug is of a simple numeric data type</span></div>
<div class="line"><span class="keywordtype">bool</span> isDataAttr(<span class="keyword">const</span> <a name="_a0"></a><a class="code" href="./class_m_plug.html">MPlug</a> &amp; iParent)</div>
<div class="line">{</div>
<div class="line"> <a name="_a1"></a><a class="code" href="./class_m_object.html">MObject</a> obj = iParent.<a name="a2"></a><a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>();</div>
<div class="line"> <span class="keywordflow">switch</span> (obj.<a name="a3"></a><a class="code" href="./class_m_object.html#a7e5fd5d37dde6df8c0cf350e00ca0a75">apiType</a>())</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a4"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7adbe0e32666dfa9aef585d27e1303f72c">MFn::kData2Double</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a5"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aae1a1823aaf4a9949a00cdad1416701e">MFn::kData3Double</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a6"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ae46f3e2eb545085aa3e95986131aca40">MFn::kData4Double</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a7"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aaec728c474eebbf25f7897ad91a51d83">MFn::kData2Float</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a8"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a34cc84b1c9a66c606e6a57458d73dfaf">MFn::kData3Float</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a9"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aabca4ccac2fd5307565d151dca1ee92f">MFn::kData2Int</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a10"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a649d1fb0eb1157e5e62518d0852a74c7">MFn::kData3Int</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a11"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aa0626c98b46e48dd0e7125d041b2570a">MFn::kData2Short</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a12"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a83574468cb70d3233e7fd16dc4e652c4">MFn::kData3Short</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a13"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a3135dad1345019bb8b8613cc73c91493">MFn::kStringData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a14"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aa048cebe0f12f3c1e822635197ff7aba">MFn::kStringArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a15"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ab2261186b0b923089a0f3d341518a70d">MFn::kFloatVectorArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a16"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aeeda0d4bfdc6dea40ecc9a9fe1d54f7d">MFn::kVectorArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a17"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7aadf0a97c3fb282a15300111e90c2a3ab">MFn::kFloatArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a18"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a74071930089d3744d946dd03b4e64349">MFn::kDoubleArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a19"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a73b31b1f3299063c2eaca88716cf5d99">MFn::kIntArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a20"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7abfae61c192777f4fcd110b2756ad3efc">MFn::kPointArrayData</a>:</div>
<div class="line"> <span class="keywordflow">case</span> <a name="a21"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a37a3b6022535d6a09930045856bf4626">MFn::kUInt64ArrayData</a>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">AbcGeom::GeometryScope strToScope(<a name="_a22"></a><a class="code" href="./class_m_string.html">MString</a> iStr)</div>
<div class="line">{</div>
<div class="line">    iStr.<a name="a23"></a><a class="code" href="./class_m_string.html#a56fd78fe1cd1bc285cc8c336ed977d7e">toLowerCase</a>();</div>
<div class="line"> <span class="keywordflow">if</span> (iStr == <span class="stringliteral">"vtx"</span>)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">return</span> AbcGeom::kVertexScope;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iStr == <span class="stringliteral">"fvr"</span>)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">return</span> AbcGeom::kFacevaryingScope;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iStr == <span class="stringliteral">"uni"</span>)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">return</span> AbcGeom::kUniformScope;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iStr == <span class="stringliteral">"var"</span>)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">return</span> AbcGeom::kVaryingScope;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> AbcGeom::kConstantScope;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// returns true if the string ends with _AbcGeomScope or _AbcType</span></div>
<div class="line"><span class="keywordtype">bool</span> endsWithArbAttr(<span class="keyword">const</span> std::string &amp; iStr)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">size_t</span> len = iStr.size();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> (len &gt;= 13 &amp;&amp; iStr.compare(len - 13, 13, cAttrScope) == 0) ||</div>
<div class="line">        (len &gt;= 8 &amp;&amp; iStr.compare(len - 8, 8, cAttrType) == 0);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> createUserPropertyFromNumeric(MFnNumericData::Type iType,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                                   Abc::OCompoundProperty &amp; iParent,</div>
<div class="line">                                   Alembic::Util::uint32_t iTimeIndex,</div>
<div class="line">                                   AbcGeom::GeometryScope iScope,</div>
<div class="line">                                   std::vector &lt; PlugAndObjScalar &gt; &amp; oScalars,</div>
<div class="line">                                   std::vector &lt; PlugAndObjArray &gt; &amp; oArrays)</div>
<div class="line">{</div>
<div class="line">    std::string plugName = iPlug.<a name="a24"></a><a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1).<a name="a25"></a><a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kBoolean:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OBoolProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kByte:</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kChar:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OCharProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kShort:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OInt16Property up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kInt:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OInt32Property up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kFloat:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OFloatProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kDouble:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::ODoubleProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Short:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV2sProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Short:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV3sProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Int:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV2iProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Int:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV3iProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Float:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV2fProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Float:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV3fProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV2dProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjScalar p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            Abc::OV3dProperty up(iParent, plugName, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oScalars.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k4Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcA::DataType dtype(Alembic::Util::kFloat64POD, 4);</div>
<div class="line">            Abc::OArrayProperty up(iParent, plugName, dtype, iTimeIndex);</div>
<div class="line">            p.prop = up;</div>
<div class="line">            oArrays.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> createGeomPropertyFromNumeric(MFnNumericData::Type iType, <span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug, Abc::OCompoundProperty &amp; iParent,</div>
<div class="line">                               Alembic::Util::uint32_t iTimeIndex,</div>
<div class="line">                               AbcGeom::GeometryScope iScope,</div>
<div class="line">                               std::vector &lt; PlugAndObjArray &gt; &amp; oArrayVec)</div>
<div class="line">{</div>
<div class="line">    std::string plugName = iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1).<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kBoolean:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OBoolGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kByte:</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kChar:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OCharGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kShort:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OInt16GeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kInt:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OInt32GeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kFloat:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OFloatGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kDouble:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::ODoubleGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Short:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV2sGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Short:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV3sGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Int:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV2iGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Int:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV3iGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Float:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV2fGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Float:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line"></div>
<div class="line"> <a name="_a26"></a><a class="code" href="./class_m_fn_attribute.html">MFnAttribute</a> mfnAttr(iAttr);</div>
<div class="line"> <span class="keywordflow">if</span> (mfnAttr.<a name="a27"></a><a class="code" href="./class_m_fn_attribute.html#ae16d2168985d64b52e9fb973cc05e805">isUsedAsColor</a>())</div>
<div class="line">            {</div>
<div class="line">                AbcGeom::OC3fGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                    iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                AbcGeom::OV3fGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                    iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV2dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcGeom::OV3dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                iTimeIndex);</div>
<div class="line">            p.prop = gp.getValueProperty();</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k4Double:</div>
<div class="line">        {</div>
<div class="line">            PlugAndObjArray p;</div>
<div class="line">            p.plug = iPlug;</div>
<div class="line">            p.obj = iAttr;</div>
<div class="line">            AbcA::DataType dtype(Alembic::Util::kFloat64POD, 4);</div>
<div class="line">            p.prop = Abc::OArrayProperty(iParent, plugName, dtype, iTimeIndex);</div>
<div class="line">            oArrayVec.push_back(p);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> MFnNumericDataToSample(MFnNumericData::Type iType,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                            Abc::OScalarProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">int</span>    ival;</div>
<div class="line"> <span class="keywordtype">float</span>  fval;</div>
<div class="line"> <span class="keywordtype">double</span> dval;</div>
<div class="line"> <span class="keywordtype">bool</span>   bval;</div>
<div class="line">    Alembic::Util::int16_t sval;</div>
<div class="line">    Alembic::Util::int8_t  cval;</div>
<div class="line"></div>
<div class="line">    Alembic::Util::int16_t v2sVal[2];</div>
<div class="line">    Alembic::Util::int16_t v3sVal[3];</div>
<div class="line"></div>
<div class="line">    Alembic::Util::int32_t v2iVal[2];</div>
<div class="line">    Alembic::Util::int32_t v3iVal[3];</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">float</span> v2fVal[2];</div>
<div class="line"> <span class="keywordtype">float</span> v3fVal[3];</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">double</span> v2dVal[2];</div>
<div class="line"> <span class="keywordtype">double</span> v3dVal[3];</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kBoolean:</div>
<div class="line">        {</div>
<div class="line">            bval = iPlug.<a name="a28"></a><a class="code" href="./class_m_plug.html#a69b4092a85b4edf58b7d50f331cc38cf">asBool</a>();</div>
<div class="line">            oProp.set(&amp;bval);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kByte:</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kChar:</div>
<div class="line">        {</div>
<div class="line">            cval = iPlug.<a name="a29"></a><a class="code" href="./class_m_plug.html#ab507a4e86eb5f2006de064aa09a4464d">asChar</a>();</div>
<div class="line">            oProp.set(&amp;cval);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kShort:</div>
<div class="line">        {</div>
<div class="line">            sval = iPlug.<a name="a30"></a><a class="code" href="./class_m_plug.html#a3a1f4c75eaab26280813008e35ca4ff3">asShort</a>();</div>
<div class="line">            oProp.set(&amp;sval);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kInt:</div>
<div class="line">        {</div>
<div class="line">            ival = iPlug.<a name="a31"></a><a class="code" href="./class_m_plug.html#ad99f1dea3721139cdcb457b2a2ba32e1">asInt</a>();</div>
<div class="line">            oProp.set(&amp;ival);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kFloat:</div>
<div class="line">        {</div>
<div class="line">            fval = iPlug.<a name="a32"></a><a class="code" href="./class_m_plug.html#ae9641ccaab03f3d58fd5f5b5b32c155f">asFloat</a>();</div>
<div class="line">            oProp.set(&amp;fval);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kDouble:</div>
<div class="line">        {</div>
<div class="line">            dval = iPlug.<a name="a33"></a><a class="code" href="./class_m_plug.html#a62411b4c90ef50797f86b049bb1f934b">asDouble</a>();</div>
<div class="line">            oProp.set(&amp;dval);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Short:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a34"></a><a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a35"></a><a class="code" href="./class_m_fn_numeric_data.html#afa8cd8acd513ddc7fe87e1c9061a16c7">getData2Short</a>(v2sVal[0], v2sVal[1]);</div>
<div class="line"></div>
<div class="line">            oProp.<a name="a36"></a><a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v2sVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Short:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a37"></a><a class="code" href="./class_m_fn_numeric_data.html#a8d2f4a6d9b45c3cd5607c7632900d190">getData3Short</a>(v3sVal[0], v3sVal[1], v3sVal[2]);</div>
<div class="line"></div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v3sVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Int:</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a38"></a><a class="code" href="./class_m_fn_numeric_data.html#a6855f044338da8c430308743897f38d4">getData2Int</a>(val0, val1);</div>
<div class="line">            v2iVal[0] = Alembic::Util::int32_t(val0);</div>
<div class="line">            v2iVal[1] = Alembic::Util::int32_t(val1);</div>
<div class="line"></div>
<div class="line">            oProp.set(&amp;v2iVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Int:</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1, val2;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a39"></a><a class="code" href="./class_m_fn_numeric_data.html#a07bcde60ce97730e4ffdbf7f83bd9895">getData3Int</a>(val0, val1, val2);</div>
<div class="line">            v3iVal[0] = Alembic::Util::int32_t(val0);</div>
<div class="line">            v3iVal[1] = Alembic::Util::int32_t(val1);</div>
<div class="line">            v3iVal[2] = Alembic::Util::int32_t(val2);</div>
<div class="line"></div>
<div class="line">            oProp.set(&amp;v3iVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Float:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a40"></a><a class="code" href="./class_m_fn_numeric_data.html#a6a9240f3a50508d68b447d21cfdb48e3">getData2Float</a>(v2fVal[0], v2fVal[1]);</div>
<div class="line"></div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v2fVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Float:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a41"></a><a class="code" href="./class_m_fn_numeric_data.html#a1ed1d66504a91f683f126491d2f6ffc8">getData3Float</a>(v3fVal[0], v3fVal[1], v3fVal[2]);</div>
<div class="line"></div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v3fVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Double:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a42"></a><a class="code" href="./class_m_fn_numeric_data.html#a1a16cd0dcd0385aa1dea935704fb0f1d">getData2Double</a>(v2dVal[0], v3dVal[1]);</div>
<div class="line"></div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v2dVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Double:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">            numdFn.<a name="a43"></a><a class="code" href="./class_m_fn_numeric_data.html#a63d6db5913fcaa0d85baa1e9852f165a">getData3Double</a>(v3dVal[0], v3dVal[1], v3dVal[2]);</div>
<div class="line"></div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(&amp;v3dVal[0]);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> MFnNumericDataToSample(MFnNumericData::Type iType,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                            Abc::OArrayProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numElements =  iPlug.<a name="a44"></a><a class="code" href="./class_m_plug.html#ae98c3fdbce1daefa127bae2fe66a187c">numElements</a>();</div>
<div class="line"> <span class="keywordtype">bool</span> isArray = iPlug.<a name="a45"></a><a class="code" href="./class_m_plug.html#ad9f7606199fb5d1bd8b872b1d0e7f6a3">isArray</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dimSize = numElements;</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">        dimSize = 1;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kBoolean:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::bool_t &gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#a69b4092a85b4edf58b7d50f331cc38cf">asBool</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#a69b4092a85b4edf58b7d50f331cc38cf">asBool</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kByte:</div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kChar:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int8_t &gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#ab507a4e86eb5f2006de064aa09a4464d">asChar</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#ab507a4e86eb5f2006de064aa09a4464d">asChar</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kShort:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int16_t &gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#a3a1f4c75eaab26280813008e35ca4ff3">asShort</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#a3a1f4c75eaab26280813008e35ca4ff3">asShort</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kInt:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int32_t &gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#ad99f1dea3721139cdcb457b2a2ba32e1">asInt</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#ad99f1dea3721139cdcb457b2a2ba32e1">asInt</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kFloat:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;float&gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#ae9641ccaab03f3d58fd5f5b5b32c155f">asFloat</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#ae9641ccaab03f3d58fd5f5b5b32c155f">asFloat</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::kDouble:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;double&gt; val(dimSize);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line">                val[0] = iPlug.<a class="code" href="./class_m_plug.html#a62411b4c90ef50797f86b049bb1f934b">asDouble</a>();</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = iPlug[i].<a class="code" href="./class_m_plug.html#a62411b4c90ef50797f86b049bb1f934b">asDouble</a>();</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Short:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int16_t &gt; val(dimSize*2);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#afa8cd8acd513ddc7fe87e1c9061a16c7">getData2Short</a>(val[0], val[1]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#afa8cd8acd513ddc7fe87e1c9061a16c7">getData2Short</a>(val[2*i], val[2*i+1]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Short:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int16_t &gt; val(dimSize*3);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a8d2f4a6d9b45c3cd5607c7632900d190">getData3Short</a>(val[0], val[1], val[2]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a8d2f4a6d9b45c3cd5607c7632900d190">getData3Short</a>(val[3*i], val[3*i+1], val[3*i+2]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Int:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int32_t &gt; val(dimSize*2);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a6855f044338da8c430308743897f38d4">getData2Int</a>(val0, val1);</div>
<div class="line">                val[0] = Alembic::Util::int32_t(val0);</div>
<div class="line">                val[1] = Alembic::Util::int32_t(val1);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a6855f044338da8c430308743897f38d4">getData2Int</a>(val0, val1);</div>
<div class="line">                    val[2*i] = Alembic::Util::int32_t(val0);</div>
<div class="line">                    val[2*i+1] = Alembic::Util::int32_t(val1);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Int:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; Alembic::Util::int32_t &gt; val(dimSize*3);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1, val2;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a07bcde60ce97730e4ffdbf7f83bd9895">getData3Int</a>(val0, val1, val2);</div>
<div class="line">                val[0] = Alembic::Util::int32_t(val0);</div>
<div class="line">                val[1] = Alembic::Util::int32_t(val1);</div>
<div class="line">                val[2] = Alembic::Util::int32_t(val2);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <span class="keywordtype">int</span> val0, val1, val2;</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a07bcde60ce97730e4ffdbf7f83bd9895">getData3Int</a>(val0, val1, val2);</div>
<div class="line">                    val[3*i] = Alembic::Util::int32_t(val0);</div>
<div class="line">                    val[3*i+1] = Alembic::Util::int32_t(val1);</div>
<div class="line">                    val[3*i+2] = Alembic::Util::int32_t(val2);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Float:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;float&gt; val(dimSize*2);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a6a9240f3a50508d68b447d21cfdb48e3">getData2Float</a>(val[0], val[1]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a6a9240f3a50508d68b447d21cfdb48e3">getData2Float</a>(val[2*i], val[2*i+1]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Float:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;float&gt; val(dimSize*3);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a1ed1d66504a91f683f126491d2f6ffc8">getData3Float</a>(val[0], val[1], val[2]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a1ed1d66504a91f683f126491d2f6ffc8">getData3Float</a>(val[3*i], val[3*i+1], val[3*i+2]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k2Double:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;double&gt; val(dimSize*2);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a1a16cd0dcd0385aa1dea935704fb0f1d">getData2Double</a>(val[0], val[1]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a1a16cd0dcd0385aa1dea935704fb0f1d">getData2Double</a>(val[2*i], val[2*i+1]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k3Double:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;double&gt; val(dimSize*3);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a63d6db5913fcaa0d85baa1e9852f165a">getData3Double</a>(val[0], val[1], val[2]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a63d6db5913fcaa0d85baa1e9852f165a">getData3Double</a>(val[3*i], val[3*i+1], val[3*i+2]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnNumericData::k4Double:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt;double&gt; val(dimSize*4);</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                numdFn.<a name="a46"></a><a class="code" href="./class_m_fn_numeric_data.html#a47d16e8d05fcf300d98a3b5b6d050e7d">getData4Double</a>(val[0], val[1], val[2], val[3]);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; numElements; ++i)</div>
<div class="line">                {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numdFn(iPlug[i].asMObject());</div>
<div class="line">                    numdFn.<a class="code" href="./class_m_fn_numeric_data.html#a47d16e8d05fcf300d98a3b5b6d050e7d">getData4Double</a>(val[4*i], val[4*i+1], val[4*i+2],</div>
<div class="line">                        val[4*i+3]);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(dimSize));</div>
<div class="line">            oProp.<a class="code" href="./class_m_status.html#ad8887c924f0cc954364fd532c7867d86">set</a>(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> MFnTypedDataToSample(MFnData::Type iType,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                          Abc::OScalarProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">size_t</span> numElements =  iPlug.<a class="code" href="./class_m_plug.html#ae98c3fdbce1daefa127bae2fe66a187c">numElements</a>();</div>
<div class="line"> <span class="keywordtype">bool</span> isArray = iPlug.<a class="code" href="./class_m_plug.html#ad9f7606199fb5d1bd8b872b1d0e7f6a3">isArray</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">size_t</span> dimSize = numElements;</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">        dimSize = 1;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kNumeric:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numObj(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"> <span class="keywordflow">return</span> MFnNumericDataToSample(numObj.numericType(), iPlug,</div>
<div class="line">                oProp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kString:</div>
<div class="line">        {</div>
<div class="line">            Abc::OStringProperty strProp( oProp.getPtr(), Abc::kWrapExisting );</div>
<div class="line">            std::string val = iPlug.<a name="a47"></a><a class="code" href="./class_m_plug.html#a445750444a9e8c22b8b2366f19d7264a">asString</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">            strProp.set(val);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kMatrix:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a48"></a><a class="code" href="./class_m_fn_matrix_data.html">MFnMatrixData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"> <a name="_a49"></a><a class="code" href="./class_m_matrix.html">MMatrix</a> mat = arr.<a name="a50"></a><a class="code" href="./class_m_matrix.html#a527b102f4eb0951cf4f391f828d3ca34">matrix</a>();</div>
<div class="line"> <span class="keywordtype">double</span> val[16];</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r = 0; r &lt; 4; r++)</div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; 4; c++, i++)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = mat[r][c];</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            oProp.set(&amp;val);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> MFnTypedDataToSample(MFnData::Type iType,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                          Abc::OArrayProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">size_t</span> numElements =  iPlug.<a class="code" href="./class_m_plug.html#ae98c3fdbce1daefa127bae2fe66a187c">numElements</a>();</div>
<div class="line"> <span class="keywordtype">bool</span> isArray = iPlug.<a class="code" href="./class_m_plug.html#ad9f7606199fb5d1bd8b872b1d0e7f6a3">isArray</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">size_t</span> dimSize = numElements;</div>
<div class="line"> <span class="keywordflow">if</span> (!isArray)</div>
<div class="line">        dimSize = 1;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (iType)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kNumeric:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_data.html">MFnNumericData</a> numObj(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"> <span class="keywordflow">return</span> MFnNumericDataToSample(numObj.numericType(), iPlug,</div>
<div class="line">                oProp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kString:</div>
<div class="line">        {</div>
<div class="line">            std::vector&lt; std::string &gt; val(1);</div>
<div class="line">            val[0] = iPlug.<a class="code" href="./class_m_plug.html#a445750444a9e8c22b8b2366f19d7264a">asString</a>().<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(1));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kStringArray:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a51"></a><a class="code" href="./class_m_fn_string_array_data.html">MFnStringArrayData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = arr.<a name="a52"></a><a class="code" href="./class_m_fn_string_array_data.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line">            std::vector&lt; std::string &gt; val(length);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++)</div>
<div class="line">            {</div>
<div class="line">                val[i] = arr[i].asChar();</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(length));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kDoubleArray:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a53"></a><a class="code" href="./class_m_fn_double_array_data.html">MFnDoubleArrayData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = arr.<a name="a54"></a><a class="code" href="./class_m_fn_double_array_data.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line">            std::vector&lt; double &gt; val(length);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++)</div>
<div class="line">            {</div>
<div class="line">                val[i] = arr[i];</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(length));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kIntArray:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a55"></a><a class="code" href="./class_m_fn_int_array_data.html">MFnIntArrayData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = arr.<a name="a56"></a><a class="code" href="./class_m_fn_int_array_data.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line">            std::vector&lt; Alembic::Util::int32_t &gt; val(length);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++)</div>
<div class="line">            {</div>
<div class="line">                val[i] = arr[i];</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(length));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kPointArray:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a57"></a><a class="code" href="./class_m_fn_point_array_data.html">MFnPointArrayData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = arr.<a name="a58"></a><a class="code" href="./class_m_fn_point_array_data.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extent = oProp.getDataType().getExtent();</div>
<div class="line">            std::vector&lt; double &gt; val(length*extent);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++)</div>
<div class="line">            {</div>
<div class="line"> <a name="_a59"></a><a class="code" href="./class_m_point.html">MPoint</a> pt(arr[i]);</div>
<div class="line">                val[extent*i] = pt.<a name="a60"></a><a class="code" href="./class_m_point.html#af88b946fb90d5f08b5fb740c70e98c10">x</a>;</div>
<div class="line">                val[extent*i+1] = pt.<a name="a61"></a><a class="code" href="./class_m_point.html#ab927965981178aa1fba979a37168db2a">y</a>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (extent &gt; 2)</div>
<div class="line">                    val[extent*i+2] = pt.<a name="a62"></a><a class="code" href="./class_m_point.html#ab3e6ed577a7c669c19de1f9c1b46c872">z</a>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (extent &gt; 3)</div>
<div class="line">                    val[extent*i+3] = pt.<a name="a63"></a><a class="code" href="./class_m_point.html#afb3248bab1c7ee0ad97e9d4c275b4c67">w</a>;</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(length));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kVectorArray:</div>
<div class="line">        {</div>
<div class="line"> <a name="_a64"></a><a class="code" href="./class_m_fn_vector_array_data.html">MFnVectorArrayData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length = arr.<a name="a65"></a><a class="code" href="./class_m_fn_vector_array_data.html#a99dd6a54b909ede1d11702fe58977e2a">length</a>();</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extent = oProp.getDataType().getExtent();</div>
<div class="line">            std::vector&lt; double &gt; val(length*extent);</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++)</div>
<div class="line">            {</div>
<div class="line"> <a name="_a66"></a><a class="code" href="./class_m_vector.html">MVector</a> v(arr[i]);</div>
<div class="line">                val[extent*i] = v.<a name="a67"></a><a class="code" href="./class_m_vector.html#af88b946fb90d5f08b5fb740c70e98c10">x</a>;</div>
<div class="line">                val[extent*i+1] = v.<a name="a68"></a><a class="code" href="./class_m_vector.html#ab927965981178aa1fba979a37168db2a">y</a>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (extent &gt; 2)</div>
<div class="line">                   val[extent*i+2] = v.<a name="a69"></a><a class="code" href="./class_m_vector.html#ab3e6ed577a7c669c19de1f9c1b46c872">z</a>;</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(length));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kMatrix:</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_fn_matrix_data.html">MFnMatrixData</a> arr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line"> <a class="code" href="./class_m_matrix.html">MMatrix</a> mat = arr.<a class="code" href="./class_m_matrix.html#a527b102f4eb0951cf4f391f828d3ca34">matrix</a>();</div>
<div class="line">            std::vector&lt;double&gt; val(16);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> r = 0; r &lt; 4; r++)</div>
<div class="line">            {</div>
<div class="line"> <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = 0; c &lt; 4; c++, i++)</div>
<div class="line">                {</div>
<div class="line">                    val[i] = mat[r][c];</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            AbcA::ArraySample samp(&amp;(val.front()), oProp.getDataType(),</div>
<div class="line">                Alembic::Util::Dimensions(1));</div>
<div class="line">            oProp.set(samp);</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> attributeToScalarPropertyPair(<span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                                   Abc::OScalarProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (iAttr.<a name="a70"></a><a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a name="a71"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7adead26e1b827316155632e4cb27c848b">MFn::kTypedAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a name="_a72"></a><a class="code" href="./class_m_fn_typed_attribute.html">MFnTypedAttribute</a> typedAttr(iAttr);</div>
<div class="line"> <span class="keywordflow">return</span> MFnTypedDataToSample(typedAttr.<a name="a73"></a><a class="code" href="./class_m_fn_typed_attribute.html#aa3bf2ba724f9aaf87976b1fb896fd700">attrType</a>(), iPlug, oProp);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a name="a74"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a name="_a75"></a><a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numAttr(iAttr);</div>
<div class="line"> <span class="keywordflow">return</span> MFnNumericDataToSample(numAttr.<a name="a76"></a><a class="code" href="./class_m_fn_numeric_attribute.html#a475558f03040cb41c9af196253650823">unitType</a>(), iPlug, oProp);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a name="a77"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordtype">double</span> dval = iPlug.<a class="code" href="./class_m_plug.html#a62411b4c90ef50797f86b049bb1f934b">asDouble</a>();</div>
<div class="line">        oProp.set(&amp;dval);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a name="a78"></a><a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        Alembic::Util::int16_t val = iPlug.<a class="code" href="./class_m_plug.html#a3a1f4c75eaab26280813008e35ca4ff3">asShort</a>();</div>
<div class="line">        oProp.set(&amp;val);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> attributeToArrayPropertyPair(<span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                                  Abc::OArrayProperty &amp; oProp)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7adead26e1b827316155632e4cb27c848b">MFn::kTypedAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_typed_attribute.html">MFnTypedAttribute</a> typedAttr(iAttr);</div>
<div class="line"> <span class="keywordflow">return</span> MFnTypedDataToSample(typedAttr.<a class="code" href="./class_m_fn_typed_attribute.html#aa3bf2ba724f9aaf87976b1fb896fd700">attrType</a>(), iPlug,</div>
<div class="line">            oProp);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numAttr(iAttr);</div>
<div class="line"> <span class="keywordflow">return</span> MFnNumericDataToSample(numAttr.<a class="code" href="./class_m_fn_numeric_attribute.html#a475558f03040cb41c9af196253650823">unitType</a>(), iPlug,</div>
<div class="line">            oProp);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordtype">double</span> val = iPlug.<a class="code" href="./class_m_plug.html#a62411b4c90ef50797f86b049bb1f934b">asDouble</a>();</div>
<div class="line">        AbcA::ArraySample samp(&amp;val, oProp.getDataType(),</div>
<div class="line">            Alembic::Util::Dimensions(1));</div>
<div class="line">        oProp.set(samp);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        Alembic::Util::int16_t val = iPlug.<a class="code" href="./class_m_plug.html#a3a1f4c75eaab26280813008e35ca4ff3">asShort</a>();</div>
<div class="line">        AbcA::ArraySample samp(&amp;val, oProp.getDataType(),</div>
<div class="line">            Alembic::Util::Dimensions(1));</div>
<div class="line">        oProp.set(samp);</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> createUserPropertyFromMFnAttr(<span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                                   Abc::OCompoundProperty &amp; iParent,</div>
<div class="line">                                   Alembic::Util::uint32_t iTimeIndex,</div>
<div class="line">                                   AbcGeom::GeometryScope iScope,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> &amp; iTypeStr,</div>
<div class="line">                                   std::vector &lt; PlugAndObjScalar &gt; &amp; oScalars,</div>
<div class="line">                                   std::vector &lt; PlugAndObjArray &gt; &amp; oArrays)</div>
<div class="line">{</div>
<div class="line"> <a name="_a79"></a><a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line">    std::string plugName = iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1).<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numFn(iAttr, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!stat)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> err = <span class="stringliteral">"Couldn't instantiate MFnNumericAttribute\n\tType: "</span>;</div>
<div class="line">            err += iAttr.<a name="a80"></a><a class="code" href="./class_m_object.html#a3dad4d354c5b968cf4eccfffcdb824f4">apiTypeStr</a>();</div>
<div class="line"> <a name="a81"></a><a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(err);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        createUserPropertyFromNumeric(numFn.<a class="code" href="./class_m_fn_numeric_attribute.html#a475558f03040cb41c9af196253650823">unitType</a>(), iAttr, iPlug,</div>
<div class="line">                                      iParent, iTimeIndex, iScope,</div>
<div class="line">                                      oScalars, oArrays);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7adead26e1b827316155632e4cb27c848b">MFn::kTypedAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_typed_attribute.html">MFnTypedAttribute</a> typeFn(iAttr, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!stat)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> err = <span class="stringliteral">"Couldn't instantiate MFnTypedAttribute\n\tType: "</span>;</div>
<div class="line">            err += iAttr.<a class="code" href="./class_m_object.html#a3dad4d354c5b968cf4eccfffcdb824f4">apiTypeStr</a>();</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(err);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (typeFn.<a class="code" href="./class_m_fn_typed_attribute.html#aa3bf2ba724f9aaf87976b1fb896fd700">attrType</a>())</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kString:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjScalar p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                p.prop = Abc::OStringProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">                oScalars.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kStringArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                p.prop = Abc::OStringArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">                oArrays.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kDoubleArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                p.prop = Abc::ODoubleArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">                oArrays.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kIntArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                p.prop = Abc::OInt32ArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">                oArrays.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kPointArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line"> <span class="keywordflow">if</span> (iTypeStr  == <span class="stringliteral">"point2"</span>)</div>
<div class="line">                    p.prop = Abc::OP2dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">                    p.prop = Abc::OP3dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"></div>
<div class="line">                oArrays.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kVectorArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line"> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"vector2"</span>)</div>
<div class="line">                    p.prop = Abc::OV2dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"normal2"</span>)</div>
<div class="line">                    p.prop = Abc::ON2dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"normal3"</span>)</div>
<div class="line">                    p.prop = Abc::ON3dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">                    p.prop = Abc::OV3dArrayProperty(iParent, plugName, iTimeIndex);</div>
<div class="line"></div>
<div class="line">                oArrays.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kMatrix:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjScalar p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                p.prop = Abc::OM44dProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">                oScalars.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kNumeric:</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numAttr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                createUserPropertyFromNumeric(numAttr.unitType(), iAttr,</div>
<div class="line">                    iPlug, iParent, iTimeIndex, iScope, oScalars, oArrays);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            {</div>
<div class="line"> <span class="comment">// get the full property name for the warning</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't convert "</span>;</div>
<div class="line">                msg += iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(1, 0, 0, 0, 1, 1);</div>
<div class="line">                msg += <span class="stringliteral">" to a property, so skipping."</span>;</div>
<div class="line"> <a name="a82"></a><a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        PlugAndObjScalar p;</div>
<div class="line">        p.plug = iPlug;</div>
<div class="line">        p.obj = iAttr;</div>
<div class="line">        p.prop = Abc::ODoubleProperty(iParent, plugName, iTimeIndex);</div>
<div class="line">        oScalars.push_back(p);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        PlugAndObjScalar p;</div>
<div class="line">        p.plug = iPlug;</div>
<div class="line">        p.obj = iAttr;</div>
<div class="line">        p.prop = Abc::OInt16Property(iParent, plugName, iTimeIndex);</div>
<div class="line">        oScalars.push_back(p);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> createGeomPropertyFromMFnAttr(<span class="keyword">const</span> <a class="code" href="./class_m_object.html">MObject</a>&amp; iAttr,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a>&amp; iPlug,</div>
<div class="line">                                   Abc::OCompoundProperty &amp; iParent,</div>
<div class="line">                                   Alembic::Util::uint32_t iTimeIndex,</div>
<div class="line">                                   AbcGeom::GeometryScope iScope,</div>
<div class="line"> <span class="keyword">const</span> <a class="code" href="./class_m_string.html">MString</a> &amp; iTypeStr,</div>
<div class="line">                                   std::vector &lt; PlugAndObjArray &gt; &amp; oArrayVec)</div>
<div class="line">{</div>
<div class="line"> <span class="comment">// for some reason we have just 1 of the elements of an array, bail</span></div>
<div class="line"> <span class="keywordflow">if</span> (iPlug.<a name="a83"></a><a class="code" href="./class_m_plug.html#ad8079bb3afa94060b5e42af75df9f1b4">isElement</a>())</div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_status.html">MStatus</a> stat;</div>
<div class="line"></div>
<div class="line">    std::string plugName = iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1).<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7af4d74c9963cfa765f9acbf542a2dd9ed">MFn::kNumericAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numFn(iAttr, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!stat)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> err = <span class="stringliteral">"Couldn't instantiate MFnNumericAttribute\n\tType: "</span>;</div>
<div class="line">            err += iAttr.<a class="code" href="./class_m_object.html#a3dad4d354c5b968cf4eccfffcdb824f4">apiTypeStr</a>();</div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(err);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        createGeomPropertyFromNumeric(numFn.<a class="code" href="./class_m_fn_numeric_attribute.html#a475558f03040cb41c9af196253650823">unitType</a>(), iAttr, iPlug, iParent,</div>
<div class="line">            iTimeIndex, iScope, oArrayVec);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7adead26e1b827316155632e4cb27c848b">MFn::kTypedAttribute</a>))</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_fn_typed_attribute.html">MFnTypedAttribute</a> typeFn(iAttr, &amp;stat);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!stat)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> err = <span class="stringliteral">"Couldn't instantiate MFnTypedAttribute\n\tType: "</span>;</div>
<div class="line">            err += iAttr.<a class="code" href="./class_m_object.html#a3dad4d354c5b968cf4eccfffcdb824f4">apiTypeStr</a>();</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_global.html#a4ddbe97e58a90e1ab05d45a62c006cf0">MGlobal::displayError</a>(err);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (typeFn.<a class="code" href="./class_m_fn_typed_attribute.html#aa3bf2ba724f9aaf87976b1fb896fd700">attrType</a>())</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kString:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                AbcGeom::OStringGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                    1, iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kStringArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                AbcGeom::OStringGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                    1, iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kDoubleArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                AbcGeom::ODoubleGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                    1, iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kIntArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                AbcGeom::OInt32GeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                    1, iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kPointArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line"> <span class="keywordflow">if</span> (iTypeStr  == <span class="stringliteral">"point2"</span>)</div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::OP2dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::OP3dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kVectorArray:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line"> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"vector2"</span>)</div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::OV2dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"normal2"</span>)</div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::ON2dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iTypeStr == <span class="stringliteral">"normal3"</span>)</div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::ON3dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    AbcGeom::OV3dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope,</div>
<div class="line">                        1, iTimeIndex);</div>
<div class="line">                    p.prop = gp.getValueProperty();</div>
<div class="line">                }</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kMatrix:</div>
<div class="line">            {</div>
<div class="line">                PlugAndObjArray p;</div>
<div class="line">                p.plug = iPlug;</div>
<div class="line">                p.obj = iAttr;</div>
<div class="line">                AbcGeom::OM44dGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">                    iTimeIndex);</div>
<div class="line">                p.prop = gp.getValueProperty();</div>
<div class="line">                oArrayVec.push_back(p);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">case</span> MFnData::kNumeric:</div>
<div class="line">            {</div>
<div class="line"> <a class="code" href="./class_m_fn_numeric_attribute.html">MFnNumericAttribute</a> numAttr(iPlug.<a class="code" href="./class_m_plug.html#ada03566ab064058c7ef435ae306d3809">asMObject</a>());</div>
<div class="line">                createGeomPropertyFromNumeric(numAttr.unitType(), iAttr,</div>
<div class="line">                    iPlug, iParent, iTimeIndex, iScope, oArrayVec);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line">            {</div>
<div class="line"> <span class="comment">// get the full property name for the warning</span></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't convert "</span>;</div>
<div class="line">                msg += iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(1, 0, 0, 0, 1, 1);</div>
<div class="line">                msg += <span class="stringliteral">" to a property, so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7a1f483b65a79a5100d8f7a91e2c4c68a3">MFn::kUnitAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        PlugAndObjArray p;</div>
<div class="line">        p.plug = iPlug;</div>
<div class="line">        p.obj = iAttr;</div>
<div class="line">        AbcGeom::ODoubleGeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">            iTimeIndex);</div>
<div class="line">        p.prop = gp.getValueProperty();</div>
<div class="line">        oArrayVec.push_back(p);</div>
<div class="line">    }</div>
<div class="line"> <span class="keywordflow">else</span> <span class="keywordflow">if</span> (iAttr.<a class="code" href="./class_m_object.html#af0af77f14f96d1134fb8e8e60dc7e420">hasFn</a>(<a class="code" href="./class_m_fn.html#a1d1cfd8ffb84e947f82999c682b666a7ad68d8aedd6c8e61a3b259d6984b47d6f">MFn::kEnumAttribute</a>))</div>
<div class="line">    {</div>
<div class="line">        PlugAndObjArray p;</div>
<div class="line">        p.plug = iPlug;</div>
<div class="line">        p.obj = iAttr;</div>
<div class="line">        AbcGeom::OInt16GeomParam gp(iParent, plugName, <span class="keyword">false</span>, iScope, 1,</div>
<div class="line">            iTimeIndex);</div>
<div class="line">        p.prop = gp.getValueProperty();</div>
<div class="line">        oArrayVec.push_back(p);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">AttributesWriter::AttributesWriter(</div>
<div class="line">    Alembic::Abc::OCompoundProperty &amp; iArbGeom,</div>
<div class="line">    Alembic::Abc::OCompoundProperty &amp; iUserProps,</div>
<div class="line">    Alembic::Abc::OObject &amp; iParentObj,</div>
<div class="line"> <span class="keyword">const</span> <a name="_a84"></a><a class="code" href="./class_m_fn_dependency_node.html">MFnDependencyNode</a> &amp; iNode,</div>
<div class="line">    Alembic::Util::uint32_t iTimeIndex,</div>
<div class="line"> <span class="keyword">const</span> JobArgs &amp; iArgs)</div>
<div class="line">{</div>
<div class="line">    PlugAndObjScalar visPlug;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> attrCount = iNode.<a name="a85"></a><a class="code" href="./class_m_fn_dependency_node.html#af762f251eae844405571ed86ab9d1509">attributeCount</a>();</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt; staticPlugObjArrayVec;</div>
<div class="line">    std::vector&lt; PlugAndObjScalar &gt; staticPlugObjScalarVec;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; attrCount; i++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a> attr = iNode.<a name="a86"></a><a class="code" href="./class_m_fn_dependency_node.html#a6117a63ae3bb2d03aa976dc8732d93a5">attribute</a>(i);</div>
<div class="line"> <a class="code" href="./class_m_fn_attribute.html">MFnAttribute</a> mfnAttr(attr);</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> plug = iNode.<a name="a87"></a><a class="code" href="./class_m_fn_dependency_node.html#aac29b4a3b51c9d236175e955638f7153">findPlug</a>(attr, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// if it is not readable, then bail without any more checking</span></div>
<div class="line"> <span class="keywordflow">if</span> (!mfnAttr.isReadable() || plug.<a name="a88"></a><a class="code" href="./class_m_plug.html#ab7ec149d38b7c29ca55c5aa7b407d8f9">isNull</a>())</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = plug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1);</div>
<div class="line"></div>
<div class="line">        std::string propStr = propName.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="comment">// we handle visibility in a special way</span></div>
<div class="line"> <span class="keywordflow">if</span> (propStr == <span class="stringliteral">"visibility"</span>)</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">if</span> (iArgs.writeVisibility)</div>
<div class="line">            {</div>
<div class="line">                visPlug.plug = plug;</div>
<div class="line">                visPlug.obj = attr;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">bool</span> userAttr = <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">if</span> (!matchFilterOrAttribs(plug, iArgs, userAttr))</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (userAttr &amp;&amp; !iUserProps.valid())</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line"> <span class="keywordflow">if</span> (!userAttr &amp;&amp; !iArbGeom.valid())</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">int</span> sampType = util::getSampledType(plug);</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> scopePlug = iNode.<a class="code" href="./class_m_fn_dependency_node.html#aac29b4a3b51c9d236175e955638f7153">findPlug</a>(propName + cAttrScope);</div>
<div class="line">        AbcGeom::GeometryScope scope = AbcGeom::kUnknownScope;</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!scopePlug.<a class="code" href="./class_m_plug.html#ab7ec149d38b7c29ca55c5aa7b407d8f9">isNull</a>())</div>
<div class="line">        {</div>
<div class="line">            scope = strToScope(scopePlug.<a class="code" href="./class_m_plug.html#a445750444a9e8c22b8b2366f19d7264a">asString</a>());</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> typeStr;</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> typePlug = iNode.<a class="code" href="./class_m_fn_dependency_node.html#aac29b4a3b51c9d236175e955638f7153">findPlug</a>(propName + cAttrType);</div>
<div class="line"> <span class="keywordflow">if</span> (!typePlug.<a class="code" href="./class_m_plug.html#ab7ec149d38b7c29ca55c5aa7b407d8f9">isNull</a>())</div>
<div class="line">        {</div>
<div class="line">            typeStr= typePlug.<a class="code" href="./class_m_plug.html#a445750444a9e8c22b8b2366f19d7264a">asString</a>();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (userAttr)</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">switch</span> (sampType)</div>
<div class="line">            {</div>
<div class="line"> <span class="comment">// static</span></div>
<div class="line"> <span class="keywordflow">case</span> 0:</div>
<div class="line">                {</div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// Fills in the static plug to OScalarProperty OR </span></div>
<div class="line"> <span class="comment">// OArrayProperty correspondence, used for the writing</span></div>
<div class="line"> <span class="comment">// below.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                    createUserPropertyFromMFnAttr(attr, plug, iUserProps, 0,</div>
<div class="line">                        scope, typeStr, staticPlugObjScalarVec,</div>
<div class="line">                        staticPlugObjArrayVec);</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// sampled</span></div>
<div class="line"> <span class="keywordflow">case</span> 1:</div>
<div class="line"> <span class="comment">// curve treat like sampled</span></div>
<div class="line"> <span class="keywordflow">case</span> 2:</div>
<div class="line">                {</div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// Fill in the mPlugUserPropertyVec, used for the writing</span></div>
<div class="line"> <span class="comment">// below as well as in the write() method for animated</span></div>
<div class="line"> <span class="comment">// values.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                    createUserPropertyFromMFnAttr(attr, plug, iUserProps,</div>
<div class="line">                        iTimeIndex, scope, typeStr, mPlugObjScalarVec,</div>
<div class="line">                        mPlugObjArrayVec);</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">switch</span> (sampType)</div>
<div class="line">            {</div>
<div class="line"> <span class="comment">// static</span></div>
<div class="line"> <span class="keywordflow">case</span> 0:</div>
<div class="line">                {</div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// Fills in the plug to OArrayProperty correspondence,</span></div>
<div class="line"> <span class="comment">// used for the writing below.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                    createGeomPropertyFromMFnAttr(attr, plug, iArbGeom, 0,</div>
<div class="line">                        scope, typeStr, staticPlugObjArrayVec);</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// sampled</span></div>
<div class="line"> <span class="keywordflow">case</span> 1:</div>
<div class="line"> <span class="comment">// curve treat like sampled</span></div>
<div class="line"> <span class="keywordflow">case</span> 2:</div>
<div class="line">                {</div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// mPlugObjArrayVec</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// member variable used by isAnimated and when sampling</span></div>
<div class="line"> <span class="comment">// the animated data.</span></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line">                    createGeomPropertyFromMFnAttr(attr, plug, iArbGeom,</div>
<div class="line">                        iTimeIndex, scope, typeStr, mPlugObjArrayVec);</div>
<div class="line">                }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// write the static scalar props</span></div>
<div class="line">    std::vector&lt; PlugAndObjScalar &gt;::iterator k =</div>
<div class="line">        staticPlugObjScalarVec.begin();</div>
<div class="line">    std::vector&lt; PlugAndObjScalar &gt;::iterator kend =</div>
<div class="line">        staticPlugObjScalarVec.end();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (; k != kend; k++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = k-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// attributeTo[Scalar|Array]PropertyPair does the writing.</span></div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToScalarPropertyPair(k-&gt;obj, k-&gt;plug,</div>
<div class="line">            k-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get static scalar property "</span>;</div>
<div class="line">            msg += k-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// write the static array props</span></div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt;::iterator j =</div>
<div class="line">        staticPlugObjArrayVec.begin();</div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt;::iterator jend =</div>
<div class="line">        staticPlugObjArrayVec.end();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (; j != jend; j++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = j-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToArrayPropertyPair(j-&gt;obj, j-&gt;plug,</div>
<div class="line">            j-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get static array property "</span>;</div>
<div class="line">            msg += j-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// write the animated userProperties</span></div>
<div class="line">    k = mPlugObjScalarVec.begin();</div>
<div class="line">    kend = mPlugObjScalarVec.end();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (; k != kend; ++k)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = k-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToScalarPropertyPair(k-&gt;obj, k-&gt;plug,</div>
<div class="line">            k-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get scalar property "</span>;</div>
<div class="line">            msg += k-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// write the animated arbGeomProps</span></div>
<div class="line">    j = mPlugObjArrayVec.begin();</div>
<div class="line">    jend = mPlugObjArrayVec.end();</div>
<div class="line"> <span class="keywordflow">for</span> (; j != jend; j++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = j-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToArrayPropertyPair(j-&gt;obj, j-&gt;plug,j-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get array property "</span>;</div>
<div class="line">            msg += j-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// Rest of this is specific to visibility</span></div>
<div class="line"> <span class="keywordflow">if</span> (!visPlug.plug.isNull())</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordtype">int</span> retVis = util::getVisibilityType(visPlug.plug);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// visible will go on the top most compound</span></div>
<div class="line">        Abc::OCompoundProperty parent = iParentObj.getProperties();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">switch</span> (retVis)</div>
<div class="line">        {</div>
<div class="line"> <span class="comment">// static visibility 0 case</span></div>
<div class="line"> <span class="keywordflow">case</span> 1:</div>
<div class="line">            {</div>
<div class="line">                Alembic::Util::int8_t visVal =</div>
<div class="line">                    Alembic::AbcGeom::kVisibilityHidden;</div>
<div class="line"></div>
<div class="line">                Abc::OCharProperty bp =</div>
<div class="line">                    Alembic::AbcGeom::CreateVisibilityProperty(</div>
<div class="line">                        iParentObj, 0);</div>
<div class="line">                bp.set(visVal);</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// animated visibility 0 case</span></div>
<div class="line"> <span class="keywordflow">case</span> 2:</div>
<div class="line">            {</div>
<div class="line">                Alembic::Util::int8_t visVal =</div>
<div class="line">                    Alembic::AbcGeom::kVisibilityHidden;</div>
<div class="line"></div>
<div class="line">                Abc::OCharProperty bp = </div>
<div class="line">                    Alembic::AbcGeom::CreateVisibilityProperty(</div>
<div class="line">                        iParentObj, iTimeIndex);</div>
<div class="line"></div>
<div class="line">                bp.set(visVal);</div>
<div class="line">                visPlug.prop = bp;</div>
<div class="line">                mAnimVisibility = visPlug;</div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// animated visibility 1 case</span></div>
<div class="line"> <span class="keywordflow">case</span> 3:</div>
<div class="line">            {</div>
<div class="line"> <span class="comment">// dont add if we are forcing static (no frame range specified)</span></div>
<div class="line"> <span class="keywordflow">if</span> (iTimeIndex == 0)</div>
<div class="line">                {</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                mAnimVisibility = visPlug;</div>
<div class="line"></div>
<div class="line">                Alembic::Util::int8_t visVal =</div>
<div class="line">                    Alembic::AbcGeom::kVisibilityDeferred;</div>
<div class="line"></div>
<div class="line">                Abc::OCharProperty bp = </div>
<div class="line">                    Alembic::AbcGeom::CreateVisibilityProperty(</div>
<div class="line">                        iParentObj, iTimeIndex);</div>
<div class="line"></div>
<div class="line">                bp.set(visVal);</div>
<div class="line">                visPlug.prop = bp;</div>
<div class="line">                mAnimVisibility = visPlug;</div>
<div class="line"></div>
<div class="line">            }</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">// dont write any visibility</span></div>
<div class="line"> <span class="keywordflow">default</span>:</div>
<div class="line"> <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Returns true if the attribute is:</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// * Included by name via a -a or -u argument</span></div>
<div class="line"><span class="comment">// * Matches by name via a -atp or -uatp argument</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// If it's matched via -u or -uatp, userAttrOut is set to true.</span></div>
<div class="line"><span class="comment">// These are intended to go in the .userProperties bucket on the</span></div>
<div class="line"><span class="comment">// object.</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">bool</span> AttributesWriter::matchFilterOrAttribs(<span class="keyword">const</span> <a class="code" href="./class_m_plug.html">MPlug</a> &amp; iPlug,</div>
<div class="line"> <span class="keyword">const</span> JobArgs &amp; iArgs,</div>
<div class="line"> <span class="keywordtype">bool</span>&amp; userAttrOut)</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = iPlug.<a class="code" href="./class_m_plug.html#a3694e3dcc355fb7d654a0bb6a8a3ff1c">partialName</a>(0, 0, 0, 0, 0, 1);</div>
<div class="line">    std::string name = propName.<a class="code" href="./class_m_string.html#aa9ab612f356c53479afc4c648c9ef94d">asChar</a>();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (name.find(<span class="stringliteral">"["</span>) != std::string::npos)</div>
<div class="line">    {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// For .arbGeomParam bucket</span></div>
<div class="line">    std::vector&lt;std::string&gt;::const_iterator f;</div>
<div class="line">    std::vector&lt;std::string&gt;::const_iterator fEnd =</div>
<div class="line">        iArgs.prefixFilters.end();</div>
<div class="line"> <span class="keywordflow">for</span> (f = iArgs.prefixFilters.begin(); f != fEnd; ++f)</div>
<div class="line">    {</div>
<div class="line"> <span class="comment">// check the prefilter and ignore those that match but end with</span></div>
<div class="line"> <span class="comment">// arb attr</span></div>
<div class="line"> <span class="keywordflow">if</span> (f-&gt;length() &gt; 0 &amp;&amp;</div>
<div class="line">            name.compare(0, f-&gt;length(), *f) == 0 &amp;&amp;</div>
<div class="line">            !endsWithArbAttr(name) &amp;&amp;</div>
<div class="line">            ( !iPlug.<a name="a89"></a><a class="code" href="./class_m_plug.html#a839768abda6d6ba21e549302208943bd">isChild</a>() || !isDataAttr(iPlug.<a name="a90"></a><a class="code" href="./class_m_plug.html#aa2338038d1c59dc4d35f37f918aabfab">parent</a>()) ))</div>
<div class="line">        {</div>
<div class="line">            userAttrOut = <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">//</span></div>
<div class="line"> <span class="comment">// For .userProperties bucket</span></div>
<div class="line">    std::vector&lt;std::string&gt;::const_iterator it;</div>
<div class="line">    std::vector&lt;std::string&gt;::const_iterator itEnd =</div>
<div class="line">        iArgs.userPrefixFilters.end();</div>
<div class="line"> <span class="keywordflow">for</span> (it = iArgs.userPrefixFilters.begin(); it != itEnd; ++it)</div>
<div class="line">    {</div>
<div class="line"> <span class="comment">// check the userprefilter and ignore those that match but end with</span></div>
<div class="line"> <span class="comment">// arb attr</span></div>
<div class="line"> <span class="keywordflow">if</span> (it-&gt;length() &gt; 0 &amp;&amp;</div>
<div class="line">            name.compare(0, it-&gt;length(), *it) == 0 &amp;&amp;</div>
<div class="line">            !endsWithArbAttr(name) &amp;&amp;</div>
<div class="line">            ( !iPlug.<a class="code" href="./class_m_plug.html#a839768abda6d6ba21e549302208943bd">isChild</a>() || !isDataAttr(iPlug.<a class="code" href="./class_m_plug.html#aa2338038d1c59dc4d35f37f918aabfab">parent</a>()) ))</div>
<div class="line">        {</div>
<div class="line">            userAttrOut = <span class="keyword">true</span>;</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="comment">// check our specific list of attributes</span></div>
<div class="line"> <span class="keywordflow">if</span> (iArgs.attribs.find(name) != iArgs.attribs.end())</div>
<div class="line">    {</div>
<div class="line">        userAttrOut = <span class="keyword">false</span>;</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (iArgs.userAttribs.find(name) != iArgs.userAttribs.end())</div>
<div class="line">    {</div>
<div class="line">        userAttrOut = <span class="keyword">true</span>;</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> AttributesWriter::hasAnyAttr(<span class="keyword">const</span> <a class="code" href="./class_m_fn_dependency_node.html">MFnDependencyNode</a> &amp; iNode,</div>
<div class="line"> <span class="keyword">const</span> JobArgs &amp; iArgs)</div>
<div class="line">{</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> attrCount = iNode.<a class="code" href="./class_m_fn_dependency_node.html#af762f251eae844405571ed86ab9d1509">attributeCount</a>();</div>
<div class="line"> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt; staticPlugObjArrayVec;</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">bool</span> userAttr;</div>
<div class="line"> <span class="keywordflow">for</span> (i = 0; i &lt; attrCount; i++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_object.html">MObject</a> attr = iNode.<a class="code" href="./class_m_fn_dependency_node.html#a6117a63ae3bb2d03aa976dc8732d93a5">attribute</a>(i);</div>
<div class="line"> <a class="code" href="./class_m_fn_attribute.html">MFnAttribute</a> mfnAttr(attr);</div>
<div class="line"> <a class="code" href="./class_m_plug.html">MPlug</a> plug = iNode.<a class="code" href="./class_m_fn_dependency_node.html#aac29b4a3b51c9d236175e955638f7153">findPlug</a>(attr, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line"> <span class="comment">// if it is not readable, then bail without any more checking</span></div>
<div class="line"> <span class="keywordflow">if</span> (!mfnAttr.isReadable() || plug.<a class="code" href="./class_m_plug.html#ab7ec149d38b7c29ca55c5aa7b407d8f9">isNull</a>())</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (matchFilterOrAttribs(plug, iArgs, userAttr))</div>
<div class="line">        {</div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">AttributesWriter::~AttributesWriter()</div>
<div class="line">{</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">bool</span> AttributesWriter::isAnimated()</div>
<div class="line">{</div>
<div class="line"> <span class="keywordflow">return</span> !mPlugObjArrayVec.empty() || !mAnimVisibility.plug.<a class="code" href="./class_m_plug.html#ab7ec149d38b7c29ca55c5aa7b407d8f9">isNull</a>() ||</div>
<div class="line">           !mPlugObjScalarVec.empty();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> AttributesWriter::write()</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt;::iterator j =</div>
<div class="line">        mPlugObjArrayVec.begin();</div>
<div class="line">    std::vector&lt; PlugAndObjArray &gt;::iterator jend =</div>
<div class="line">        mPlugObjArrayVec.end();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (; j != jend; j++)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = j-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToArrayPropertyPair(j-&gt;obj, j-&gt;plug, j-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get sampled array property "</span>;</div>
<div class="line">            msg += j-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    std::vector&lt; PlugAndObjScalar &gt;::iterator k =</div>
<div class="line">        mPlugObjScalarVec.begin();</div>
<div class="line">    std::vector&lt; PlugAndObjScalar &gt;::iterator kend =</div>
<div class="line">        mPlugObjScalarVec.end();</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">for</span> (; k != kend; ++k)</div>
<div class="line">    {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> propName = k-&gt;plug.partialName(0, 0, 0, 0, 0, 1);</div>
<div class="line"></div>
<div class="line"> <span class="keywordtype">bool</span> filledProp = attributeToScalarPropertyPair(k-&gt;obj, k-&gt;plug,</div>
<div class="line">            k-&gt;prop);</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!filledProp)</div>
<div class="line">        {</div>
<div class="line"> <a class="code" href="./class_m_string.html">MString</a> msg = <span class="stringliteral">"WARNING: Couldn't get sampled scalar property "</span>;</div>
<div class="line">            msg += k-&gt;plug.partialName(1, 0, 0, 0, 1, 1);</div>
<div class="line">            msg += <span class="stringliteral">", so skipping."</span>;</div>
<div class="line"> <a class="code" href="./class_m_global.html#acb043e7fc4eb7fc0f39833d31364b8a4">MGlobal::displayWarning</a>(msg);</div>
<div class="line"> <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"> <span class="keywordflow">if</span> (!mAnimVisibility.plug.isNull())</div>
<div class="line">    {</div>
<div class="line">        Alembic::Util::int8_t visVal = -1;</div>
<div class="line"> <span class="keywordflow">if</span> (!mAnimVisibility.plug.asBool())</div>
<div class="line">        {</div>
<div class="line">            visVal = 0;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        mAnimVisibility.prop.set(&amp;visVal);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div class="footer-block"><a class="comments-anchor" href="../html/ac.cmtdialog.htm" target="_blank"><span class="comments-link">Please send us your comment about this page</span></a></div></div>
</div></body>
</html>
